import{_ as a,o as n,c as o,b as e,e as i,a as r,d as t,r as d}from"./app.565765f9.js";const p={},c=r(`<h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> Docker</h1><h1 id="_1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_1-\u6982\u8FF0" aria-hidden="true">#</a> 1. \u6982\u8FF0</h1><h2 id="_1-1-docker\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_1-1-docker\u7B80\u4ECB" aria-hidden="true">#</a> 1.1 Docker\u7B80\u4ECB</h2><p><strong>Docker \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5E94\u7528\u5BB9\u5668\u5F15\u64CE\uFF0C\u662F\u7528Go\u8BED\u8A00\u5F00\u53D1\u7684</strong>\u3002\u7528\u4E8E\u5F00\u53D1\u3001\u4EA4\u4ED8\u548C\u8FD0\u884C\u5E94\u7528\u7A0B\u5E8F\u7684\u5F00\u653E\u5E73\u53F0\uFF0C\u80FD\u591F\u5C06\u5E94\u7528\u7A0B\u5E8F\u4E0E\u57FA\u7840\u8BBE\u65BD\u5206\u5F00\uFF0C\u4ECE\u800C\u53EF\u4EE5\u5FEB\u901F\u4EA4\u4ED8\u8F6F\u4EF6\u3002</p><p>\u770B\u770BDocker \u7684Logo\u56FE</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142348172.webp" alt="\u56FE\u7247"></p><p>\uFF0CDocker\u5C31\u597D\u6BD4\u662F\u4E0B\u9762\u7684\u5C0F\u9CB8\u9C7C\uFF0C\u4E0A\u9762\u88C5\u6EE1\u7684\u6BCF\u4E2A\u96C6\u88C5\u7BB1(\u65B9\u5757)\u53EF\u4EE5\u7406\u89E3\u4E3A\u5BB9\u5668\uFF0C\u4E0D\u7BA1\u96C6\u88C5\u7BB1\u91CC\u9762\u88C5\u7684\u4EC0\u4E48\uFF0C\u7EDF\u4E00\u6309\u96C6\u88C5\u7BB1\u7684\u5F62\u5F0F\u6253\u5305\u5B58\u653E\u3001\u8FD0\u8F93\u5373\u53EF\uFF0C\u96C6\u88C5\u7BB1\u4E4B\u95F4\u4E92\u4E0D\u5F71\u54CD\uFF1B\u5373Docker\u4E0D\u5728\u4E4E\u5BB9\u5668\u91CC\u7684\u5185\u5BB9\u662F\u4EC0\u4E48\uFF0C<strong>\u7EDF\u4E00\u57FA\u4E8E\u5BB9\u5668\u8FD9\u79CD\u5F62\u5F0F\u8FDB\u884C\u6807\u51C6\u5316\u7BA1\u7406\uFF0C\u5BB9\u5668\u4E4B\u95F4\u76F8\u4E92\u9694\u79BB</strong>\uFF0C\u6240\u4EE5Docker\u4E0A\u8FD0\u884C\u7684\u591A\u4E2A\u5BB9\u5668\u662F\u76F8\u4E92\u4E0D\u5F71\u54CD\u7684\u3002</p><p>Docker \u4ECE 17.03 \u7248\u672C\u4E4B\u540E\u5206\u4E3A CE\uFF08Community Edition: \u793E\u533A\u7248\uFF09 \u548C EE\uFF08Enterprise Edition: \u4F01\u4E1A\u7248\uFF09\uFF0C\u901A\u5E38\u793E\u533A\u7248\u8DB3\u591F\u7528\u4E86\uFF0C\u529F\u80FD\u5F3A\u5927\uFF0C\u8FD8\u514D\u8D39\u3002</p><blockquote><p>Docker\u5728\u7EBF\u7248\uFF1Ahttps://labs.play-with-docker.com/</p><p>\u4E66\u7C4D\u63A8\u8350\uFF1Ahttps://www.cnblogs.com/Can-daydayup/p/15585714.html</p></blockquote><h2 id="_1-2-docker\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#_1-2-docker\u67B6\u6784" aria-hidden="true">#</a> 1.2 Docker\u67B6\u6784</h2><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142348441.webp" alt="\u56FE\u7247">Docker Architecture Diagram</p><p><strong>Docker\u662F\u5BA2\u6237\u7AEF/\u670D\u52A1\u5668\u6A21\u5F0F\u67B6\u6784(C/S)\uFF0CClient(\u5BA2\u6237\u7AEF)\u548CDocker daemon(\u5B88\u62A4\u8FDB\u7A0B)\u901A\u4FE1\uFF0C \u540E\u8005\u63A5\u6536\u5230\u5BA2\u6237\u7AEF\u6307\u4EE4\u5E76\u6267\u884C</strong>\u3002\u7B80\u8FF0\u4E0A\u56FE\u7684\u4E09\u4E2A\u6D41\u7A0B\uFF1A</p><ul><li><strong>\u5BA2\u6237\u7AEF(Client)</strong> \u53D1\u9001<strong>docker build</strong>\u6307\u4EE4\uFF0C <strong>\u670D\u52A1\u7AEF(Docker daemon)</strong> \u6536\u5230\u6307\u4EE4\u4E4B\u540E\u5C31\u6267\u884C\uFF0C\u5C06\u5BF9\u5E94\u6587\u4EF6\u6253\u5305\u751F\u6210\u4E3A<strong>\u955C\u50CF(Images)</strong> \uFF1B</li><li><strong>\u5BA2\u6237\u7AEF(Client)</strong> \u53D1\u9001<strong>docker pull</strong>\u6307\u4EE4\uFF0C<strong>\u670D\u52A1\u7AEF(Docker daemon)</strong> \u6536\u5230\u6307\u4EE4\u4E4B\u540E\u5C31\u6267\u884C\uFF0C\u4ECE<strong>\u8FDC\u7A0B\u4ED3\u50A8\u4E2D(Registry)</strong> \u5BFB\u627E<strong>\u955C\u50CF(Images)</strong> \uFF0C\u5E76<strong>\u4E0B\u8F7D\u5230Docker\u4E3B\u673A\u4E0A(DOCKER_HOST)</strong> \uFF0C\u5982\u679C\u627E\u4E0D\u5230\u5C31\u62A5\u9519\uFF1B</li><li><strong>\u5BA2\u6237\u7AEF(Client)</strong> \u53D1\u9001<strong>docker run</strong>\u6307\u4EE4\uFF0C<strong>\u670D\u52A1\u7AEF(Docker daemon)</strong> \u6536\u5230\u6307\u4EE4\u4E4B\u540E\u5C31\u6267\u884C\uFF0C\u5148\u4ECE\u672C\u5730\u67E5\u627E<strong>\u955C\u50CF(Images)</strong> \uFF0C\u5982\u679C\u672C\u5730\u5B58\u5728\uFF0C\u76F4\u63A5\u901A\u8FC7\u955C\u50CF\u542F\u52A8<strong>\u5BB9\u5668(Containers)</strong> \u5B9E\u4F8B\uFF1B\u5982\u679C\u672C\u5730\u6CA1\u6709\u955C\u50CF(Images)\uFF0C\u5C31\u4F1A\u4ECE\u8FDC\u7A0B\u4ED3\u50A8\u4E2D(Registry)\u4E0B\u8F7D\uFF0C\u7136\u540E\u518D\u6839\u636E\u955C\u50CF\u542F\u52A8<strong>\u5BB9\u5668(Containers)</strong> \u5B9E\u4F8B\uFF0C\u5982\u679C\u90FD\u6CA1\u627E\u5230\uFF0C\u90A3\u5C31\u62A5\u9519\u3002</li></ul><p>\u4E0A\u9762\u53EA\u662F\u7528\u4E09\u5173\u952E\u6307\u4EE4\u5927\u6982\u63CF\u8FF0\u4E86\u4ECE\u5BA2\u6237\u7AEF\u5230\u670D\u52A1\u7AEF\u7684\u6267\u884C\u6D41\u7A0B\uFF0C\u5176\u5B9E\u8FD8\u6709\u5F88\u591A\u6307\u4EE4\uFF0C\u540E\u7EED\u4F1A\u4E13\u95E8\u6574\u7406\u6587\u7AE0\u5206\u4EAB\u3002</p><p>\u4E0A\u56FE\u672F\u8BED\u89E3\u91CA\u53CA\u4F5C\u7528\uFF1A</p><ul><li><strong>Docker daemon(\u5B88\u62A4\u8FDB\u7A0B)</strong> \uFF1A\u8D1F\u8D23\u76D1\u542C\u5BA2\u6237\u7AEF\u53D1\u8FC7\u6765\u7684\u6307\u4EE4\u8BF7\u6C42\uFF0C\u5E76\u7BA1\u7406Docker\u7684\u5404\u79CD\u5BF9\u8C61\uFF0C\u5982\u955C\u50CF(Images)\u3001\u5BB9\u5668(Containers)\u3001\u7F51\u7EDC\u7B49\u3002</li><li><strong>Client(\u5BA2\u6237\u7AEF)</strong> \uFF1A\u7528\u6237\u548CDocker\u4E3B\u673A\u4EA4\u4E92\u7684\u4E3B\u8981\u65B9\u5F0F\uFF0C\u5C31\u662F\u7528\u6765\u53D1\u6307\u4EE4\u8BF7\u6C42\u7684\u3002</li><li><strong>\u8FDC\u7A0B\u4ED3\u50A8(Registry)</strong> \uFF1A\u7528\u4E8E\u5404\u79CD\u955C\u50CF\u7684\u5B58\u50A8\uFF0C<strong>Docker Hub\u662F\u6700\u5927\u7684\u955C\u50CF\u5B58\u50A8\u5E93</strong>\uFF0C\u57FA\u672C\u4E0A\u5E73\u65F6\u80FD\u7528\u5230\u7684\u955C\u50CF\u90FD\u53EF\u4EE5\u627E\u5230\uFF1B\u4E3A\u4E86\u63D0\u5347\u62C9\u53D6\u901F\u5EA6\uFF0C\u53EF\u4EE5\u6307\u5B9A\u56FD\u5185\u7684\u4E00\u4E9B\u4ED3\u50A8\u3002</li><li><strong>\u955C\u50CF(Images)</strong> \uFF1A\u662F\u4E00\u4E2A\u542F\u52A8<strong>\u5BB9\u5668(Containers)</strong> \u7684\u53EA\u8BFB\u6A21\u677F\uFF1B\u6BD4\u8F83\u5BB9\u6613\u7406\u89E3\u7684\u6BD4\u55BB\uFF1A\u955C\u50CF\u5C31\u662F\u7F16\u7A0B\u8BED\u8A00\u4E2D\u7684\u7C7B(Class)\uFF0C\u5BB9\u5668\u5C31\u662F\u901A\u8FC7\u7C7B(Class) new\u51FA\u6765\u7684\u5B9E\u4F8B\u3002</li><li><strong>\u5BB9\u5668(Containers)</strong> \uFF1A\u5C31\u662F<strong>\u955C\u50CF(Images)</strong> \u53EF\u8FD0\u884C\u7684\u5B9E\u4F8B\u3002</li></ul><h2 id="_1-3-docker\u5E26\u6765\u7684\u597D\u5904" tabindex="-1"><a class="header-anchor" href="#_1-3-docker\u5E26\u6765\u7684\u597D\u5904" aria-hidden="true">#</a> 1.3 Docker\u5E26\u6765\u7684\u597D\u5904</h2><ul><li><strong>\u5F00\u53D1\u66F4\u52A0\u654F\u6377\uFF1A</strong> \u8BA9\u5F00\u53D1\u4EBA\u5458\u53EF\u4EE5\u81EA\u7531\u5B9A\u4E49\u73AF\u5883\uFF0C\u521B\u5EFA\u548C\u90E8\u7F72\u7684\u5E94\u7528\u7A0B\u5E8F\u66F4\u5FEB\u3001\u66F4\u5BB9\u6613\uFF0C\u8FD0\u7EF4\u4EBA\u5458\u5FEB\u901F\u5E94\u5BF9\u53D8\u5316\u4E5F\u66F4\u52A0\u7075\u6D3B\u6027\u3002</li><li><strong>\u9AD8\u53EF\u79FB\u690D\u6027\u548C\u6269\u5C55\u6027\uFF1A</strong> Docker\u5BB9\u5668\u53EF\u4EE5\u8FD0\u884C\u5728\u5404\u79CD\u8BBE\u5907\u73AF\u5883\u4E2D\uFF0C\u5982\u5F00\u53D1\u7535\u8111\u3001\u865A\u62DF\u673A\u3001\u670D\u52A1\u5668\u4E0A\u7B49\uFF1B\u6839\u636E\u4E1A\u52A1\u9700\u6C42\uFF0C\u53EF\u5B9E\u65F6\u6269\u5C55\u6216\u62C6\u9664\u5E94\u7528\u7A0B\u5E8F\u53CA\u76F8\u5173\u670D\u52A1\uFF1B</li><li><strong>\u5145\u5206\u5229\u7528\u786C\u4EF6\u8D44\u6E90</strong>\uFF1ADocker\u8F7B\u91CF\u7EA7\u3001\u542F\u52A8\u5FEB\uFF0C\u80FD\u5171\u7528\u516C\u5171\u670D\u52A1\uFF0C\u4E0D\u50CF\u4F20\u7EDF\u7684\u865A\u62DF\u673A\u90A3\u6837\uFF0C\u9700\u8981\u5355\u72EC\u865A\u62DF\u51FA\u6574\u4E2A\u7CFB\u7EDF\uFF0C\u5360\u7528\u8D44\u6E90\u591A\uFF0C\u901F\u5EA6\u8FD8\u4E0D\u591F\u5FEB\u3002Docker\u5BB9\u5668\u4E4B\u95F4\u76F8\u4E92\u9694\u79BB\uFF0C\u4E92\u4E0D\u51B2\u7A81\uFF0C\u6240\u4EE5\u540C\u65F6\u53EF\u8FD0\u884C\u5F88\u591A\u4E2A\u5BB9\u5668\uFF0C\u5145\u5206\u5229\u7528\u8D44\u6E90\u3002</li></ul><p>\u7406\u8BBA\u5148\u8BF4\u90A3\u4E48\u591A\uFF0C\u4E3B\u8981\u662F\u5B9E\u64CD\u5E94\u7528\uFF0C\u7528\u660E\u767D\u4E86\uFF0C\u7406\u8BBA\u81EA\u7136\u5C31\u6E05\u6670\u4E86\u3002</p><h1 id="_2-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_2-\u5B89\u88C5" aria-hidden="true">#</a> 2. \u5B89\u88C5</h1><p>\u5B89\u88C5\u6B65\u9AA4\u770B\u672C\u7F51\u7AD9\u5176\u4ED6\u6587\u7AE0\u6709\u53D9\u8FF0</p><h1 id="_3-\u521D\u4F53\u9A8C" tabindex="-1"><a class="header-anchor" href="#_3-\u521D\u4F53\u9A8C" aria-hidden="true">#</a> 3. \u521D\u4F53\u9A8C</h1><p>\u5B89\u88C5\u5B8C\u6210\u4E4B\u540E\uFF0C\u8FD9\u91CC\u4E0D\u6025\u7740\u5F80\u4E0B\u8BF4\uFF0C\u5148\u6765\u4F53\u9A8C\u4E00\u4E0B\uFF1B\u5F88\u65B9\u4FBF\u7684\u5C31\u5C06\u81EA\u5DF1\u7684\u9879\u76EE\u6253\u5305\u7136\u540E\u8FD0\u884C\uFF0C\u6B65\u9AA4\u5982\u4E0B\uFF1A</p><ul><li><p>\u51C6\u5907\u4E00\u4E2A\u9879\u76EE</p><p>\u8FD9\u91CC\u5C31\u76F4\u63A5\u521B\u5EFA\u4E00\u4E2A\u9ED8\u8BA4\u7684API\u9879\u76EE(\u57FA\u4E8E.NetCore3.1)\u5373\u53EF\uFF0C\u4EC0\u4E48\u90FD\u4E0D\u505A\u3002</p></li><li><p>\u7F16\u5199Dockerfile</p><p>\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u589E\u52A0\u4E00\u4E2ADockerfile\u6587\u4EF6\uFF0C\u91CC\u9762\u5185\u5BB9\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142348076.webp" alt="\u56FE\u7247"></p><p>\u5177\u4F53\u5185\u5BB9\u5982\u4E0B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>FROM mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim
WORKDIR /app
COPY . .
EXPOSE 80
ENTRYPOINT [&quot;dotnet&quot;, &quot;DockerDemo.dll&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BBE\u7F6EDockerfile\u7684\u6587\u4EF6\u5C5E\u6027\u4E3A\u59CB\u7EC8\u590D\u5236\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349155.webp" alt="\u56FE\u7247"></p><p>\u4EE5\u6587\u4EF6\u7CFB\u7EDF\u7684\u5F62\u5F0F\u53D1\u5E03\u9879\u76EE\uFF0C\u6307\u5B9A\u672C\u5730\u76EE\u5F55\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349034.webp" alt="\u56FE\u7247"></p></li><li><p>\u5C06\u53D1\u5E03\u4E4B\u540E\u7684\u6587\u4EF6\u62F7\u8D1D\u5230\u88C5\u6709Docker\u7684\u4E3B\u673A\u4E0A</p><p>\u5C06\u9879\u76EE\u8FDB\u884C\u53D1\u5E03\uFF0C\u628A\u53D1\u5E03\u4E4B\u540E\u7684\u6587\u4EF6\u62F7\u8D1D\u5230\u6211\u7684\u963F\u91CC\u4E91\u670D\u52A1\u5668\u4E0A\uFF0C\u7528\u5230\u7684\u5DE5\u5177\u662FFinalShell(\u4E00\u4E2A\u5DE5\u5177\u5B8C\u6210\u8FDE\u63A5\u670D\u52A1\u5668\u548C\u4E0A\u4F20\u6587\u4EF6\uFF0C\u5F88\u597D\u7528)\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349420.webp" alt="\u56FE\u7247"></p></li><li><p>\u6253\u5305\u4E3A\u955C\u50CF</p><p>\u8FDB\u5165\u53D1\u5E03\u6587\u4EF6\u76EE\u5F55\uFF0C\u6267\u884C<code>docker build</code>\u547D\u4EE4\uFF0C\u5C06\u53D1\u5E03\u6587\u4EF6\u6253\u5305\u4E3A\u4E00\u4E2A\u955C\u50CF\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349513.webp" alt="\u56FE\u7247"></p><p>\u4E0A\u56FE\u4E2D\u7684mydockerdemo \u662F\u955C\u50CF\u540D\uFF0C\u53EF\u4EE5\u81EA\u5B9A\u4E49\uFF1B\u901A\u8FC7<code>docker images</code>\u67E5\u770B\u955C\u50CF\u662F\u5426\u751F\u6210\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349452.webp" alt="\u56FE\u7247"></p></li><li><p>\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668(\u91CC\u9762\u5305\u542B\u6211\u4EEC\u7684\u9879\u76EE)</p><p>\u955C\u50CF\u751F\u6210\u4E4B\u540E\uFF0C\u5C31\u53EF\u4EE5\u901A\u8FC7<code>docker run</code>\u6307\u4EE4\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\u4E86\uFF0C\u5373\u542F\u52A8\u6211\u4EEC\u7684\u9879\u76EE</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349716.webp" alt="\u56FE\u7247"></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run -d --name mydockerdemo -p 9999:80 mydockerdemo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>-d\uFF1A\u540E\u53F0\u6A21\u5F0F\u8FD0\u884C\uFF1B</p><p>--name\uFF1A\u7ED9\u8FD0\u884C\u4E2D\u7684\u5BB9\u5668\u6307\u5B9A\u4E00\u4E2A\u540D\u5B57\uFF1B</p><p>-p\uFF1A\u6307\u5B9A\u7AEF\u53E3\u6620\u5C04\uFF0C \u4E3B\u673A\u7684\u7AEF\u53E39999\u6620\u5C04\u5230\u5BB9\u5668\u7684\u7AEF80\uFF0C\u56E0\u4E3A\u5728\u5BB9\u5668\u91CC\u9762\u6211\u4EEC\u7684\u9879\u76EE\u662F\u4EE580 \u7AEF\u53E3\u542F\u52A8\u7684\uFF1B</p><p>\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u662F\u4E0A\u4E00\u6B65\u751F\u6210\u7684\u955C\u50CF\u540D\u79F0\uFF0C \u5373\u6839\u636E\u6B64\u955C\u50CF\u542F\u52A8\u4E00\u4E2A\u5BB9\u5668\u5B9E\u4F8B\u3002</p></li><li><p>\u6D4B\u8BD5\u8BBF\u95EE\u770B\u770B\uFF0C\u53EA\u8981\u914D\u7F6E\u4E86\u4E91\u670D\u52A1\u5668\u7684\u5B89\u5168\u7EC4\u548C\u9632\u706B\u5899\u653E\u5F009999\u7AEF\u53E3\uFF0C\u90A3\u4E48\u5916\u7F51\u5C31\u53EF\u4EE5\u8BBF\u95EE\u4E86,\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349630.webp" alt="\u56FE\u7247"></p></li></ul><p>\u53EF\u80FD\u6709\u5C0F\u4F19\u4F34\u8BF4\uFF0C\u4E5F\u633A\u9EBB\u70E6\u7684\uFF1B\u5176\u5B9E\u7F16\u5199Dockerfile\uFF0C\u6253\u5305\u955C\u50CF\u7B49\u64CD\u4F5C\u90FD\u662F\u4E00\u6B21\u6027\u7684\uFF0C\u53EA\u8981\u751F\u6210\u4E86\u955C\u50CF\uFF0C\u540E\u7EED\u5176\u4ED6\u73AF\u5883\u76F4\u63A5\u6839\u636E\u955C\u50CF\u542F\u52A8\u5373\u53EF\uFF0C\u4E0D\u7528\u518D\u5355\u72EC\u5B89\u88C5.NetCore\u8FD0\u884C\u65F6\u7B49\u57FA\u7840\u8BBE\u65BD\u4E86\uFF0C\u6253\u5305\u597D\u7684\u955C\u50CF\u91CC\u5305\u542B\u4E86\u5B8C\u6574\u7684\u8FD0\u884C\u73AF\u5883\u3002</p><h1 id="_4-\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_4-\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> 4. \u5E38\u7528\u547D\u4EE4</h1><h2 id="_4-1-\u9884\u89C8" tabindex="-1"><a class="header-anchor" href="#_4-1-\u9884\u89C8" aria-hidden="true">#</a> 4.1 \u9884\u89C8</h2><p>Docker\u548C\u6211\u4EEC\u719F\u6089\u7684Git\u5F88\u7C7B\u4F3C\uFF0C\u90FD\u662F\u901A\u8FC7\u547D\u4EE4\u6267\u884C\u76F8\u5173\u64CD\u4F5C\uFF0C\u5F53\u7136\u4E5F\u6709\u4E00\u4E9B\u754C\u9762\u7BA1\u7406\u5DE5\u5177(\u70B9\u6309\u94AE\u7684\u90A3\u79CD)\uFF0C\u4F46\u5927\u5BB6\u4F3C\u4E4E\u66F4\u559C\u6B22\u76F4\u63A5\u6572\u547D\u4EE4\uFF0C\u6BD5\u7ADF\u8FD9\u79CD\u65B9\u5F0F\u66F4\u52A0\u7075\u6D3B\u3001\u66F4\u52A0\u5BB9\u6613\u7406\u89E3\u64CD\u4F5C\u672C\u8D28\uFF1B\u6709\u5927\u795E\u5C06\u5E38\u7528\u547D\u4EE4\u7528\u4E00\u5F20\u56FE\u5F88\u597D\u7684\u5C55\u73B0\u51FA\u6765\uFF0C\u8FD9\u91CC\u501F\u7528\u4E00\u4E0B(\u56FE\u7247\u6765\u6E90\u4E8E\u7F51\u7EDC\uFF0C\u4FB5\u5220)\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349168.webp" alt="\u56FE\u7247">cmd_logic</p><p>\u4E0D\u719F\u6089Docker\u7684\u5C0F\u4F19\u4F34\u53EF\u80FD\u770B\u89C1\u8FD9\u56FE\u76F4\u63A5\u61F5\u5708\u4E86\uFF0C\u522B\u6025\uFF0C\u63A5\u7740\u5F80\u4E0B\u770B\uFF0C \u770B\u5B8C\u518D\u56DE\u8FC7\u5934\u6765\u7785\u8FD9\u5F20\u56FE\uFF0C\u7EDD\u5BF9\u611F\u89C9\u5F88\u7ED9\u529B\u3002</p><h2 id="_4-2-\u5E38\u7528\u547D\u4EE4\u5B9E\u64CD" tabindex="-1"><a class="header-anchor" href="#_4-2-\u5E38\u7528\u547D\u4EE4\u5B9E\u64CD" aria-hidden="true">#</a> 4.2 \u5E38\u7528\u547D\u4EE4\u5B9E\u64CD</h2><h3 id="_4-2-1-\u5168\u5C40\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_4-2-1-\u5168\u5C40\u547D\u4EE4" aria-hidden="true">#</a> 4.2.1 \u5168\u5C40\u547D\u4EE4</h3><ul><li><p><strong><code>docker version</code></strong>\uFF1A\u67E5\u770Bdocker\u7248\u672C\u4FE1\u606F\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349190.webp" alt="\u56FE\u7247"></p></li><li><p><strong><code>docker info</code></strong>\uFF1A\u67E5\u770Bdocker\u8BE6\u60C5\u4FE1\u606F\uFF0C\u6BD4\u5982\u4ED3\u50A8\u4FE1\u606F\u3001\u52A0\u901F\u5668\u914D\u7F6E\u4FE1\u606F\u3001\u6709\u591A\u5C11\u4E2A\u955C\u50CF\u3001\u6709\u591A\u5C11\u4E2A\u5BB9\u5668\u3001CPU\u3001\u5185\u5B58\u7B49\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349901.webp" alt="\u56FE\u7247"></p></li><li><p><strong><code>docker events</code></strong>\uFF1A\u4ECEdocker \u670D\u52A1\u83B7\u53D6\u5B9E\u65F6\u4E8B\u4EF6\uFF0C\u901A\u4FD7\u4E00\u70B9\u7406\u89E3\u5C31\u662F\u64CD\u4F5C\u65E5\u5FD7\uFF0C\u6BD4\u5982\u5BF9\u955C\u50CF\u3001\u5BB9\u5668\u3001\u7F51\u7EDC\u3001\u6302\u8F7D\u5377\u7B49\u64CD\u4F5C\uFF0C\u5C31\u4F1A\u8BB0\u5F55\u5BF9\u5E94\u7684\u4E8B\u4EF6\u4FE1\u606F\uFF1B<strong>\u6700\u591A\u80FD\u8FD4\u56DE\u6700\u8FD1\u76841000\u6761\u65E5\u5FD7\u4FE1\u606F</strong>\u3002</p><p>\u5148\u5728\u4E00\u4E2A\u7EC8\u7AEF\u6267\u884C\u547D\u4EE4\uFF0C\u7EC8\u7AEF\u4F1A\u963B\u585E\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349995.webp" alt="\u56FE\u7247"></p><p>\u5F00\u542F\u53E6\u4E00\u4E2A\u7EC8\u7AEF\uFF0C\u6267\u884C\u6839\u636E\u955C\u50CF\u8FD0\u884C\u5BB9\u5668\u7684\u547D\u4EE4\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349306.webp" alt="\u56FE\u7247"></p><p>\u6B64\u65F6\u5F00\u542F\u7684\u7B2C\u4E00\u4E2A\u7EC8\u7AEF\u5C31\u5B9E\u65F6\u8F93\u51FA\u4E8B\u4EF6\u6D88\u606F\uFF0C\u5982\u955C\u50CF\u62C9\u53D6\u3001\u5BB9\u5668\u542F\u52A8\u3001\u5BB9\u5668\u7ED3\u675F\u7B49\u4FE1\u606F\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349435.webp" alt="\u56FE\u7247"></p><p>\u65E2\u7136\u53EF\u4EE5\u628A\u8FD9\u4E2A\u547D\u4EE4\u5F53\u505A\u64CD\u4F5C\u65E5\u5FD7\u7406\u89E3\uFF0C\u90A3\u80AF\u5B9A\u53EF\u4EE5\u6839\u636E\u6761\u4EF6\u67E5\u770B\u5BF9\u5E94\u7684\u6570\u636E\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349218.webp" alt="\u56FE\u7247"></p><p>\u5982\u56FE\u6240\u793A\uFF0C\u4F1A\u5148\u663E\u793A\u7B26\u5408\u6761\u4EF6\u7684\u4E8B\u4EF6\u4FE1\u606F\uFF0C\u7136\u540E\u4F1A\u7EE7\u7EED\u963B\u585E\uFF0C\u5982\u679C\u5BF9\u670D\u52A1\u7AEF\u6709\u64CD\u4F5C\uFF0C\u4FE1\u606F\u8FD8\u4F1A\u5B9E\u65F6\u663E\u793A\u3002\u5E38\u7528\u7684\u53C2\u6570\u6307\u5B9A\u5982\u4E0B\uFF1A</p><p><strong>-f</strong> \uFF1A\u6839\u636E\u6761\u4EF6\u8FC7\u6EE4\u4E8B\u4EF6\uFF0C\u5982\u4E0A\u56FE\u6307\u5B9A\u7684\u662F\u955C\u50CF\u4E3Ahello-world\u76F8\u5173\u7684\u4E8B\u4EF6\u4FE1\u606F\uFF1B</p><p><strong>--since</strong> \uFF1A\u4ECE\u6307\u5B9A\u7684\u65F6\u95F4\u6233\u540E\u663E\u793A\u6240\u6709\u4E8B\u4EF6\uFF0C\u53EF\u4EE5\u7406\u89E3\u4E3A\u5F00\u59CB\u65F6\u95F4\uFF0C\u652F\u6301\u591A\u79CD\u65F6\u95F4\u683C\u5F0F\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u672C\u5730\u4E3B\u673A\u7684\u65F6\u533A;</p><p><strong>--until</strong> \uFF1A\u663E\u793A\u5230\u6307\u5B9A\u7684\u65F6\u95F4\u4E3A\u6B62\uFF0C\u53EF\u4EE5\u7406\u89E3\u4E3A\u7ED3\u675F\u65F6\u95F4\uFF1B</p></li></ul><h3 id="_4-2-2-\u955C\u50CF\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_4-2-2-\u955C\u50CF\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> 4.2.2 \u955C\u50CF\u5E38\u7528\u547D\u4EE4</h3><p><strong>\u955C\u50CF(image)\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u79CD\u8F7B\u91CF\u7EA7\u3001\u53EF\u72EC\u7ACB\u8FD0\u884C\u7684\u8F6F\u4EF6\u5305\uFF0C\u5305\u542B\u4E86\u5E94\u7528\u7A0B\u5E8F\u53CA\u5176\u4ED6\u8FD0\u884C\u9700\u8981\u7684\u57FA\u7840\u8BBE\u65BD</strong>\uFF0C\u5982\u8FD0\u884C\u65F6\u3001\u914D\u7F6E\u6587\u4EF6\u3001\u4F9D\u8D56\u7684\u5E93\u7B49\uFF0C\u6240\u4EE5\u6CA1\u6709\u955C\u50CF\u5C31\u6CA1\u6CD5\u542F\u52A8\u5BB9\u5668\uFF1B\u5C31\u597D\u6BD4\u5F00\u53D1\u4E2D\u6CA1\u6709\u7C7B(class)\uFF0C\u53C8\u600E\u4E48\u53BB\u6839\u636E\u7C7B\u521B\u5EFA\u5B9E\u4F8B\u5462\u3002</p><p><strong>\u955C\u50CF\u662F\u53EA\u8BFB\u7684</strong>\uFF0C\u6240\u4EE5\u64CD\u4F5C\u547D\u4EE4\u4E0D\u591A\uFF0C\u4E00\u822C\u5C31\u662F\u589E\u3001\u5220\u3001\u67E5\u3002</p><ul><li><p><strong><code>docker images</code></strong>\uFF1A\u5217\u51FADocker\u4E3B\u673A\u4E0A\u7684\u955C\u50CF</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349162.webp" alt="\u56FE\u7247"></p><p>\u53EF\u4EE5\u6307\u5B9A\u53C2\u6570\uFF0C\u6BD4\u8F83\u5E38\u7528\u7684\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349102.webp" alt="\u56FE\u7247"></p><p><strong>-a</strong> :\u5217\u51FA\u672C\u5730\u6240\u6709\u7684\u955C\u50CF\uFF08\u542B\u4E2D\u95F4\u955C\u50CF\u5C42\uFF0C\u9ED8\u8BA4\u8FC7\u6EE4\u6389\u4E2D\u95F4\u955C\u50CF\u5C42\uFF09\u3002</p><p><strong>-q</strong> :\u53EA\u663E\u793A\u955C\u50CFID\u3002</p><p><strong>\u4E0A\u56FE\u4E2D\u7684-aq\u5C31\u662F\u663E\u793A\u6240\u6709\u955C\u50CF\u7684ID\uFF0C\u4E00\u822C\u7528\u4E8E\u6279\u91CF\u5220\u9664</strong>\u3002</p></li><li><p><strong><code>docker search</code></strong>\uFF1A\u4ECE\u8FDC\u7A0B\u4ED3\u50A8\u4E2D\u641C\u7D22\u955C\u50CF\uFF0C\u540E\u9762\u76F4\u63A5\u6839\u955C\u50CF\u540D\u79F0\u5373\u53EF</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349501.webp" alt="\u56FE\u7247"></p><p>\u53EF\u4EE5\u6307\u5B9A\u6761\u4EF6\u8FDB\u884C\u641C\u7D22\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349973.webp" alt="\u56FE\u7247"></p><p><strong>--filter</strong>\uFF1A\u6307\u5B9A\u6761\u4EF6\u641C\u7D22\uFF0C<strong>is-official\u8868\u793A\u662F\u5426\u4E3A\u5B98\u65B9\u7684\uFF0Cstars\u8868\u793A\u8981\u627E\u591A\u5C11\u661F\u661F\u4EE5\u4E0A\u7684</strong>\u3002</p><p>\u5BF9\u4E8E\u641C\u7D22\uFF0C\u6211\u8FD8\u662F\u6BD4\u8F83\u559C\u6B22\u7528\u754C\u9762\uFF0C\u76F4\u89C2\u597D\u770B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142349881.webp" alt="\u56FE\u7247"></p></li><li><p><strong><code>docker pull</code></strong>\uFF1A\u4ECE\u8FDC\u7A0B\u4ED3\u50A8\u4E2D\u62C9\u53D6\u955C\u50CF\uFF0C<strong>\u540E\u9762\u8DDF\u955C\u50CF\u540D\u548Ctag\u5373\u53EF\uFF0C\u5373\u6307\u5B9A\u7248\u672C\u62C9\u53D6\uFF0C\u5982\u679C\u4E0D\u6307\u5B9Atag\uFF0C\u9ED8\u8BA4\u5C31latest\uFF0C\u6700\u65B0\u7684</strong>\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350147.webp" alt="\u56FE\u7247"></p><p><strong>\u955C\u50CF\u7684\u5206\u5C42\u539F\u7406\u5C31\u662F\u91C7\u7528UnionFS(\u8054\u5408\u6587\u4EF6\u7CFB\u7EDF)\uFF0C\u662F\u4E00\u79CD\u5206\u5C42\u3001\u8F7B\u91CF\u7EA7\u7684\u9AD8\u6027\u80FD\u6587\u4EF6\u7CFB\u7EDF\uFF1B\u955C\u50CF\u53EF\u4EE5\u901A\u8FC7\u5206\u5C42\u6765\u8FDB\u884C\u7EE7\u627F\uFF0C\u53EF\u4EE5\u57FA\u4E8E\u57FA\u7840\u955C\u50CF\u5236\u4F5C\u51FA\u5404\u79CD\u5177\u4F53\u7684\u5E94\u7528\u955C\u50CF</strong>\uFF0C\u6BD4\u5982\u6211\u4EEC\u521A\u62C9\u53D6\u4E0B\u6765\u7684nginx\u955C\u50CF\uFF0C\u8FD9\u91CC\u5148\u4E86\u89E3\uFF0C\u540E\u7EED\u6211\u4EEC\u81EA\u5DF1\u5236\u4F5C\u955C\u50CF\u7684\u65F6\u5019\u5C31\u660E\u767D\u4E86\u3002</p><p><strong><code>docker pull \u955C\u50CF\u540D:tag</code></strong>\uFF1A\u6307\u5B9A\u7248\u672C\u62C9\u53D6\uFF1B</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350426.webp" alt="\u56FE\u7247"></p></li><li><p><strong><code>docker rmi</code></strong>\uFF1A\u5220\u9664\u6307\u5B9A\u955C\u50CF\uFF0C\u540E\u9762\u53EF\u4EE5\u8DDF\u540D\u79F0\u6216\u955C\u50CFID</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350774.webp" alt="\u56FE\u7247"></p><p>\u5220\u9664\u6307\u5B9A\u7248\u672C\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350704.webp" alt="\u56FE\u7247"></p><p>\u6839\u636E\u955C\u50CFID\u5220\u9664\uFF0C\u53EF\u4EE5\u4E00\u4E0B\u5220\u9664\u591A\u4E2A\uFF0C\u4E2D\u95F4\u7528\u7A7A\u683C\u9694\u5F00\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350453.webp" alt="\u56FE\u7247"></p><p>\u5220\u9664\u5168\u90E8\u955C\u50CF\uFF0C\u5C31\u662F\u627E\u51FA\u6240\u6709\u955C\u50CFID\uFF0C\u7136\u540E\u5220\u9664\u5C31\u884C\u4E86\uFF0C\u5F53\u7136\u80AF\u5B9A\u4E0D\u662F\u4E00\u4E2A\u4E00\u4E2A\u7684\u62F7\u8D1D\u955C\u50CFID\uFF1B**<code>docker images -aq</code>**\u53EF\u4EE5\u663E\u793A\u6240\u6709\u955C\u50CFID \uFF0C\u6240\u4EE5\u4E24\u4E2A\u547D\u4EE4\u7ED3\u5408\u7528\u5373\u53EF\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker rmi -f $(docker images -aq)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>-f</strong>\uFF1A\u4EE3\u8868\u5F3A\u5236\u5220\u9664\uFF0C\u6BD4\u5982\u4E00\u4E9B\u955C\u50CF\u548C\u5BB9\u5668\u6709\u4F9D\u8D56\uFF0C\u4F1A\u63D0\u793A\u4E0D\u80FD\u76F4\u63A5\u5220\u9664\uFF0C\u52A0\u4E0A\u8FD9\u4E2A\u9009\u9879\u5C31\u53EF\u4EE5\u5F3A\u5236\u5220\u9664\u3002</p></li><li><p><strong><code>docker save</code></strong>\uFF1A\u5BFC\u51FA\u955C\u50CF\uFF0C\u53EF\u4EE5\u79BB\u7EBF\u62F7\u8D1D\u5230\u5176\u4ED6\u4E3B\u673A\u4E0A\u4F7F\u7528\uFF0C\u907F\u514D\u6CA1\u6709\u7F51\u7EDC\u4E0D\u80FD\u4E0B\u8F7D\u955C\u50CF\u7684\u573A\u666F\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350204.webp" alt="\u56FE\u7247"></p><p>\u751F\u6210\u7684tar\u6587\u4EF6\u5C31\u53EF\u4EE5\u6839\u636E\u9700\u8981\u62F7\u8D1D\u5230\u5BF9\u5E94\u8BBE\u5907\u4E0A\u52A0\u8F7D\u4F7F\u7528\uFF0C\u4E0D\u7528\u5728\u7EBF\u62C9\u53D6\uFF0C\u56E0\u4E3A\u5F88\u591A\u573A\u666F\u662F\u4E0D\u5141\u8BB8\u8FDE\u5916\u7F51\u7684\u3002</p></li><li><p><strong><code>docker load</code></strong>\uFF1A\u52A0\u8F7D\u955C\u50CF\uFF0C\u6839\u636E\u62F7\u8D1D\u8FC7\u6765\u7684tar\u6587\u4EF6\u53EF\u4EE5\u76F4\u63A5\u52A0\u8F7D\u955C\u50CF\u5230\u4E3B\u673A\u4E0A\u3002</p><p>\u8FD9\u91CC\u6F14\u793A\u5C31\u5C06\u539F\u6765\u62C9\u53D6\u7684\u955C\u50CF\u5220\u9664\uFF0C\u7136\u540E\u901A\u8FC7load\u547D\u4EE4\u91CD\u65B0\u52A0\u8F7D\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350575.webp" alt="\u56FE\u7247"></p><p>\u52A0\u8F7D\u955C\u50CF\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350478.webp" alt="\u56FE\u7247"></p><p>\u6362\u4E00\u79CD\u5199\u6CD5\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350609.webp" alt="\u56FE\u7247"></p><p>\u9009\u9879\u8BF4\u660E\uFF1A</p><p><strong>--input , -i</strong> : \u6307\u5B9A\u5BFC\u5165\u7684\u6587\u4EF6\u3002</p><p><strong>--quiet , -q</strong> : \u7B80\u5316\u8F93\u51FA\u4FE1\u606F\uFF0C\u4E0D\u663E\u793A\u5177\u4F53\u52A0\u8F7D\u8FC7\u7A0B\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350865.webp" alt="\u56FE\u7247"></p><p>\u6CE8\uFF1A\u8FD9\u91CC\u56E0\u4E3A\u662F\u5728TestDockerImage\u76EE\u5F55\u4E0B\u6267\u884C\u547D\u4EE4\uFF0C\u6240\u4EE5\u6307\u5B9Atar\u7684\u6587\u4EF6\u65F6\uFF0C\u5C31\u5728\u5F53\u524D\u76EE\u5F55\u4E0B\u3002</p></li></ul><h3 id="_4-2-3-\u5BB9\u5668\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_4-2-3-\u5BB9\u5668\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> 4.2.3 \u5BB9\u5668\u5E38\u7528\u547D\u4EE4</h3><p><strong>\u5BB9\u5668\u662F\u7528\u955C\u50CF\u521B\u5EFA\u7684\u8FD0\u884C\u5B9E\u4F8B\uFF0C</strong> \u5B83\u53EF\u4EE5\u88AB\u542F\u52A8\u3001\u5F00\u59CB\u3001\u505C\u6B62\u3001\u5220\u9664\uFF0C<strong>\u6BCF\u4E2A\u5BB9\u5668\u90FD\u662F\u76F8\u4E92\u9694\u79BB</strong>\uFF1B\u53EF\u4EE5\u628A\u5BB9\u5668\u770B\u505A\u662F\u4E00\u4E2A\u6781\u7B80\u7248\u7684Linux\u73AF\u5883\u548C\u5728\u5176\u4E2D\u8FD0\u884C\u7A0B\u5E8F\u7684\u7EC4\u5408\uFF1B</p><p><strong>\u5BB9\u5668</strong>\u548C\u955C\u50CF\u51E0\u4E4E\u4E00\u6837\uFF0C\u552F\u4E00\u7684\u533A\u522B\u5C31\u662F<strong>\u955C\u50CF\u5C42\u4E0A\u9762\u52A0\u8F7D\u4E86\u4E00\u4E2A\u53EF\u5199\u5C42</strong>\uFF0C\u8FD9\u5C42\u79F0\u4E3A<strong>\u5BB9\u5668\u5C42</strong>\uFF1B</p><p>\u4EE5\u4E0B\u5BF9\u5BB9\u5668\u7684\u64CD\u4F5C\uFF0C\u53EF\u4EE5\u6307\u5B9A\u5BB9\u5668\u540D\u79F0\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5BB9\u5668ID\uFF0C\u6F14\u793A\u7EDF\u4E00\u7528\u5BB9\u5668ID\uFF0C\u4E0D\u518D\u91CD\u590D\u622A\u56FE\u3002</p><ul><li><p><strong><code>docker run</code></strong>\uFF1A\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\uFF1B\u8BED\u6CD5\u5982\u4E0B\uFF1A<code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code>;</p><p>\u5E38\u7528\u9009\u9879\u53C2\u6570\u8BF4\u660E\uFF0C\u5982\u4E0B\uFF1A</p><p><strong>--name=&quot;\u5BB9\u5668\u540D&quot;</strong> : \u4E3A\u5BB9\u5668\u6307\u5B9A\u4E00\u4E2A\u540D\u79F0\uFF1B</p><p><strong>-d</strong>: \u540E\u53F0\u8FD0\u884C\u5BB9\u5668\uFF0C\u5E76\u8FD4\u56DE\u5BB9\u5668ID\uFF1B</p><p><strong>-i</strong>: \u4EE5\u4EA4\u4E92\u6A21\u5F0F\u8FD0\u884C\u5BB9\u5668\uFF0C\u4E00\u822C\u548C -t \u540C\u65F6\u4F7F\u7528\uFF1B</p><p><strong>-t</strong>: \u4E3A\u5BB9\u5668\u91CD\u65B0\u5206\u914D\u4E00\u4E2A\u4F2A\u8F93\u5165\u7EC8\u7AEF\uFF0C\u4E00\u822C\u548C -i \u540C\u65F6\u4F7F\u7528\uFF1B</p><p><strong>-P</strong>: \u968F\u673A\u7AEF\u53E3\u6620\u5C04\uFF0C\u5BB9\u5668\u5185\u90E8\u7AEF\u53E3<strong>\u968F\u673A</strong>\u6620\u5C04\u5230\u4E3B\u673A\u7684\u7AEF\u53E3</p><p><strong>-p</strong>: \u6307\u5B9A\u7AEF\u53E3\u6620\u5C04\uFF0C\u683C\u5F0F\u4E3A\uFF1A<strong>\u4E3B\u673A\u7AEF\u53E3:\u5BB9\u5668\u7AEF\u53E3</strong></p><p>\u6F14\u793A\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350825.webp" alt="\u56FE\u7247"></p><p>\u4E0A\u56FE\u53EF\u4EE5\u770B\u5230\u7EC8\u7AEF\u963B\u585E\u4E86\uFF0C<strong>\u8FD9\u79CD\u6A21\u5F0F\u79F0\u4E3Aattached\u9ED8\u8BA4\uFF0C\u5373\u524D\u53F0\u8FD0\u884C\uFF0C\u4E0E\u4E4B\u5BF9\u5E94\u7684\u662Fdetached\u6A21\u5F0F\uFF0C\u53CA\u540E\u53F0\u8FD0\u884C</strong>\uFF0C\u63A5\u4E0B\u6765\u4F1A\u6F14\u793A\u3002\u7531\u4E8E\u7EC8\u7AEF\u963B\u585E\uFF0C\u8FD9\u91CC\u53E6\u5F00\u4E00\u4E2A\u7EC8\u7AEF\u6267\u884C<code>docker ps</code>\u547D\u4EE4\u770B\u8FD0\u884C\u7684\u5BB9\u5668\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350553.webp" alt="\u56FE\u7247"></p><p><strong>\u524D\u53F0\u8FD0\u884C\u6A21\u5F0F\u7EC8\u7AEF\u5F88\u5BB9\u6613\u88AB\u5173\u95ED\uFF0C\u542F\u52A8\u7684nginx\u5BB9\u5668\u4E5F\u4F1A\u505C\u6389</strong>\uFF0C\u8FD9\u79CD\u60C5\u51B5\u5BF9\u4E8E\u5F88\u591A\u573A\u666F\u662F\u4E0D\u5141\u8BB8\u7684\uFF0C\u6240\u4EE5\u53EF\u4EE5\u6307\u5B9A\u4E3A\u540E\u53F0\u6A21\u5F0F\u8FD0\u884C\uFF0C\u5373detached\u6A21\u5F0F\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350059.webp" alt="\u56FE\u7247"></p><p>\u73B0\u5728\u53EA\u662F\u5728\u5BB9\u5668\u5185\u542F\u52A8\u4E86\u4E00\u4E2Anginx\uFF0C\u5E76\u76D1\u542C80\u7AEF\u53E3\uFF0C\u5982\u679C\u9700\u8981\u901A\u8FC7\u4E3B\u673A\u80FD\u8BBF\u95EE\u5230\u5BB9\u5668\u91CC\u9762\u7684nginx\uFF0C\u8FD8\u9700\u8FDB\u884C\u7AEF\u53E3\u6620\u5C04\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350203.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u91CC\u542F\u52A8\u4E86\u4E24\u4E2Anginx\u5BB9\u5668\uFF0C\u90FD\u662F\u76D1\u542C80\u7AEF\u53E3\uFF0C\u4F46\u5E76\u6CA1\u6709\u62A5\u7AEF\u53E3\u88AB\u5360\u7528\u7684\u9519\uFF0C\u6240\u4EE5\u5BB9\u5668\u4E4B\u95F4\u662F\u4E92\u4E0D\u5F71\u54CD\u7684\u3002\u901A\u8FC7**-p**\u9009\u9879\u8FDB\u884C\u7AEF\u53E3\u6620\u5C04\uFF0C\u8FD9\u4E0B\u5C31\u53EF\u4EE5\u901A\u8FC7\u4E3B\u673A\u76849999\u7AEF\u53E3\u8BBF\u95EE\u5230\u5BB9\u5668\u5185\u90E8\u768480\u7AEF\u53E3\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350729.webp" alt="\u56FE\u7247"></p><p>\u65E2\u7136\u521A\u5F00\u59CB\u8BF4\u53EF\u4EE5\u5C06\u5BB9\u5668\u7406\u89E3\u4E3A\u7B80\u6613\u7248\u7684Linux\uFF0C\u90A3\u5C31\u5E94\u8BE5\u53EF\u4EE5\u8FDB\u5165\u5BB9\u5668\u5185\u90E8\u64CD\u4F5C\u4E00\u628A\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350452.webp" alt="\u56FE\u7247"></p><p>\u5728\u5BB9\u5668\u91CC\u9762\u53EA\u80FD\u6267\u884C\u4E00\u4E9B\u6838\u5FC3\u7684\u547D\u4EE4\uFF0C\u56E0\u4E3A\u662F\u6781\u7B80\u7248\uFF0C\u6240\u4EE5\u5185\u90E8\u53EA\u5305\u542B\u91CD\u8981\u7684\u529F\u80FD\uFF0C\u5982\u679C\u9700\u8981\u5176\u4ED6\u529F\u80FD\u53EF\u4EE5\u81EA\u5DF1\u5B89\u88C5\u6269\u5C55\u3002</p><p><strong>\u9000\u51FA\u5BB9\u5668\u7684\u4E24\u79CD\u65B9\u5F0F\uFF1A</strong></p><p>a\u3001\u5BB9\u5668\u4E2D\u6267\u884C<strong>exit</strong>\u547D\u4EE4\uFF0C\u5BB9\u5668\u505C\u6B62\u5E76\u9000\u51FA\uFF0C\u56DE\u5230\u4E3B\u673A\uFF1B</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350090.webp" alt="\u56FE\u7247"></p><p>b\u3001\u5229\u7528\u7EC4\u5408\u952E<strong>ctrl+p+q</strong>\uFF0C\u5BB9\u5668\u4E0D\u505C\u6B62\u9000\u51FA\uFF0C\u56DE\u5230\u4E3B\u673A\uFF1B</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142350887.webp" alt="\u56FE\u7247"></p></li><li><p><strong><code>docker ps [OPTIONS]</code></strong> \uFF1A\u663E\u793A\u4E3B\u673A\u4E2D\u7684\u5BB9\u5668\uFF0C\u4E0D\u52A0\u9009\u9879<strong>\u9ED8\u8BA4\u53EA\u5217\u51FA\u8FD0\u884C\u4E2D\u7684\u5BB9\u5668</strong>\uFF1B</p><p><strong>-a :</strong> \u663E\u793A\u6240\u6709\u7684\u5BB9\u5668\uFF0C\u5305\u62EC\u672A\u8FD0\u884C\u7684\uFF1B</p><p><strong>-n :</strong> \u5217\u51FA\u6700\u8FD1\u521B\u5EFA\u7684n\u4E2A\u5BB9\u5668\uFF1B</p><p>\u6F14\u793A\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351041.webp" alt="\u56FE\u7247"></p></li><li><p>\u542F\u52A8\u548C\u505C\u6B62\u5BB9\u5668\u7684\u547D\u4EE4\uFF1B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker start \u5BB9\u5668id  # \u542F\u52A8\u88AB\u505C\u6B62\u7684\u5BB9\u5668
docker stop \u5BB9\u5668id  # \u505C\u6B62\u8FD0\u884C\u4E2D\u7684\u5BB9\u5668
docker restart \u5BB9\u5668id # \u91CD\u542F\u5BB9\u5668
docker kill \u5BB9\u5668id  # \u5F3A\u5236\u505C\u6B62\u5BB9\u5668
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**<code>docker stop</code>**\u505C\u6B62\u5BB9\u5668\uFF0C\u540E\u9762\u53EF\u4EE5\u8DDF\u4E00\u4E2A\u6216\u591A\u4E2A\u5BB9\u5668ID\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351132.webp" alt="\u56FE\u7247"></p><p><strong><code>docker start</code></strong>\uFF1A\u542F\u52A8\u88AB\u505C\u6B62\u7684\u5BB9\u5668\uFF0C\u540E\u9762\u53EF\u4EE5\u8DDF\u4E00\u4E2A\u6216\u591A\u4E2A\u5BB9\u5668ID\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351343.webp" alt="\u56FE\u7247"></p><p>**<code>docker restart</code><strong>\u91CD\u542F\u547D\u4EE4\u548C</strong><code>docker kill</code>**\u5F3A\u5236\u505C\u6B62\u547D\u4EE4\u5C31\u4E0D\u622A\u56FE\u5566</p></li><li><p>**<code>docker exec</code>\u548C<code>docker attach</code>**\u4E24\u79CD\u65B9\u5F0F\u8FDB\u5165\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668\u3002</p><p>\u5F88\u591A\u573A\u666F\u5BB9\u5668\u90FD\u662F\u540E\u53F0\u8FD0\u884C\uFF0C\u4F46\u6709\u65F6\u9700\u8981\u8FDB\u5165\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u76F8\u5173\u914D\u7F6E\u7684\u66F4\u6539\u3002</p><p><strong><code>docker exec</code></strong>\uFF1A\u8FDB\u5165\u5BB9\u5668\u540E\u5F00\u542F\u4E00\u4E2A\u65B0\u7684\u7EC8\u7AEF\uFF0C\u6B63\u5E38\u6267\u884CLinux\u76F8\u5173\u547D\u4EE4\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351161.webp" alt="\u56FE\u7247"></p><p><strong><code>docker attach</code></strong>\uFF1A\u8FDB\u5165\u5BB9\u5668\u6B63\u5728\u6267\u884C\u7684\u7EC8\u7AEF\uFF0C\u4E0D\u4F1A\u542F\u52A8\u65B0\u7684\u8FDB\u7A0B\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351590.webp" alt="\u56FE\u7247"></p><p>\u9000\u51FA\u5BB9\u5668\u6A21\u5F0F\uFF1A</p><p><strong>\u5BB9\u5668\u4E2D\u6267\u884Cexit\u547D\u4EE4\uFF0C\u5BB9\u5668\u505C\u6B62\u5E76\u9000\u51FA;</strong></p><p><strong>\u5229\u7528\u7EC4\u5408\u952Ectrl+p+q\uFF0C\u5BB9\u5668\u4E0D\u505C\u6B62\u9000\u51FA;</strong></p></li><li><p><strong><code>docker logs [OPTIONS] \u5BB9\u5668ID</code></strong>\uFF1A\u67E5\u770B\u6307\u5B9A\u5BB9\u5668\u7684\u65E5\u5FD7\uFF1B</p><p>\u5E38\u7528OPTIONS\u5982\u4E0B\uFF1A</p><p><strong>-f</strong> :\u8DDF\u8E2A\u65E5\u5FD7\u8F93\u51FA</p><p><strong>--since</strong> :\u663E\u793A\u6307\u5B9A\u5F00\u59CB\u65F6\u95F4\u4E4B\u540E\u6240\u6709\u65E5\u5FD7</p><p><strong>-t</strong> : \u663E\u793A\u65F6\u95F4\u6233</p><p><strong>--tail</strong> :\u5217\u51FA\u6700\u65B0N\u6761\u5BB9\u5668\u65E5\u5FD7</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351326.webp" alt="\u56FE\u7247"></p><p>\u53EF\u4EE5\u6307\u5B9A\u9009\u9879\uFF0C\u67E5\u770B\u9700\u8981\u7684\u65E5\u5FD7\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351153.webp" alt="\u56FE\u7247"></p></li><li><p><strong><code>docker top \u5BB9\u5668ID</code></strong>\uFF1A\u5217\u51FA\u6307\u5B9A\u5BB9\u5668\u5185\u90E8\u7684\u8FDB\u7A0B\uFF0C\u53EF\u4EE5\u770B\u5230\u5BB9\u5668\u5185\u7684\u5E94\u7528\u8FDB\u7A0B\u662F\u5426\u6B63\u5E38\u8FD0\u884C\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351224.webp" alt="\u56FE\u7247"></p></li><li><p><strong><code>docker inspect \u5BB9\u5668ID</code></strong>\uFF1A\u67E5\u770B\u6307\u5B9A\u5BB9\u5668\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u6BD4\u5982\u8FD0\u884C\u72B6\u6001\u3001\u7F51\u7EDC\u914D\u7F6E\u3001\u6302\u8F7D\u7684\u5377\u7B49\u4FE1\u606F\u90FD\u6709\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351638.webp" alt="\u56FE\u7247"></p></li><li><p><strong><code>docker commit</code>\uFF1A\u6839\u636E\u5BB9\u5668\u751F\u6210\u4E00\u4E2A\u65B0\u7684\u955C\u50CF</strong>\uFF1B\u5BB9\u5668\u662F\u53EF\u7F16\u8F91\u7684\uFF0C\u6709\u4E9B\u65F6\u5019\u9700\u8981\u5C06\u5DF2\u66F4\u6539\u7684\u5BB9\u5668\u751F\u6210\u4E00\u4E2A\u65B0\u7684\u955C\u50CF\u7ED9\u5176\u4ED6\u4EBA\u7528\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142351917.webp" alt="\u56FE\u7247"></p><p>\u547D\u4EE4\u8BF4\u660E\uFF1A</p><p><strong>-a</strong> :\u63D0\u4EA4\u7684\u955C\u50CF\u4F5C\u8005\uFF1B</p><p><strong>-m</strong> :\u63D0\u4EA4\u65F6\u7684\u8BF4\u660E\u6587\u5B57\uFF1B</p><p>\u547D\u4EE4\u4E2D<strong>testcommitimage:v1</strong>\u662F\u81EA\u5B9A\u4E49\u7684\u955C\u50CF\u540D\u548Ctag\uFF1B</p><p>\u6839\u636E\u65B0\u751F\u6210\u7684\u955C\u50CF\u542F\u52A8\u5BB9\u5668\uFF0C\u5219\u5185\u90E8\u5C31\u4F1A\u6709\u521B\u5EFA\u7684\u5BF9\u5E94\u6587\u4EF6(\u5BB9\u5668\u5185\u90E8\u53EF\u4EE5\u6839\u636E\u9700\u8981\u4EFB\u610F\u6539\uFF0C\u8FD9\u91CC\u53EA\u662F\u6F14\u793A\u521B\u5EFA\u6587\u4EF6\u800C\u5DF2)\u3002</p></li><li><p>**<code>docker export</code>\u548C<code>docker import</code>**\u5C06\u5BB9\u5668\u65B9\u4FBF\u79BB\u7EBF\u5BFC\u51FA\u548C\u5BFC\u5165\uFF1B</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352257.webp" alt="\u56FE\u7247"></p><p>\u547D\u4EE4\u8BF4\u660E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#\u5C06\u5BB9\u5668\u5BFC\u51FA\u4E3Atar\u6587\u4EF6
docker export -o testexport.tar 030aa6fcd7f3
# -o \u6307\u5B9A\u8F93\u51FA\u4F4D\u7F6E\u548C\u6587\u4EF6\u540D
# 030aa6fcd7f3 \u8FD9\u4E2A\u662F\u5BB9\u5668ID

#\u6839\u636E\u751F\u6210\u7684tar\u6587\u4EF6\u5BFC\u5165\u4E3A\u955C\u50CF
docker import testexport.tar testexportimagename:v2
# \u6307\u5B9A\u5BF9\u5E94\u7684tar\u6587\u4EF6
# testexportimagename:v2 \u955C\u50CF\u540D\u548C\u7248\u672C, \u53EF\u4EE5\u81EA\u5DF1\u5B9A\u4E49
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u5BF9\u547D\u4EE4\u662F\u4E0D\u662F\u548C\u955C\u50CF\u7684<code>docker save</code>\u3001<code>docker load</code>\u8FD9\u5BF9\u547D\u4EE4\u7528\u6CD5\u5F88\u76F8\u4F3C\uFF0C\u4F46\u4E24\u79CD\u65B9\u5F0F\u4E0D\u80FD\u6DF7\u7528\uFF0C\u56E0\u4E3Aexport\u5BFC\u51FA\u7684\u4EC5\u4EC5\u662F\u5BB9\u5668\u5FEB\u7167\uFF0Csave\u4FDD\u5B58\u7684\u662F\u5B8C\u6574\u7684\u955C\u50CF\u6587\u4EF6\u3002</p></li><li><p><strong><code>docker rm \u5BB9\u5668ID</code></strong>\uFF1A\u5220\u9664\u6307\u5B9A\u5BB9\u5668\uFF0C\u8FD0\u884C\u4E2D\u7684\u5BB9\u5668\u9ED8\u8BA4\u4E0D\u8BA9\u5220\u9664\uFF0C\u53EF\u4EE5\u589E\u52A0**-f\u9009\u9879**\u5F3A\u5236\u5220\u9664\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352768.webp" alt="\u56FE\u7247"></p></li></ul><p>\u4EE5\u4E0A\u53EA\u662F\u603B\u7ED3\u4E86\u5E73\u65F6\u6BD4\u8F83\u5E38\u7528\u7684\u547D\u4EE4\uFF0C\u5E76\u6CA1\u6709\u5168\u90E8\u5217\u51FA\uFF0C\u66F4\u591A\u7EC6\u8282\u53EF\u4EE5\u8FDB\u5165\u5B98\u7F51\uFF1Ahttps://docs.docker.com/engine/reference/commandline/rm/\uFF1B</p><h1 id="_5-\u6570\u636E\u5377" tabindex="-1"><a class="header-anchor" href="#_5-\u6570\u636E\u5377" aria-hidden="true">#</a> 5. \u6570\u636E\u5377</h1><p>\u5E38\u7528\u547D\u4EE4\u6F14\u793A\u4E86\u4E00\u904D\uFF0C\u5176\u4E2D\u4E5F\u63D0\u5230\u5BB9\u5668\u7684\u9694\u79BB\u6027\uFF0C<strong>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5BB9\u5668\u5185\u5E94\u7528\u4EA7\u751F\u7684\u6570\u636E\u90FD\u662F\u7531\u5BB9\u5668\u672C\u8EAB\u72EC\u6709\uFF0C\u5982\u679C\u5BB9\u5668\u88AB\u5220\u9664\uFF0C\u5BF9\u5E94\u7684\u6570\u636E\u6587\u4EF6\u5C31\u4F1A\u8DDF\u7740\u6D88\u5931</strong>\u3002\u4ECE\u9694\u79BB\u6027\u7684\u89D2\u5EA6\u6765\u770B\uFF0C\u6570\u636E\u5C31\u5E94\u8BE5\u548C\u5BB9\u5668\u5171\u5B58\u4EA1\uFF1B\u4F46\u5728\u5B9E\u9645\u7528\u573A\u666F\u4E2D\uFF0C\u66F4\u591A\u9700\u8981\u5C06\u6570\u636E\u6301\u4E45\u5316\uFF0C\u5373\u5BB9\u5668\u88AB\u5220\u9664\uFF0C\u6570\u636E\u4E5F\u5E94\u8BE5\u6B63\u5E38\u5B58\u5728\uFF1B\u53E6\u5916\u4E5F\u6709\u5F88\u591A\u573A\u666F\u9700\u8981\u5BB9\u5668\u4E4B\u95F4\u5171\u4EAB\u6570\u636E\uFF0C\u90A3\u8BE5\u600E\u4E48\u505A\u5462\uFF0C\u63A5\u4E0B\u6765\u8BF4\u8BF4\u5BB9\u5668\u6570\u636E\u5377\u3002</p><h2 id="_5-1-\u624B\u52A8\u4FDD\u5B58\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_5-1-\u624B\u52A8\u4FDD\u5B58\u6570\u636E" aria-hidden="true">#</a> 5.1 \u624B\u52A8\u4FDD\u5B58\u6570\u636E</h2><p>\u901A\u5E38\u624B\u52A8\u6709\u4E24\u79CD\u65B9\u5F0F\uFF0C\u4E00\u662F\u901A\u8FC7\u547D\u4EE4\u5C31\u884C\u62F7\u8D1D\uFF0C\u4E8C\u662F\u5C06\u5BB9\u5668\u63D0\u4EA4\u4E3A\u955C\u50CF\u3002\u63A5\u4E0B\u6765\u901A\u8FC7\u62C9\u53D6centos\u955C\u50CF\uFF0C\u8FD0\u884C\u6F14\u793A</p>`,47),l=e("p",null,[e("strong",null,"\u901A\u8FC7\u547D\u4EE4\u5F62\u5F0F")],-1),m=e("p",null,"\u4E3B\u673A\u548C\u5BB9\u5668\u4E4B\u95F4\u53EF\u4EE5\u901A\u8FC7\u547D\u4EE4\u8FDB\u884C\u6570\u636E\u62F7\u8D1D\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5728\u5BB9\u5668\u5220\u9664\u4E4B\u524D\u53EF\u4EE5\u5148\u8FDB\u884C\u6570\u636E\u62F7\u8D1D\uFF0C\u5982\u4E0B\uFF1A",-1),g=e("p",null,[e("img",{src:"https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352083.webp",alt:"\u56FE\u7247"})],-1),u=t("\u547D\u4EE4\u7B80\u8FF0\uFF1A"),b=e("code",null,'docker run -it --name="mycentos" centos /bin/bash',-1),h=t("\uFF0C\u76F4\u63A5\u6839\u636E\u955C\u50CFcentos\u4EE5\u4EA4\u4E92\u6A21\u5F0F\u542F\u52A8\u5BB9\u5668\uFF0C\u5BB9\u5668\u540D\u79F0\u4E3Amycentos\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u6267\u884C/bin/bash\u547D\u4EE4\u8FDB\u5165\u5230\u7EC8\u7AEF\uFF1B\u5177\u4F53\u547D\u4EE4\u5728"),v={href:"http://mp.weixin.qq.com/s?__biz=MzU1MzYwMjQ5MQ==&mid=2247485629&idx=1&sn=506fae15e0c583f0a76d5c4145dbf83a&chksm=fbf11469cc869d7fae9c795ecf099a0babb62094fcb5b94b361ca131ae0323f57f46f55e79e3&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},k=t("Docker\u5C0F\u767D\u5230\u5B9E\u6218\u4E4B\u5E38\u7528\u547D\u4EE4\u6F14\u793A\uFF0C\u901A\u4FD7\u6613\u61C2"),x=t("\u8FD9\u7BC7\u6587\u7AE0\u4E2D\u5DF2\u7ECF\u8BE6\u7EC6\u8BF4\u660E\uFF1B\u8FD9\u91CC\u7B80\u5355\u56DE\u987E\u4E00\u4E0B\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\u6D41\u7A0B\uFF0C\u5982\u56FE\uFF1A"),w=r('<p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352158.webp" alt="\u56FE\u7247"></p><p>\u4E0A\u56FE\u7B80\u8FF0\uFF1A<strong>\u5728Docker\u6267\u884C\u542F\u52A8\u547D\u4EE4\u65F6\uFF0C\u4F1A\u5148\u4ECE\u672C\u5730\u67E5\u627E\u955C\u50CF\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u5C31\u4F1A\u53BB\u8FDC\u7A0B\u4ED3\u5E93\u641C\u7D22\u5E76\u62C9\u53D6\u5230\u4E3B\u673A\uFF0C\u7136\u540E\u4E3B\u673A\u5C31\u53EF\u4EE5\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\uFF1B\u5982\u679C\u8FDC\u7A0B\u4ED3\u5E93\u4E5F\u6CA1\u6709\u627E\u5230\u955C\u50CF\uFF0C\u90A3\u4E48\u5C31\u62A5\u9519</strong>\u3002</p><p>\u597D\u4E86\uFF0C\u56DE\u5230\u4ECA\u5929\u7684\u8BDD\u9898\uFF0C\u63A5\u7740\u8BF4\u62F7\u8D1D\u6570\u636E\uFF1B</p><p>\u73B0\u5728\u901A\u8FC7centos\u955C\u50CF\u542F\u52A8\u4E86\u4E00\u4E2A\u5BB9\u5668(Linux\u7CFB\u7EDF)\uFF0C\u5728\u4E0A\u9762\u521B\u5EFA\u4E00\u4E9B\u6587\u4EF6\u8FDB\u884C\u6D4B\u8BD5\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352348.webp" alt="\u56FE\u7247"></p><p>\u73B0\u5728\u5982\u679C\u5C06\u5BB9\u5668\u5220\u9664\uFF0C\u91CC\u9762\u5BF9\u5E94\u7684\u6570\u636E\u4E5F\u4F1A\u5220\u9664\uFF0C\u6240\u4EE5\u9700\u8981\u5C06\u5BF9\u5E94\u7684\u6570\u636E\u62F7\u8D1D\u5230\u4E3B\u673A\u4E0A\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352999.webp" alt="\u56FE\u7247"></p><p><code>docker cp bfb96a6afdbc:/usr/TestData /usr/TestDataHost</code>\u547D\u4EE4\u89E3\u6790:</p>',8),_=r('<li><p>\u8BED\u6CD5\uFF1A<strong>docker cp SRC_PATH DEST_PATH</strong></p></li><li><p><strong>bfb96a6afdbc:/usr/TestData</strong>\u5BF9\u5E94\u7684\u5C31\u662F<strong>SRC_PATH</strong> \uFF0C\u8868\u793A\u6E90\u5934\uFF0C\u5373\u9700\u8981\u62F7\u8D1D\u7684\u76EE\u5F55\u6216\u6587\u4EF6\uFF1B<strong>bfb96a6afdbc</strong>\u8FD9\u662F\u5BB9\u5668ID\uFF0C\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\u9650\u5B9A\u662F\u67D0\u4E2A\u5BB9\u5668\u5185\u7684\u6570\u636E\u6587\u4EF6\uFF1B</p></li><li><p><strong>/usr/TestDataHost</strong>\u5BF9\u5E94\u7684\u5C31\u662F<strong>DEST_PATH</strong>\uFF0C\u8868\u793A\u76EE\u6807\uFF0C\u5373\u62F7\u5230\u4EC0\u4E48\u5730\u65B9\uFF1B</p><p>\u6309\u7167\u4E0A\u9762\u7684\u8BED\u6CD5\u89C4\u5219\uFF0C\u540C\u6837\u53EF\u4EE5\u5C06\u4E3B\u673A\u4E0A\u7684\u6570\u636E\u6587\u4EF6\u62F7\u8D1D\u5230\u6307\u5B9A\u5BB9\u5668\u4E2D\uFF0C\u53EA\u662F\u8C03\u6362\u4E00\u4E0B<strong>SRC_PATH</strong> \u548C<strong>DEST_PATH</strong>\u7684\u4F4D\u7F6E\u5373\u53EF\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352762.webp" alt="\u56FE\u7247"></p></li><li><p><strong>\u5C06\u5BB9\u5668\u63D0\u4EA4\u4E3A\u955C\u50CF\u7684\u65B9\u5F0F</strong></p><p>\u8FD9\u79CD\u65B9\u5F0F\u53EA\u80FD\u52C9\u5F3A\u8BF4\u662F\u4E00\u79CD\u5907\u4EFD\uFF0C\u53EA\u662F<strong>\u901A\u8FC7<code>docker commit</code>\u547D\u4EE4\u5C06\u5BB9\u5668\u63D0\u4EA4\u4E3A\u955C\u50CF\uFF0C\u4ECE\u800C\u8FBE\u5230\u5907\u4EFD\u6570\u636E\u7684\u4F5C\u7528</strong>\uFF1B</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352014.webp" alt="\u56FE\u7247"></p><p>\u4F46\u5F88\u660E\u663E\u80FD\u611F\u89C9\u5230\u4E0D\u7075\u6D3B\uFF0C\u6570\u636E\u8FD8\u662F\u5728\u5BB9\u5668\u5185\u3002\u5173\u4E8E<code>docker commit</code>\u547D\u4EE4\u4E0A\u6B21\u5DF2\u7ECF\u8BF4\u8FC7\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u91CD\u590D\u622A\u56FE\u5566\u3002</p></li>',4),D=r(`<p>\u4EE5\u4E0A\u4E24\u79CD\u65B9\u5F0F\u90FD\u4E0D\u662F\u5F88\u597D\u7684\u9009\u62E9\uFF0C\u9996\u5148\u5728\u65F6\u6548\u4E0A\u4E5F\u4E0D\u80FD\u53CA\u65F6\u5907\u4EFD\uFF0C\u53E6\u5916\u901A\u8FC7\u624B\u52A8\u8FD9\u79CD\u64CD\u4F5C\u5F88\u660E\u663E\u6548\u7387\u4E0D\u9AD8\uFF0C\u8FD8\u5BB9\u6613\u51FA\u9519\uFF1B\u66F4\u91CD\u8981\u7684\u662F\u82E6\u4E86\u5C0F\u4F19\u4F34\u4EEC\uFF0C\u6240\u4EE5\u5FC5\u987B\u628A\u81EA\u52A8\u5B89\u6392\u8D77\u6765\uFF1B\u624B\u52A8\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u6839\u636E\u60C5\u51B5\u5076\u5C14\u7528\u7528\u5C31\u53EF\u4EE5\u5566\u3002</p><h2 id="_5-2-\u5BB9\u5668\u6570\u636E\u5377\u89E3\u653E\u53CC\u624B" tabindex="-1"><a class="header-anchor" href="#_5-2-\u5BB9\u5668\u6570\u636E\u5377\u89E3\u653E\u53CC\u624B" aria-hidden="true">#</a> 5.2 \u5BB9\u5668\u6570\u636E\u5377\u89E3\u653E\u53CC\u624B</h2><h3 id="_5-2-1-\u7B80\u5355\u7406\u89E3\u5BB9\u5668\u6570\u636E\u5377" tabindex="-1"><a class="header-anchor" href="#_5-2-1-\u7B80\u5355\u7406\u89E3\u5BB9\u5668\u6570\u636E\u5377" aria-hidden="true">#</a> 5.2.1 \u7B80\u5355\u7406\u89E3\u5BB9\u5668\u6570\u636E\u5377</h3><p><strong>\u6570\u636E\u5377\u53EF\u4EE5\u7406\u89E3\u4E3A\u76EE\u5F55\u6216\u6587\u4EF6\uFF0C\u8BBE\u8BA1\u76EE\u7684\u5C31\u662F\u4E3A\u4E86\u6570\u636E\u7684\u6301\u4E45\u5316\u548C\u5171\u4EAB</strong>\uFF1B</p><p><strong>\u6302\u8F7D\u6570\u636E\u5377\u7684\u5BB9\u5668\uFF0C\u79F0\u4E3A\u6570\u636E\u5377\u5BB9\u5668</strong>\uFF1B\u6570\u636E\u5377\u5B8C\u5168\u72EC\u7ACB\u4E8E\u5BB9\u5668\u7684\u751F\u5B58\u5468\u671F\uFF0C\u6240\u4EE5\u5BB9\u5668\u5220\u9664\u65F6\uFF0C\u5BF9\u5E94\u6302\u8F7D\u7684\u6570\u636E\u5377\u4E0D\u4F1A\u88AB\u5220\u9664\u3002</p><p><strong>\u901A\u8FC7\u5C06\u5BB9\u5668\u5185\u7684\u76EE\u5F55\u6302\u8F7D\u5230\u4E3B\u673A\u4E0A\u9762\uFF0C\u5C31\u53EF\u4EE5\u8BA9\u6570\u636E\u5B9E\u65F6\u540C\u6B65\uFF0C\u4E0D\u7BA1\u662F\u4E3B\u673A\u6539\u52A8\uFF0C\u8FD8\u662F\u5BB9\u5668\u91CC\u6709\u53D8\u52A8\uFF0C\u90FD\u4F1A\u540C\u6B65\u66F4\u65B0</strong>\u3002</p><h3 id="_5-2-2-\u5B9E\u64CD\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#_5-2-2-\u5B9E\u64CD\u6F14\u793A" aria-hidden="true">#</a> 5.2.2 \u5B9E\u64CD\u6F14\u793A</h3><p>\u8FD9\u91CC\u5148\u7528\u547D\u4EE4\u7684\u65B9\u5F0F\u8FDB\u884C\u6F14\u793A\uFF0C\u5173\u4E8EDockerfile\u4E2D\u7684\u5E94\u7528\u4F1A\u5728\u540E\u7EED\u7684\u7AE0\u8282\u4E2D\u8BF4\u5230\u3002</p><p><code>docker run</code>\u547D\u4EE4\u4E2D**-v**\u7684\u9009\u9879\u5728\u4E0A\u6B21\u6CA1\u8BF4\uFF0C\u5C31\u662F\u6545\u610F\u7559\u5230\u8FD9\u91CC\u5355\u72EC\u5206\u4EAB\uFF1B\u76F4\u63A5\u5728\u542F\u52A8\u5BB9\u5668\u7684\u65F6\u5019\u6302\u8F7D\uFF1B\u8BED\u6CD5\u4E3B\u8981\u6709\u5982\u4E0B\u51E0\u79CD\u65B9\u5F0F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u6307\u5B9A\u5177\u4F53\u7684\u4E3B\u673A\u8DEF\u5F84\u548C\u5BB9\u5668\u5185\u7684\u8DEF\u5F84
docker run -v /\u5BBF\u4E3B\u673A\u8DEF\u5F84:\u5BB9\u5668\u5185\u8DEF\u5F84 \u955C\u50CF\u540D  
# \u6307\u5B9A\u5BB9\u5668\u5185\u7684\u8DEF\u5F84\uFF0Cdocker\u9ED8\u8BA4\u81EA\u52A8\u6307\u5B9A\u4E3B\u673A\u8DEF\u5F84
docker run -v \u5BB9\u5668\u5185\u8DEF\u5F84 \u955C\u50CF\u540D 
# \u6307\u5B9A\u5BB9\u5668\u5185\u7684\u8DEF\u5F84\uFF0C\u5E76\u6307\u5B9A\u4E00\u4E2A\u540D\u5B57\uFF0C\u4E3B\u673A\u8DEF\u5F84docker\u81EA\u52A8\u6307\u5B9A
docker run -v \u5377\u540D:\u5BB9\u5668\u5185\u8DEF\u5F84 \u955C\u50CF\u540D 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>\u533F\u540D\u6302\u8F7D</strong>\uFF1A\u5728\u6302\u8F7D\u65F6\u4E0D\u6307\u5B9A\u540D\u79F0\uFF0C\u4F1A\u81EA\u52A8\u751F\u6210\u4E00\u4E2A\u540D\u79F0</p><p><strong>\u6307\u5B9A\u4E3B\u673A\u76EE\u5F55</strong></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352943.webp" alt="\u56FE\u7247"></p><p>\u547D\u4EE4\u89E3\u6790\u5982\u4E0B\u56FE\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352892.webp" alt="\u56FE\u7247"></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># docker run -it --name=&quot;\u5BB9\u5668\u540D\u79F0&quot; -v \u4E3B\u673A\u7EDD\u5BF9\u8DEF\u5F84:\u5BB9\u5668\u7EDD\u5BF9\u8DEF\u5F84 \u955C\u50CF\u540D\u79F0
docker run -it --name=&quot;TestVolumeCentos&quot; -v /usr/TestDataHost/DataVolumeTest:/usr/TestVolumeData centos
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\u5DF2\u7ECF\u5C06\u5BB9\u5668\u5185\u7684\u76EE\u5F55\u6302\u8F7D\u5230\u4E3B\u673A\u4E0A\uFF0C\u63A5\u4E0B\u6765\u611F\u53D7\u4E00\u4E0B\u6570\u636E\u540C\u6B65\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352276.webp" alt="\u56FE\u7247"></p><p>\u901A\u8FC7\u4E0A\u56FE\u6F14\u793A\u53EF\u4EE5\u770B\u5230\uFF0C<strong>\u4E0D\u7BA1\u662F\u5728\u4E3B\u673A\u8FD8\u662F\u5728\u5BB9\u5668\u4E2D\u4FEE\u6539\u6570\u636E\uFF0C\u90FD\u80FD\u53CA\u65F6\u540C\u6B65\u66F4\u65B0\uFF1B\u5BB9\u5668\u505C\u6B62\u4E4B\u540E\uFF0C\u4E3B\u673A\u66F4\u65B0\u6570\u636E\uFF0C\u5BB9\u5668\u518D\u542F\u52A8\uFF0C\u4FEE\u6539\u7684\u6570\u636E\u4E5F\u4F1A\u540C\u6B65\u5230\u5BB9\u5668\uFF1B\u5BB9\u5668\u5220\u9664\uFF0C\u6302\u8F7D\u7684\u6570\u636E\u4E0D\u4F1A\u88AB\u5220\u9664\uFF0C\u8FD8\u662F\u5728\u4E3B\u673A\u4E2D</strong>\uFF0C\u8FD9\u5C31\u662F\u6211\u4EEC\u60F3\u8981\u7684\u3002</p><p>\u53EF\u4EE5\u901A\u8FC7<code>docker inspect \u5BB9\u5668</code>\u547D\u4EE4\u67E5\u770B\u5BB9\u5668\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u5176\u4E2D\u5C31\u6709\u6302\u8F7D\u5377\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u5982\u4E0B\u90E8\u5206\u622A\u56FE\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352106.webp" alt="\u56FE\u7247"></p><p><strong>\u4E0D\u6307\u5B9A\u4E3B\u673A\u76EE\u5F55</strong></p><p>\u5F88\u591A\u65F6\u5019\uFF0C\u6211\u4EEC\u4E0D\u559C\u6B22\u81EA\u5DF1\u6307\u5B9A\u4E3B\u673A\u76EE\u5F55\uFF0C\u800C\u662F\u7531Docker\u81EA\u52A8\u6307\u5B9A\uFF0C\u6240\u4EE5\u901A\u5E38\u6211\u4EEC\u53EA\u6307\u5B9A\u5BB9\u5668\u5185\u76EE\u5F55\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352274.webp" alt="\u56FE\u7247"></p><p>\u770B\u770BDocker\u6307\u5B9A\u7684\u4E3B\u673A\u8DEF\u5F84\u5728\u54EA\uFF0C\u8FD8\u662F\u901A\u8FC7<code>docker inspect \u5BB9\u5668ID</code>\u67E5\u770B\u8BE6\u60C5\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352103.webp" alt="\u56FE\u7247"></p><p>\u770B\u770B\u521A\u624D\u5728\u5BB9\u5668\u64CD\u4F5C\u7684\u6587\u4EF6\u6570\u636E\u662F\u5426\u540C\u6B65\u8FC7\u6765\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352927.webp" alt="\u56FE\u7247"></p><p>\u9ED8\u8BA4\u60C5\u51B5\uFF0Cdocker\u90FD\u4F1A\u5C06\u6302\u8F7D\u7684\u4E3B\u673A\u76EE\u5F55\u6307\u5B9A\u5230\u5982\u4E0A\u56FE\u7684\u76EE\u5F55\u4E2D\u3002</p><p>\u53EF\u4EE5\u901A\u8FC7<code>docker volume ls</code>\u67E5\u770B\u4E3B\u673A\u6302\u8F7D\u7684\u6570\u636E\u5377\u4FE1\u606F\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352316.webp" alt="\u56FE\u7247"></p><p>\u901A\u8FC7\u4E0A\u56FE\u53EF\u4EE5\u770B\u5230\uFF0C\u540D\u79F0\u4E0D\u76F4\u89C2\uFF0C\u770B\u4E0D\u61C2\uFF0C\u6240\u4EE5\u66F4\u591A\u65F6\u5019\u90FD\u4F1A\u5728\u6302\u8F7D\u7684\u65F6\u5019\u6307\u5B9A\u4E00\u4E2A\u540D\u79F0\uFF0C\u5373\u5177\u540D\u6302\u8F7D\u3002</p></li><li><p><strong>\u5177\u540D\u6302\u8F7D</strong>\uFF1A\u5728\u6302\u8F7D\u65F6\u6307\u5B9A\u4E00\u4E2A\u540D\u79F0\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352967.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u91CC\u9664\u4E86\u6302\u8F7D\u7684\u65F6\u5019\u662F\u6307\u5B9A\u540D\u79F0\u6302\u8F7D\uFF0C\u4E4B\u540E\u7684\u64CD\u4F5C\u548C\u6548\u679C\u90FD\u4E00\u6837\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u91CD\u590D\u622A\u56FE\u4E86\uFF1B\u9700\u8981\u6CE8\u610F\u7684\u662F\u8FD9\u79CD\u65B9\u5F0F\u548C\u6307\u5B9A\u4E3B\u673A\u7684\u547D\u4EE4\u5F88\u50CF\uFF0C\u6307\u5B9A\u8DEF\u5F84\u90A3\u79CD\u5F62\u5F0F\uFF0C\u5192\u53F7\u524D\u9762\u662F\u8DEF\u5F84\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142352693.webp" alt="\u56FE\u7247">image-20210825175448280</p></li></ul><h3 id="_5-2-3-\u5BB9\u5668\u95F4\u4F20\u9012\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#_5-2-3-\u5BB9\u5668\u95F4\u4F20\u9012\u6570\u636E" aria-hidden="true">#</a> 5.2.3 \u5BB9\u5668\u95F4\u4F20\u9012\u6570\u636E</h3><p><strong>\u6570\u636E\u5377\u5176\u5B9E\u8FD8\u53EF\u4EE5\u901A\u8FC7\u5BB9\u5668\u7EE7\u627F\u65B9\u5F0F\u8FDB\u884C\u6302\u8F7D\uFF0C\u4ECE\u800C\u5B9E\u73B0\u5BB9\u5668\u4E4B\u95F4\u7684\u6570\u636E\u5171\u4EAB</strong>\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353481.webp" alt="\u56FE\u7247"></p><p>\u5173\u952E\u547D\u4EE4\u89E3\u6790\uFF1A</p><ul><li><p>\u5148\u542F\u52A8\u4E00\u4E2A\u5177\u540D\u6302\u8F7D\u7684\u5BB9\u5668TestVolumesFromCentos\uFF0C\u5982\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run -it --name=&quot;TestVolumesFromCentos&quot; -v testVolumesFrom:/usr/TestVolumeData centos
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u5728\u542F\u52A8\u53E6\u4E00\u4E2A\u5BB9\u5668TestVolumesFromCentos2\uFF0C\u6302\u8F7D\u5377\u7EE7\u627F\u4E8ETestVolumesFromCentos\uFF0C\u5982\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run -it --name=&quot;TestVolumesFromCentos2&quot; --volumes-from TestVolumesFromCentos centos
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>--volumes-from \u540E\u6307\u5B9A\u7EE7\u627F\u4E8E\u54EA\u4E2A\u5BB9\u5668</strong>\u3002</p></li></ul><p>\u73B0\u5728\u4E0D\u7BA1\u5728\u54EA\u4E2A\u5BB9\u5668\u4E2D\u53D8\u66F4\u6570\u636E\uFF0C\u90FD\u4F1A\u5B9E\u65F6\u540C\u6B65\u5230\u5176\u4ED6\u5BB9\u5668\u4E2D\uFF0C\u4ECE\u800C\u8FBE\u6210\u4E86\u5BB9\u5668\u6570\u636E\u7684\u5171\u4EAB\u548C\u5B9E\u65F6\u540C\u6B65\u3002</p><p>\u901A\u8FC7<code>docker inspect \u5BB9\u5668ID</code>\u770B\u4E24\u4E2A\u5BB9\u5668\u7684\u6302\u8F7D\u8BE6\u60C5\u90FD\u4E00\u6837\uFF0C\u622A\u5176\u4E2D\u4E00\u4E2A\u5BB9\u5668\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353533.webp" alt="\u56FE\u7247"></p><p>\u5176\u5B9E\u5728\u6307\u5B9A\u6302\u8F7D\u7684\u65F6\u5019\u8FD8\u53EF\u4EE5\u9650\u5236\u5BB9\u5668\u7684\u64CD\u4F5C\u6743\u9650\uFF0C\u6BD4\u5982\u5728\u5BB9\u5668\u5185\u7684\u6302\u8F7D\u76EE\u5F55\u4E0B\uFF0C\u53EF\u4EE5\u9650\u5236\u5BB9\u5668\u5185\u53EA\u8BFB\u6216\u53EF\u8BFB\u5199\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353148.webp" alt="\u56FE\u7247"></p><p><strong>ro\uFF1A\u4EE3\u8868\u53EA\u8BFB\uFF1B</strong></p><p><strong>rw\uFF1A\u4EE3\u8868\u8BFB\u5199\uFF1B</strong></p><p>\u597D\u4E86\uFF0C\u5173\u4E8E\u5BB9\u5668\u6570\u636E\u5377\u5C31\u8BF4\u5230\u8FD9\u5427\uFF0C\u662F\u4E0D\u662F\u542C\u8D77\u6765\u540D\u5B57\u9AD8\u5927\u4E0A\uFF0C\u5176\u5B9E\u5C31\u662F\u5BF9\u6587\u4EF6\u6216\u76EE\u5F55\u7684\u64CD\u4F5C\u3002</p><h3 id="_5-2-4-redis\u5B89\u88C5\u5B9E\u6218" tabindex="-1"><a class="header-anchor" href="#_5-2-4-redis\u5B89\u88C5\u5B9E\u6218" aria-hidden="true">#</a> 5.2.4 redis\u5B89\u88C5\u5B9E\u6218</h3><p>\u5173\u4E8ERedis\u5B89\u88C5\u5728Docker\u4E2D\u5F88\u7B80\u5355\uFF0C\u76F4\u63A5\u6267\u884C\u547D\u4EE4\u5373\u53EF\uFF0C\u7531\u4E8E\u4E4B\u524D\u62C9\u53D6\u8FC7redis\u7684\u955C\u50CF\uFF0C\u6240\u4EE5\u5C31\u76F4\u63A5\u542F\u52A8\u5BB9\u5668\u4E86\uFF0C\u5982\u679C\u672C\u5730\u6CA1\u6709\u955C\u50CF\uFF0C\u5C31\u4F1A\u53BB\u8FDC\u7A0B\u4ED3\u5E93\u62C9\u53D6\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353297.webp" alt="\u56FE\u7247"></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353537.webp" alt="\u56FE\u7247"></p><p>\u4E0A\u56FE\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Credis\u7684\u955C\u50CF\u5C06\u5BB9\u5668\u5185\u7684/data\u76EE\u5F55\u6302\u8F7D\u5230\u8FD9\u4E2A\u4E3B\u673A\u4E0A\uFF0C\u800C\u8FD9\u4E2A\u76EE\u5F55\u5C31\u662Fredis\u6570\u636E\u5B58\u653E\u7684\u76EE\u5F55\uFF0C\u8FD9\u6837\u5C31\u8FBE\u5230Redis\u7684\u6301\u4E45\u5316\u3002</p><p>\u5BF9\u4E8ERedis\u800C\u8A00\uFF0C\u5F88\u591A\u65F6\u5019\u9700\u8981\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u603B\u4E0D\u80FD\u6BCF\u6B21\u4FEE\u6539\u90FD\u8981\u5230\u5BB9\u5668\u5185\u66F4\u6539\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u914D\u7F6E\u6587\u4EF6\u653E\u5728\u5DF2\u6302\u8F7D\u7684\u76EE\u5F55\u4E2D\uFF0C\u7136\u540E\u6307\u5B9A\u542F\u52A8\uFF0C\u4E5F\u53EF\u4EE5\u53E6\u5916\u9488\u5BF9\u914D\u7F6E\u6587\u4EF6\u518D\u52A0\u4E00\u4E2A\u6302\u8F7D\uFF0C\u5982\u4E0B\uFF1A</p><p><strong>\u6267\u884C\u547D\u4EE4\u524D\uFF0C\u9700\u8981\u5C06\u914D\u7F6E\u6587\u4EF6\u63D0\u524D\u653E\u5728\u4E3B\u673A\u7684\u8FD9\u4E2A/usr/TestDataHost/redisconf\u76EE\u5F55\u4E2D</strong>\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run -d -v /usr/TestDataHost/redisconf:/usr/local/etc/redis --name myredisconfigtest redis redis-server /usr/local/etc/redis/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u901A\u8FC7<code>docker inspect \u5BB9\u5668</code>\u770B\u770B\u6302\u8F7D\u60C5\u51B5\uFF0C\u5982\u4E0B\uFF1A</p><p>\u901A\u8FC7\u6302\u8F7D\u4E4B\u540E\uFF0C\u5982\u679C\u9700\u8981\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u53EA\u9700\u8981\u5728\u4E3B\u673A\u4E0A\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\u5185\u5BB9\u5373\u53EF\u3002</p><h1 id="_6-dockerfile\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-dockerfile\u89E3\u6790" aria-hidden="true">#</a> 6. Dockerfile\u89E3\u6790</h1><p>\u4F7F\u7528\u7B2C\u4E09\u65B9\u955C\u50CF\u80AF\u5B9A\u4E0D\u662F\u5B66\u4E60Docker\u7684\u6700\u7EC8\u76EE\u7684\uFF0C\u6700\u60F3\u8981\u7684\u8FD8\u662F\u81EA\u5DF1\u6784\u5EFA\u955C\u50CF\uFF1B\u5C06\u81EA\u5DF1\u7684\u7A0B\u5E8F\u3001\u6587\u4EF6\u3001\u73AF\u5883\u7B49\u6784\u5EFA\u6210\u81EA\u5DF1\u60F3\u8981\u7684\u5E94\u7528\u955C\u50CF\uFF0C\u65B9\u4FBF\u540E\u7EED\u90E8\u7F72\u3001\u542F\u52A8\u548C\u7EF4\u62A4\uFF1B\u800CDockerfile\u5C31\u662F\u4E13\u95E8\u505A\u8FD9\u4E2A\u4E8B\u7684\uFF0C\u901A\u8FC7\u7C7B\u4F3C\u7B80\u5355\u7F16\u7801\u7684\u5F62\u5F0F\uFF0C\u6700\u7EC8\u5C31\u53EF\u4EE5\u6784\u5EFA\u51FA\u5C5E\u4E8E\u81EA\u5DF1\u7684\u955C\u50CF\uFF0C\u6240\u4EE5\u5FC5\u987B\u5B66\u8D77\u6765\u3002</p><h2 id="_6-1-dockerfile\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_6-1-dockerfile\u7B80\u4ECB" aria-hidden="true">#</a> 6.1 Dockerfile\u7B80\u4ECB</h2><p>\u5728\u65E5\u5E38\u5F00\u53D1\u8FC7\u7A0B\u4E2D\uFF0C\u9700\u8981\u7F16\u5199\u5BF9\u5E94\u7684\u7A0B\u5E8F\u6587\u4EF6\uFF0C\u6700\u540E\u901A\u8FC7\u7F16\u8BD1\u6253\u5305\u751F\u6210\u5BF9\u5E94\u7684\u53EF\u6267\u884C\u6587\u4EF6\u6216\u662F\u7C7B\u5E93\uFF1B\u8FD9\u91CC\u7684Dockerfile\u6587\u4EF6\u5C31\u597D\u6BD4\u5E73\u65F6\u6211\u4EEC\u7F16\u5199\u7684\u7A0B\u5E8F\u6587\u4EF6\uFF0C\u4F46\u5185\u90E8\u7684\u8BED\u6CD5\u548C\u5173\u952E\u5B57\u5E76\u6CA1\u6709\u7A0B\u5E8F\u90A3\u4E48\u590D\u6742\u548C\u7E41\u591A\uFF0C\u76F8\u5BF9\u6765\u8BF4\u8FD8\u662F\u5F88\u7B80\u5355\u7684\uFF0C\u6700\u540E\u901A\u8FC7<code>docker build</code>\u547D\u4EE4\u5C31\u53EF\u4EE5\u5C06\u5BF9\u5E94\u7684\u7A0B\u5E8F\u3001\u6587\u4EF6\u3001\u73AF\u5883\u7B49\u6784\u5EFA\u6210\u955C\u50CF\u5566\u3002</p><p>\u5728\u7B2C\u4E00\u7BC7\u6587\u7AE0\u6700\u540E\u5C31\u7B80\u5355\u4F7F\u7528\u4E86Dockerfile\u6784\u5EFA\u4E86\u4E00\u4E2A\u955C\u50CF\uFF0C\u8FD9\u91CC\u91CD\u65B0\u8BA4\u8BC6\u4E0B\u8FD9\u4E2ADockerfile\u6587\u4EF6\uFF0C\u5982\u4E0B\u56FE\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353887.webp" alt="\u56FE\u7247"></p><p><strong>Dockerfile\u5C31\u662F\u4E00\u4E2A\u6587\u672C\u6587\u4EF6</strong>\uFF0C\u4F46\u4E0D\u9700\u8981\u6307\u5B9A\u540E\u7F00\u7C7B\u578B\uFF1B\u6587\u4EF6\u5185\u5BB9\u4E2DFROM\u3001WORKDIR\u3001COPY\u7B49\u5C31\u662F\u5173\u952E\u5B57\uFF0C\u6309\u7167\u89C4\u5219\u5199\u597D\u4E4B\u540E\uFF0C\u5C31\u53EF\u4EE5\u5C06\u6307\u5B9A\u7684\u6587\u4EF6\u6784\u5EFA\u4E3A\u955C\u50CF\u5566\u3002</p><p><strong>\u6784\u5EFA\u64CD\u4F5C\u7EDF\u4E00\u7531Docker daemon\u8FDB\u884C\uFF0C\u5B83\u4F1A\u5148\u5BF9\u6587\u4EF6\u5185\u5BB9\u8BED\u6CD5\u8FDB\u884C\u521D\u6B65\u9A8C\u8BC1(\u8BED\u6CD5\u4E0D\u5BF9\u5C31\u4F1A\u8FD4\u56DE\u9519\u8BEF\u4FE1\u606F)\uFF0C\u7136\u540E\u9010\u4E00\u8FD0\u884C\u6307\u4EE4\uFF0C\u6BCF\u6B21\u751F\u6210\u4E00\u4E2A\u65B0\u7684\u955C\u50CF\u5C42\uFF0C\u76F4\u5230\u6267\u884C\u5B8C\u6240\u6709\u6307\u4EE4\uFF0C\u5C31\u6784\u5EFA\u51FA\u6700\u7EC8\u7684\u955C\u50CF\u3002</strong> Dockerfile\u3001\u955C\u50CF\u3001\u5BB9\u5668\u7684\u5173\u7CFB\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353109.webp" alt="\u56FE\u7247"></p><p>\u603B\u7ED3\u4E00\u4E0BDockerfile\u7684\u77E5\u8BC6\u70B9\uFF1B</p><ul><li><strong>\u6784\u5EFA\u65F6\uFF0C\u6307\u4EE4\u4ECE\u4E0A\u5230\u4E0B\u9010\u4E00\u6267\u884C\uFF1B</strong></li><li><strong>\u6BCF\u6761\u6307\u4EE4\u90FD\u4F1A\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u955C\u50CF\u5C42\uFF0C\u6BCF\u4E00\u5C42\u90FD\u662F\u524D\u4E00\u5C42\u53D8\u5316\u7684\u589E\u91CF\uFF1B</strong></li><li><strong>\u4F7F\u7528#\u53F7\u8FDB\u884C\u6CE8\u91CA\uFF1B</strong></li><li><strong>\u5173\u952E\u5B57\u7EA6\u5B9A\u90FD\u662F\u5927\u5199\uFF0C\u540E\u9762\u81F3\u5C11\u8DDF\u4E00\u4E2A\u53C2\u6570\uFF1B</strong></li></ul><h2 id="_6-2-dockerfile\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-dockerfile\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2 Dockerfile\u5173\u952E\u5B57</h2><h3 id="_6-2-1-from-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-1-from-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.1 FROM \u5173\u952E\u5B57</h3><p><strong>\u6307\u5B9A\u57FA\u7840\u955C\u50CF</strong>\uFF0C \u5C31\u662F\u65B0\u955C\u50CF\u662F\u57FA\u4E8E\u54EA\u4E2A\u955C\u50CF\u6784\u5EFA\u7684\u3002</p><p>\u6BD4\u5982\u5EFA\u623F\u5B50\uFF0C\u53EF\u4EE5\u5728\u4E00\u5757\u7A7A\u5730\u5F00\u59CB\uFF0C\u4E5F\u53EF\u4EE5\u5728\u522B\u4EBA\u6253\u597D\u7684\u57FA\u77F3\u57FA\u7840\u4E0A\u5F00\u59CB\uFF0C \u751A\u81F3\u53EF\u4EE5\u5728\u522B\u4EBA\u5F04\u597D\u7684\u6BDB\u576F\u623F\u57FA\u7840\u4E0A\u88C5\u4FEE\u5373\u53EF\u3002</p><p>\u5982\u679C\u8981\u5EFA\u623F\u7684\u8BDD\uFF0C\u53EF\u4EE5FROM \u7A7A\u5730\uFF0C\u6216\u8005FROM \u6253\u597D\u7684\u57FA\u77F3\uFF0C\u6216\u8005 FROM \u6BDB\u576F\u623F\uFF0C \u53CD\u6B63\u6700\u540E\u5EFA\u597D\u623F\u5C31\u884C\uFF1B</p><p>\u8FD9\u91CC\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u4E0D\u7BA1\u548B\u6837\uFF0C\u7A7A\u5730\u662F\u5C11\u4E0D\u4E86\u7684\uFF1B<strong>\u6784\u5EFA\u955C\u50CF\u4E5F\u4E00\u6837\uFF0C\u6700\u5E95\u5C42\u80AF\u5B9A\u6709\u4E00\u4E2A\u6700\u57FA\u7840\u7684\u955C\u50CF</strong>\u3002</p><p>\u5EFA\u8BAE\u4F7F\u7528\u5B98\u65B9\u7684\u955C\u50CF\u4F5C\u4E3A\u57FA\u7840\u955C\u50CF\uFF0C\u63A8\u8350\u4F7F\u7528Alpine\u8FD9\u79CD\u7C7B\u578B\uFF0C\u56E0\u4E3A\u5B83\u662F\u4E25\u683C\u63A7\u5236\u7684\uFF0C\u800C\u4E14\u4F53\u79EF\u5F88\u5C0F\u3002</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # FROM [--platform=&lt;platform&gt;] &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]
 ARG  CODE_VERSION=latest # \u5B9A\u4E49\u53D8\u91CF
 FROM base:\${CODE_VERSION} # \u6307\u5B9A\u57FA\u7840\u955C\u50CF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-2-maintainer-label-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-2-maintainer-label-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.2 MAINTAINER/LABEL \u5173\u952E\u5B57</h3><p><strong>MAINTAINER \u6307\u5B9A\u7EF4\u62A4\u8005\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u4E5F\u5C31\u662F\u6784\u5EFA\u7684\u955C\u50CF\u662F\u7531\u8C01\u6784\u5EFA\u7684\uFF0C\u4ED6\u7684\u90AE\u7BB1\u662F\u4EC0\u4E48</strong>\uFF1B</p><p><strong>LABLE \u5C31\u662F\u7528\u4E8E\u7ED9\u955C\u50CF\u6253\u6807\u7B7E\uFF0C\u4EE5\u952E\u503C\u5BF9\u7684\u65B9\u5F0F\u8FDB\u884C\u6307\u5B9A</strong>\uFF0C\u76F8\u5BF9MAINTAINER \u6765\u8BF4\u6BD4\u8F83\u7075\u6D3B\uFF0C\u53EF\u4EE5\u4F7F\u7528LABLE\u66FF\u4EE3MAINTAINER\u3002</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...
 LABEL com.example.version=&quot;0.0.1-beta&quot; 
 LABEL vendor1=&quot;ACME Incorporated&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-3-run-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-3-run-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.3 RUN \u5173\u952E\u5B57</h3><p><strong>\u6784\u5EFA\u8FC7\u7A0B\u4E2D\u9700\u8981\u8FD0\u884C\u7684\u547D\u4EE4</strong>\uFF0C \u6BD4\u5982\u5728\u6784\u5EFA\u8FC7\u7A0B\u4E2D\u9700\u8981\u6267\u884C\u4E00\u6761\u547D\u4EE4\u4E0B\u8F7D\u5BF9\u5E94\u7684\u5305\uFF0C\u8FD9\u91CC\u5C31\u9700\u8981\u7528\u5230RUN\u5173\u952E\u5B57\uFF1B</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u4E24\u79CD\u547D\u4EE4\u65B9\u5F0F\u90FD\u53EF\u4EE5
 # RUN &lt;command&gt;
 # RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]
 # \u6267\u884C\u547D\u4EE4,Linux\u652F\u6301\u7684\u76F8\u5173\u547D\u4EE4
 RUN /bin/bash -c &#39;source $HOME/.bashrc; echo $HOME&#39;
 RUN [&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;echo hello&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-4-workdir-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-4-workdir-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.4 WORKDIR \u5173\u952E\u5B57</h3><p>\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\u65F6\uFF0C\u901A\u5E38\u9700\u8981\u8FDB\u5165\u5230\u5BB9\u5668\u5185\u90E8\uFF1B<strong>\u5219\u53EF\u4EE5\u901A\u8FC7WORKDIR\u6307\u5B9A\u8FDB\u5165\u5BB9\u5668\u65F6\u7684\u76EE\u5F55</strong>\uFF1B</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> WORKDIR /path # \u6307\u5B9A\u8DEF\u5F84
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_6-2-5-env-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-5-env-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.5 ENV \u5173\u952E\u5B57</h3><p>\u53EF\u4EE5\u5728\u6784\u5EFA\u8FC7\u7A0B\u4E2D\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\uFF1B\u5C31\u597D\u6BD4\u5E73\u65F6\u6211\u4EEC\u5B89\u88C5\u5B8C\u7A0B\u5E8F\uFF0C\u9700\u8981\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u65B9\u4FBF\u8BBF\u95EE\uFF1BENV\u5173\u952E\u5B57\u5C31\u662F\u6839\u636E\u9700\u6C42\u53EF\u4EE5\u8BBE\u7F6E\u5BF9\u5E94\u7684\u73AF\u5883\u53D8\u91CF\uFF1B</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # ENV &lt;key&gt;=&lt;value&gt; ...
 # \u6307\u5B9A\u73AF\u5883\u53D8\u91CF
 ENV PATH=/usr/local/postgres-$PG_MAJOR/bin:$PATH
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-6-add-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-6-add-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.6 ADD \u5173\u952E\u5B57</h3><p><strong>\u5C06\u5BBF\u4E3B\u673A\u7684\u8D44\u6E90\u62F7\u8D1D\u8FDB\u955C\u50CF\u4E2D\uFF0C\u4F1A\u81EA\u52A8\u89E3\u538B\u7F29\uFF0C\u800C\u4E14\u8FD8\u80FD\u4ECE\u8FDC\u7A0B\u5BBF\u4E3B\u673A\u4E2D\u8BFB\u53D6\u8D44\u6E90\u5E76\u62F7\u8D1D\u5230\u955C\u50CF\u4E2D</strong>\uFF1B</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u4E24\u79CD\u547D\u4EE4\u65B9\u5F0F\u90FD\u53EF\u4EE5
 # ADD [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;
 # ADD [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;]
 ADD https://example.com/big.tar.xz /usr/src/things/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-7-copy-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-7-copy-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.7 COPY \u5173\u952E\u5B57</h3><p><strong>\u5C06\u5BBF\u4E3B\u673A\u7684\u8D44\u6E90\u62F7\u8D1D\u5230\u955C\u50CF\u4E2D\uFF0C\u53EA\u652F\u6301\u8BFB\u53D6\u6784\u5EFA\u6240\u5728\u5BBF\u4E3B\u673A\u7684\u8D44\u6E90</strong>\u3002\u76F8\u5BF9\u4E8EADD\u5173\u952E\u5B57\u6765\u8BF4\u66F4\u52A0\u900F\u660E\uFF0C\u64CD\u4F5C\u4EC0\u4E48\u5C31\u662F\u4EC0\u4E48\u3002</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u62F7\u8D1D\u8D44\u6E90\u5230\u5BB9\u5668\uFF0C\u4E24\u79CD\u547D\u4EE4\u683C\u5F0F\u90FD\u884C
 # COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;\u6E90\u5730\u5740&gt;... &lt;\u76EE\u6807\u5730\u5740&gt;
 # COPY [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;\u6E90\u5730\u5740&gt;&quot;,... &quot;&lt;\u76EE\u6807\u5730\u5740&gt;&quot;]
 COPY requirements.txt /tmp/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-8-volume-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-8-volume-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.8 VOLUME \u5173\u952E\u5B57</h3><p>\u6302\u8F7D\u6570\u636E\u5377\uFF0C\u4E4B\u524D\u5728\u5E38\u7528\u547D\u4EE4\u90A3\u8BF4\u5230\u901A\u8FC7\u547D\u4EE4\u7684\u65B9\u5F0F\u8FDB\u884C\u6570\u636E\u5377\u6302\u8F7D\uFF0C\u5728Dockerfile\u4E2D\u4F7F\u7528<strong>VOLUME</strong>\u6307\u5B9A\u6302\u8F7D\u8DEF\u5F84\u5373\u53EF\uFF0C\u6839\u636E\u6784\u5EFA\u51FA\u6765\u7684\u955C\u50CF\u8FD0\u884C\u5BB9\u5668\u65F6\uFF0C\u9ED8\u8BA4\u5C31\u6709\u6784\u5EFA\u65F6\u6302\u8F7D\u7684\u4FE1\u606F\u3002</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u6302\u8F7D\u6570\u636E\u5377
 VOLUME [&quot;/data&quot;]
 VOLUME /myvol
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-9-expose-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-9-expose-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.9 EXPOSE \u5173\u952E\u5B57</h3><p>\u6307\u5B9A\u8FD0\u884C\u5BB9\u5668\u65F6\u5BF9\u5916\u66B4\u9732\u7684\u7AEF\u53E3\uFF1B\u5373\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\u65F6\uFF0C\u5BB9\u5668\u5411\u5916\u66B4\u9732\u7AEF\u53E3\u3002</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]
 EXPOSE 80/tcp # \u66B4\u9732\u7AEF\u53E3
 EXPOSE 80/udp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-10-cmd-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-10-cmd-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.10 CMD \u5173\u952E\u5B57</h3><p>\u6307\u5B9A\u542F\u52A8\u5BB9\u5668\u65F6\u8981\u6267\u884C\u7684\u547D\u4EE4\uFF0C\u53EA\u6709\u6700\u540E\u4E00\u4E2A\u4F1A\u751F\u6548\uFF1B\u5373\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\u65F6\uFF0C\u5BB9\u5668\u9700\u8981\u6267\u884C\u5565\u547D\u4EE4\u3002</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u4E24\u79CD\u683C\u5F0F\u90FD\u884C
 # CMD [&quot;param1&quot;,&quot;param2&quot;]
 # CMD command param1 param2
 # \u6267\u884C\u547D\u4EE4\u7EDF\u8BA1 \u884C\u6570\u3001\u5B57\u6570\u3001\u5B57\u8282\u6570
 CMD echo &quot;This is a test.&quot; | wc -
 # \u6267\u884Cwc --help\u547D\u4EE4 
 CMD [&quot;/usr/bin/wc&quot;,&quot;--help&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-11-entrypoint-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-11-entrypoint-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.11 ENTRYPOINT \u5173\u952E\u5B57</h3><p>\u6307\u5B9A\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\u65F6\u8981\u6267\u884C\u7684\u547D\u4EE4\uFF0C\u53EF\u4EE5\u8FFD\u52A0\u547D\u4EE4\uFF1B\u6267\u884C\u65F6\u673A\u540CCMD\u3002</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]
 # ENTRYPOINT command param1 param2
 ENTRYPOINT [&quot;top&quot;, &quot;-b&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-12-arg-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-12-arg-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.12 ARG \u5173\u952E\u5B57</h3><p>\u901A\u8FC7ARG\u6307\u4EE4\u5B9A\u4E49\u4E86\u4E00\u4E2A\u53D8\u91CF\uFF1B\u548C\u5199\u4EE3\u7801\u65F6\u5B9A\u4E49\u7684\u53D8\u91CF\u4E00\u6837\uFF0C\u6839\u636E\u9700\u8981\uFF0C\u5B9A\u4E49\u5C31\u884C\u5566\u3002</p><p>\u7528\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # ARG &lt;name&gt;[=&lt;default value&gt;]
 ARG user1=someuser
 ARG buildno=1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-13-onbuild-\u5173\u952E\u5B57" tabindex="-1"><a class="header-anchor" href="#_6-2-13-onbuild-\u5173\u952E\u5B57" aria-hidden="true">#</a> 6.2.13 ONBUILD \u5173\u952E\u5B57</h3><p>\u57FA\u4E8E\u7236\u955C\u50CF\u6784\u5EFA\u65B0\u7684\u955C\u50CF\u65F6\uFF0C\u7236\u955C\u50CF\u7684OBUILD\u4F1A\u88AB\u89E6\u53D1\u3002</p><h2 id="_6-3-\u5B9E\u6218\u6F14\u793A" tabindex="-1"><a class="header-anchor" href="#_6-3-\u5B9E\u6218\u6F14\u793A" aria-hidden="true">#</a> 6.3. \u5B9E\u6218\u6F14\u793A</h2><p>\u8FD9\u91CC\u8FD8\u662F\u4EE5.NetCore\u9879\u76EE\u6784\u5EFA\u955C\u50CF\u4E3A\u4F8B\uFF0C\u5176\u4ED6\u7F16\u7A0B\u8BED\u8A00\u7684\u9879\u76EE\u540C\u7406\uFF1B\u8FD9\u6B21\u54B1\u4EEC\u4E00\u6B65\u4E00\u6B65\u7684\u6765\uFF0C\u641E\u6E05\u695A\u6BCF\u4E2A\u547D\u4EE4\u7684\u4F7F\u7528\u3002</p>`,103),R=t("\u4EE5\u4E0B\u5173\u4E8E\u9879\u76EE\u521B\u5EFA\u548C\u53D1\u5E03\u7684\u5177\u4F53\u7EC6\u8282\u5728\u7B2C\u4E00\u7BC7\u6700\u540E\u5C31\u5206\u4EAB\u4E86\uFF0C\u5C0F\u4F19\u4F34\u53EF\u4EE5"),N={href:"https://mp.weixin.qq.com/s?__biz=MzU1MzYwMjQ5MQ==&mid=2247485538&idx=1&sn=1a264b5b0cb9577ddbc10dbfdf529298&chksm=fbf114b6cc869da08a707988d885f4ce99d4cf3aac57749b6b37fcf407189ae312acb0174077&token=583695816&lang=zh_CN&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},f=t("\u53C2\u8003"),A=t("\uFF0C\u8FD9\u91CC\u4E3B\u8981\u6F14\u793ADockerfile\u5173\u952E\u5B57\u3002"),q=r(`<h3 id="_6-3-1-\u51C6\u5907\u9879\u76EE\u548Cdockerfile\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_6-3-1-\u51C6\u5907\u9879\u76EE\u548Cdockerfile\u6587\u4EF6" aria-hidden="true">#</a> 6.3.1 \u51C6\u5907\u9879\u76EE\u548CDockerfile\u6587\u4EF6</h3><p>\u65B0\u5EFA\u4E00\u4E2A\u9879\u76EE\uFF0C\u5565\u90FD\u4E0D\u9700\u8981\u6539\uFF0C\u5C31\u7528\u9ED8\u8BA4\u7684\u63A5\u53E3\u6F14\u793A\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353126.webp" alt="\u56FE\u7247"></p><p>Dockerfile\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u6307\u5B9A\u57FA\u7840\u955C\u50CF\uFF0C\u5728\u6B64\u57FA\u7840\u4E0A\u6784\u5EFA\u81EA\u5DF1\u7684\u9879\u76EE\u955C\u50CF
 FROM mcr.microsoft.com/dotnet/core/aspnet:3.1
 # \u6307\u5B9A\u81EA\u5DF1\u7684\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u8FDB\u5165\u5BB9\u5668\u65F6\u76EE\u5F55
 WORKDIR /myApp
 # \u5C06\u6784\u5EFA\u4E0A\u4E0B\u6587\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u62F7\u8D1D\u5230\u5BB9\u5668\u7684\u5F53\u524D\u5DE5\u4F5C\u76EE\u5F55\u4E2D\uFF0C\u5373/myApp
 COPY . .
 # \u5BB9\u5668\u5411\u5916\u66B4\u9732\u7AEF\u53E3\uFF0C\u9879\u76EE\u4EE5\u4EC0\u4E48\u7AEF\u53E3\u542F\u52A8\u5C31\u66B4\u9732\u5BF9\u5E94\u7684\u7AEF\u53E3
 EXPOSE 80
 # \u6267\u884C\u547D\u4EE4\uFF0C\u8FD9\u91CC\u9ED8\u8BA4\u662F\u4EE580\u7AEF\u53E3\u542F\u52A8\u7684
 #\u5C31\u7C7B\u4F3C\u4E8E\u5728Linux\u7CFB\u7EDF\u7684\u9879\u76EE\u76EE\u5F55\u4E0B\u6267\u884C dotnet DockerfileDemo.dll \u662F\u4E00\u6837\u7684
 ENTRYPOINT [&quot;dotnet&quot;, &quot;DockerfileDemo.dll&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u8BB0\u5F97\u53F3\u952EDockerfile\uFF0C\u9009\u62E9\u5C5E\u6027\uFF0C\u7136\u540E\u8BBE\u7F6EDockerfile\u4E3A\u59CB\u7EC8\u590D\u5236</strong>\uFF0C\u8FD9\u6837\u540E\u7EED\u66F4\u65B0\u53D8\u52A8\uFF0C\u53D1\u5E03\u65F6\u5C31\u4F1A\u81EA\u52A8\u62F7\u8D1D\u5230\u5BF9\u5E94\u7684\u53D1\u5E03\u76EE\u5F55\u3002</p><h3 id="_6-3-2-\u53D1\u5E03" tabindex="-1"><a class="header-anchor" href="#_6-3-2-\u53D1\u5E03" aria-hidden="true">#</a> 6.3.2 \u53D1\u5E03</h3><p>\u4EE5\u6587\u4EF6\u7684\u5F62\u5F0F\u53D1\u5E03\u9879\u76EE\uFF0C\u5E76\u8FDE\u540CDockerfile\u62F7\u8D1D\u5230\u5B89\u88C5\u597DDocker\u7684\u673A\u5668\u4E0A\u8FDB\u884C\u6784\u5EFA(\u8FD9\u91CC\u8FD8\u662F\u7528\u6211\u7684\u4E91\u670D\u52A1\u5668)\uFF1B</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353000.webp" alt="\u56FE\u7247"></p><p><strong><code>docker build -t myimage:v1.0 .</code>\u89E3\u6790</strong>\uFF1A</p><ul><li><strong>-t</strong>\uFF1A\u6307\u5B9A\u955C\u50CF\u7684\u540D\u5B57\u53CA\u6807\u7B7E\uFF0C\u901A\u5E38 name:tag \u6216\u8005 name \u683C\u5F0F\uFF0Cmyimage\u5C31\u662F\u955C\u50CF\u540D\u5B57\uFF0Cv1.0\u5C31\u662Ftag\uFF1B</li><li><strong>-f</strong> :\u6307\u5B9A\u8981\u4F7F\u7528\u7684Dockerfile\u8DEF\u5F84\uFF0C\u8FD9\u91CC\u7531\u4E8EDockerfile\u5728\u5F53\u524D\u8DEF\u5F84\uFF0C\u6240\u4EE5\u4E0D\u7528\u6307\u5B9A\uFF1B</li><li><strong>\u6700\u540E\u9762\u7684\u70B9</strong>\uFF1A<strong>\u5B98\u65B9\u79F0\u4E3A\u6784\u5EFA\u4E0A\u4E0B\u6587\uFF0C\u70B9\u8868\u793A\u6307\u5B9A\u4E3A\u5F53\u524D\u76EE\u5F55</strong>\u3002\u4F1A\u628A\u6307\u5B9A\u7684\u8FD9\u4E2A\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u53D1\u9001\u7ED9docker daemon\u8FDB\u884C\u6784\u5EFA\uFF0C\u6240\u4EE5\u5343\u4E07\u4E0D\u8981\u6307\u5B9A/(\u659C\u6760\u4EE3\u8868\u6839\u76EE\u5F55\uFF0C\u6709\u5F88\u591A\u6587\u4EF6\u7684)\u3002</li><li>\u5176\u4ED6\u9009\u9879\u53C2\u6570\u5C0F\u4F19\u4F34\u53EF\u4EE5\u6839\u636E\u9700\u8981\u4F7F\u7528\uFF0C\u4EE5\u4E0A\u662F\u6BD4\u8F83\u91CD\u8981\u7684\u3002</li></ul><h3 id="_6-3-3-\u542F\u52A8\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_6-3-3-\u542F\u52A8\u5BB9\u5668" aria-hidden="true">#</a> 6.3.3 \u542F\u52A8\u5BB9\u5668</h3><p>\u6839\u636E\u6784\u5EFA\u51FA\u6765\u7684\u955C\u50CF\u542F\u52A8\u5BB9\u5668\uFF0C\u770BDockerfile\u4E2D\u7684\u547D\u4EE4\u6548\u679C\uFF1B</p><p>\u542F\u52A8\u5BB9\u5668\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353093.webp" alt="\u56FE\u7247"></p><p><strong><code>ENTRYPOINT [&quot;dotnet&quot;, &quot;DockerfileDemo.dll&quot;]</code>\u8FD9\u884C\u4EE3\u7801\u5C31\u7B49\u540C\u4E8E\u7684\u9879\u76EE\u76EE\u5F55\u4E0B\u76F4\u63A5\u6267\u884C dotnet DockerfileDemo.dll\u662F\u4E00\u6837\u7684\uFF0C\u76EE\u7684\u5C31\u662F\u542F\u52A8\u6211\u4EEC\u7684\u9879\u76EE</strong>\u3002</p><p>\u901A\u8FC7<code>docker logs</code>\u53EF\u4EE5\u67E5\u770B\u5BB9\u5668\u5185\u90E8\u7684\u65E5\u5FD7\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353089.webp" alt="\u56FE\u7247"></p><h3 id="_6-3-4-\u8BBE\u7F6Edockerfile" tabindex="-1"><a class="header-anchor" href="#_6-3-4-\u8BBE\u7F6Edockerfile" aria-hidden="true">#</a> 6.3.4 \u8BBE\u7F6EDockerfile</h3><p>\u4E30\u5BCC\u5316Dockefile\u6587\u4EF6\u5185\u5BB9\u5E76\u67E5\u770B\u6784\u5EFA\u4E4B\u540E\u7684\u7EC6\u8282</p><p>\u6587\u4EF6\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u6307\u5B9A\u57FA\u7840\u955C\u50CF\uFF0C\u5728\u6B64\u57FA\u7840\u4E0A\u6784\u5EFA\u81EA\u5DF1\u7684\u9879\u76EE\u955C\u50CF
 FROM mcr.microsoft.com/dotnet/core/aspnet:3.1
 # \u6307\u5B9A\u7EF4\u62A4\u4EBA
 MAINTAINER CodeZYQ&lt;1137533407@qq.com&gt;
 # \u6253\u6807\u7B7E
 LABEL createname=&quot;CodeZYQ&quot;
 # \u6307\u5B9A\u81EA\u5DF1\u7684\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u8FDB\u5165\u5BB9\u5668\u65F6\u76EE\u5F55 app
 WORKDIR /myapp
 # \u5C06\u6784\u5EFA\u4E0A\u4E0B\u6587\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\u62F7\u8D1D\u5230\u5BB9\u5668\u4E2D\u7684\u5DE5\u4F5C\u76EE\u5F55\u4E2D
 COPY . .
 # \u5B9A\u4E49\u53D8\u91CF
 ARG myPort=8080
 # \u4F7F\u7528\u73AF\u5883\u53D8\u91CF\u65B9\u5F0F\u6539\u53D8\u542F\u52A8\u7AEF\u53E3\uFF0C\u62FC\u63A5\u7528\u5230\u4E86\u5B9A\u4E49\u7684\u53D8\u91CF
 ENV ASPNETCORE_URLS=http://+:$myPort
 # \u901A\u8FC7RUN \u6267\u884C\u76F8\u5173\u547D\u4EE4\uFF0C\u6839\u636E\u9700\u8981\u6267\u884C\u76F8\u5173\u547D\u4EE4
 RUN mkdir testDir
 # \u6302\u8F7D\u6570\u636E\u5377\uFF0C\u8FD9\u91CC\u6A21\u62DF\u6302\u8F7D\u65E5\u5FD7\u76EE\u5F55
 VOLUME /Logs
 # \u5BB9\u5668\u5411\u5916\u66B4\u9732\u7AEF\u53E3\uFF0C\u9879\u76EE\u4EE5\u4EC0\u4E48\u7AEF\u53E3\u542F\u52A8\u5C31\u66B4\u9732\u5BF9\u5E94\u7684\u7AEF\u53E3
 EXPOSE $myPort
 # \u6267\u884C\u547D\u4EE4\uFF0C\u8FD9\u91CC\u9ED8\u8BA4\u662F\u4EE580\u7AEF\u53E3\u542F\u52A8\u7684
 # \u5C31\u7C7B\u4F3C\u4E8E\u5728Linux\u7CFB\u7EDF\u7684\u9879\u76EE\u76EE\u5F55\u4E0B\u6267\u884C dotnet DockerfileDemo.dll \u662F\u4E00\u6837\u7684
 ENTRYPOINT [&quot;dotnet&quot;, &quot;DockerfileDemo.dll&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF0C\u6784\u5EFA\u65B0\u7684\u955C\u50CF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u8FD9\u91CC\u6CA1\u6709\u663E\u793A\u6307\u5B9Atag \u9ED8\u8BA4\u5C31latest
 docker build -t newimage .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353154.webp" alt="\u56FE\u7247"></p><p>\u901A\u8FC7<code>docker logs</code>\u770B\u770B\u5BB9\u5668\u65E5\u5FD7\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353565.webp" alt="\u56FE\u7247"></p><p>\u770B\u770B\u6570\u636E\u5377\u6302\u8F7D\u662F\u5426\u6210\u529F\uFF0C\u8FDB\u5165\u5BB9\u5668\uFF0C\u770B\u6839\u76EE\u5F55\u4E0B\u5C31\u4F1A\u591A\u4E86Logs\u76EE\u5F55\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7<code>docker inspect \u5BB9\u5668</code> \u770B\u5BB9\u5668\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353625.webp" alt="\u56FE\u7247"></p><p>\u6807\u7B7E\u4E5F\u6253\u6210\u529F\u4E86\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353871.webp" alt="\u56FE\u7247"></p><p>\u4E5F\u53EF\u4EE5\u901A\u8FC7<code>docker inspect \u955C\u50CF</code>\u67E5\u770B\u955C\u50CF\u5185\u90E8\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u6267\u884C\u547D\u4EE4<code>docker inspect newimage</code>\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353797.webp" alt="\u56FE\u7247"></p><p>\u5173\u4E8E\u6B65\u9AA4\u548C\u6548\u679C\uFF0C\u5728Dockerfile\u6CE8\u91CA\u548C\u56FE\u8868\u4E2D\u5DF2\u7ECF\u8BE6\u7EC6\u63CF\u8FF0\u3002</p><h3 id="_6-3-5-cmd\u548Centrypoint\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_6-3-5-cmd\u548Centrypoint\u7684\u533A\u522B" aria-hidden="true">#</a> 6.3.5 CMD\u548CENTRYPOINT\u7684\u533A\u522B</h3><p>\u4E24\u4E2A\u547D\u4EE4\u90FD\u662F\u542F\u52A8\u5BB9\u5668\u65F6\u6307\u5B9A\u6267\u884C\u547D\u4EE4\u548C\u5BF9\u5E94\u7684\u53C2\u6570\uFF0C\u4F46\u4E24\u8005\u7A0D\u6709\u4E0D\u540C\uFF0C\u5982\u4E0B\uFF1A</p><ul><li><strong>CMD</strong>\uFF1A\u53EA\u80FD\u6700\u540E\u4E00\u4E2A\u547D\u4EE4\u4F1A\u751F\u6548\uFF0C\u547D\u4EE4\u4F1A\u88ABdocker run\u4E4B\u540E\u7684\u53C2\u6570\u66FF\u6362\u6389\uFF1B</li><li><strong>ENTRYPOINT</strong>\uFF1A\u53EF\u4EE5\u8FFD\u52A0\u547D\u4EE4\uFF0C\u6BD4\u5982\u589E\u52A0\u53C2\u6570\uFF1B</li></ul><p>\u4E0A\u9762\u6784\u5EFA\u51FA\u6765\u7684newimage\u955C\u50CF\u7528\u5230\u7684\u662FENTRYPOINT\uFF0C\u6240\u4EE5\u6211\u4EEC\u5148\u6765\u6D4B\u8BD5\u4E00\u4E0BENTRYPOINT\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353066.webp" alt="\u56FE\u7247"></p><p><code>docker run</code>\u542F\u52A8\u5BB9\u5668\u65F6\u6307\u5B9A\u4E86\u53C2\u6570 <code>--urls=&quot;http://+:9999&quot;</code>\uFF0C\u5BB9\u5668\u6B63\u5E38\u542F\u52A8\uFF0C\u5E76\u4E14\u53C2\u6570\u8FD8\u80FD\u751F\u6548\uFF0C\u7B49\u540C\u4E8E\u5728\u5F53\u524D\u76EE\u5F55\u76F4\u63A5\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> dotnet DockerfileDemo.dll --urls=&quot;http://+:9999&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u73B0\u5728\u628AENTRYPOINT\u6362\u6210CMD\u8BD5\u8BD5\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> # \u5728\u4EE5\u4E0A\u7684Dockerfile\u4E2D
 # \u5C06ENTRYPOINT [&quot;dotnet&quot;, &quot;DockerfileDemo.dll&quot;]\u6362\u6210CMD\uFF0C\u5982\u4E0B\uFF1A
 CMD [&quot;dotnet&quot;, &quot;DockerfileDemo.dll&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u91CD\u65B0\u6784\u5EFA\u4E00\u4E2A\u955C\u50CF\u8BD5\u8BD5\uFF0C\u6D4B\u8BD5\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353686.webp" alt="\u56FE\u7247"></p><p>\u5982\u4E0A\u56FE\uFF0C\u5BF9\u4E8ECMD\u800C\u8A00\uFF0C\u5982\u679C\u5728\u8FD0\u884C\u5BB9\u5668\u65F6\uFF0C\u540E\u9762\u6307\u5B9A\u53C2\u6570\uFF0C\u8FD9\u4E2A\u53C2\u6570\u5C31\u4F1A\u628ACMD\u547D\u4EE4\u66FF\u6362\u6389\uFF0C\u4E0D\u80FD\u62FC\u63A5\uFF0C\u5BFC\u81F4\u547D\u4EE4\u4E0D\u5BF9\uFF0C\u6240\u4EE5\u62A5\u9519\uFF1B\u4F46\u8FD9\u6837\u5C31\u53EF\u4EE5\u6267\u884C\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142353155.webp" alt="\u56FE\u7247"></p><p>\u5982\u679C\u5728\u5F53\u524D\u6784\u5EFA\u7684\u4E0A\u4E0B\u6587\u76EE\u5F55\u4E2D\u4E0D\u60F3\u8981\u4E00\u4E9B\u6587\u4EF6\u53C2\u4E0E\u6784\u5EFA\uFF0C<strong>\u53EF\u4EE5\u901A\u8FC7\u5728.dockerignore\u6587\u4EF6\u4E2D\u8FDB\u884C\u914D\u7F6E</strong>\uFF0C\u8FD9\u4E2A\u548Cgit\u4E2D\u7684.gitignore\u4E00\u4E2A\u9053\u7406\uFF0C\u7F16\u5199\u4E5F\u6BD4\u8F83\u7B80\u5355\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u6F14\u793A\u4E86\u3002</p><p>\u5BF9\u4E86\uFF0C.NetCore\u7684\u955C\u50CF\u5217\u8868\u53EF\u4EE5\u53C2\u7167\u8FD9\u4E2A\u5730\u5740\uFF1Ahttps://hub.docker.com/_/microsoft-dotnet-aspnet/\uFF0C\u6BCF\u4E2A\u955C\u50CF\u90FD\u6709\u5BF9\u5E94\u7684Dockerfile\uFF0C\u611F\u5174\u8DA3\u7684\u5C0F\u4F19\u4F34\u53EF\u4EE5\u70B9\u8FDB\u53BB\u770B\u770B\uFF0C\u53C2\u8003\u53C2\u8003\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354849.webp" alt="\u56FE\u7247"></p><h1 id="_7-\u7F51\u7EDC" tabindex="-1"><a class="header-anchor" href="#_7-\u7F51\u7EDC" aria-hidden="true">#</a> 7 \u7F51\u7EDC</h1><h2 id="_7-1-docker\u7F51\u7EDC\u6A21\u5F0F\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_7-1-docker\u7F51\u7EDC\u6A21\u5F0F\u7B80\u4ECB" aria-hidden="true">#</a> 7.1 Docker\u7F51\u7EDC\u6A21\u5F0F\u7B80\u4ECB</h2><p><strong>\u5F53Docker\u8FDB\u7A0B\u542F\u52A8\u65F6\uFF0C\u4F1A\u5728\u4E3B\u673A\u4E0A\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3Adocker0\u7684\u865A\u62DF\u7F51\u6865\uFF0C\u6B64\u4E3B\u673A\u4E0A\u542F\u52A8\u7684Docker\u5BB9\u5668\u9ED8\u8BA4\u4F1A\u8FDE\u63A5\u5230\u8FD9\u4E2A\u865A\u62DF\u7F51\u6865\u4E0A</strong>\u3002\u8FD9\u6837\u6240\u6709\u5BB9\u5668\u901A\u8FC7\u8FD9\u4E2A\u865A\u62DF\u7F51\u6865\u5C31\u6253\u901A\u4E86\uFF0C\u6240\u4EE5\u8FD9\u91CC\u7684docker0\u5DE5\u4F5C\u65B9\u5F0F\u548C\u7269\u7406\u4EA4\u6362\u673A\u5F88\u50CF\u3002</p><p>\u5728\u4E3B\u673A\u4E0A\u53EF\u4EE5\u6267\u884C\u547D\u4EE4<code>ip link show docker0</code>\u67E5\u770B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354926.webp" alt="\u56FE\u7247"></p><p><strong>Docker\u5728\u542F\u52A8\u5BB9\u5668\u65F6\u53EF\u4EE5\u6307\u5B9A\u7F51\u7EDC\u6A21\u5F0F\uFF0C\u5982\u679C\u4E0D\u6307\u5B9A\uFF0C\u9ED8\u8BA4\u5C31\u662F\u91C7\u7528Bridge\u6A21\u5F0F</strong>\uFF1BDocker\u7684\u7F51\u7EDC\u6A21\u5F0F\u6709\u5982\u4E0B\u51E0\u79CD\uFF1A</p><ul><li><strong>Bridge(\u6865\u63A5)\u6A21\u5F0F</strong>\uFF1A\u9ED8\u8BA4\u7684\u7F51\u7EDC\u6A21\u5F0F\uFF0C\u6BD4\u8F83\u9002\u7528\u4E8E\u5728\u540C\u4E00Docker Daemon\u4E3B\u673A\u4E0A\u8FD0\u884C\u7684\u5BB9\u5668\uFF0C<strong>\u7528\u6237\u4E5F\u53EF\u4EE5\u81EA\u5B9A\u4E49bridge\u7F51\u7EDC\uFF0C\u4F18\u4E8E\u9ED8\u8BA4\u7684bridge\u7F51\u7EDC</strong>\uFF1B\u5982\u679C\u9700\u8981\u4E0D\u540CDocker\u4E3B\u673A\u8FDB\u884C\u901A\u4FE1\uFF0C\u53EF\u4EE5\u901A\u8FC7\u64CD\u4F5C\u7CFB\u7EDF\u7F51\u7EDC\u914D\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528Overlay\u6A21\u5F0F\u3002</li><li><strong>Host\u6A21\u5F0F</strong>\uFF1A\u548C\u5BBF\u4E3B\u673A\u5171\u7528\u4E00\u4E2ANetwork Namespace\u3002\u5373\u5BB9\u5668\u4E0D\u4F1A\u865A\u62DF\u51FA\u81EA\u5DF1\u7684\u7F51\u5361\u548C\u914D\u7F6E\u81EA\u5DF1\u7684IP\u7B49\uFF0C\u800C\u662F\u4F7F\u7528\u5BBF\u4E3B\u673A\u7684IP\u548C\u7AEF\u53E3\uFF1B</li><li><strong>Overlay\u6A21\u5F0F</strong>\uFF1A\u8986\u76D6\u7F51\u7EDC\u53EF\u4EE5\u5C06\u591A\u4E2A Docker Daemon\u4E3B\u673A\u8FDE\u63A5\u5728\u4E00\u8D77\uFF0C\u5E76\u4F7F swarm \u670D\u52A1\u80FD\u591F\u76F8\u4E92\u901A\u4FE1\uFF1B\u4E5F\u53EF\u4EE5\u8BA9Docker Daemon\u4E3B\u673A\u4E0A\u7684\u4E24\u4E2A\u72EC\u7ACB\u5BB9\u5668\u8FDB\u884C\u901A\u4FE1\u3002</li><li><strong>Macvlan\u6A21\u5F0F</strong>\uFF1AMacvlan \u7F51\u7EDC\u5141\u8BB8\u4E3A\u5BB9\u5668\u5206\u914D MAC \u5730\u5740\uFF0C\u4F7F\u5176\u5728\u7F51\u7EDC\u4E0A\u663E\u793A\u4E3A\u7269\u7406\u8BBE\u5907\u3002Docker Deamon\u901A\u8FC7\u5BB9\u5668\u7684 MAC \u5730\u5740\u5C06\u6D41\u91CF\u8DEF\u7531\u5230\u5BB9\u5668\u3002</li><li><strong>None\u6A21\u5F0F</strong>\uFF1ADocker\u5BB9\u5668\u62E5\u6709\u81EA\u5DF1\u7684Network Namespace\uFF0C\u4F46\u662F\u5E76\u4E0D\u4E3A\u5BB9\u5668\u8FDB\u884C\u4EFB\u4F55\u7F51\u7EDC\u914D\u7F6E\u3002\u5373\u5BB9\u5668\u6CA1\u6709\u7F51\u5361\u3001IP\u3001\u8DEF\u7531\u7B49\u4FE1\u606F\u3002<strong>\u9700\u8981\u5355\u72EC\u4E3ADocker\u5BB9\u5668\u6DFB\u52A0\u7F51\u5361\u3001\u914D\u7F6EIP</strong>\uFF1B</li></ul><p>Docker\u5728\u542F\u52A8\u5BB9\u5668\u7684\u65F6\u5019\u53EF\u4EE5\u901A\u8FC7**--net**\u6307\u5B9A\u7F51\u7EDC\u6A21\u5F0F\uFF0C\u4E0D\u6307\u5B9A\uFF0C\u9ED8\u8BA4\u5C31\u662Fbridge\u6A21\u5F0F\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># --net\u6307\u5B9A\u7F51\u7EDC\u6A21\u5F0F\uFF0C\u8FD9\u91CC\u6307\u5B9A\u4E3Ahost\u6A21\u5F0F
docker run -d --name testnet --net host nginx
# \u901A\u8FC7docker inspect \u5BB9\u5668 \u770B\u7F51\u7EDC\u7EC6\u8282\uFF0C\u5982\u4E0B\u56FE
docker inspect testnet
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354736.webp" alt="\u56FE\u7247"></p><h2 id="_7-2-bridge\u9ED8\u8BA4\u6A21\u5F0F\u4E86\u89E3\u4E00\u4E0B" tabindex="-1"><a class="header-anchor" href="#_7-2-bridge\u9ED8\u8BA4\u6A21\u5F0F\u4E86\u89E3\u4E00\u4E0B" aria-hidden="true">#</a> 7.2 Bridge\u9ED8\u8BA4\u6A21\u5F0F\u4E86\u89E3\u4E00\u4E0B</h2><p>\u8FD9\u91CC\u5C31\u4EE5\u9ED8\u8BA4\u7684Bridge(\u6865\u63A5)\u5C55\u5F00\u6765\u8BF4\u8BF4\uFF0C\u5176\u4ED6\u6A21\u5F0F\u540E\u7EED\u6839\u636E\u5E94\u7528\u573A\u666F\u518D\u5177\u4F53\u7EC6\u8BF4\u3002</p><p>\u8FD9\u91CC\u4E3B\u8981\u770B\u770B\u4E3B\u673A\u548C\u5BB9\u5668\u4E4B\u95F4\u7684\u7F51\u7EDC\u3001\u5BB9\u5668\u548C\u5BB9\u5668\u4E4B\u95F4\u7684\u7F51\u7EDC\u3002</p><p>\u5728Bridge\u6A21\u5F0F\u4E0B\uFF0C<strong>\u5F53\u542F\u52A8\u5BB9\u5668\u65F6\uFF0CDocker\u4F1A\u5206\u914D\u4E00\u4E2AIP\u7ED9\u5BB9\u5668\uFF0C\u5E76\u8BBE\u7F6Edocker0\u7684IP\u5730\u5740\u4E3A\u5BB9\u5668\u7684\u9ED8\u8BA4\u7F51\u5173</strong>\uFF1B\u8FD9\u4E2A\u65F6\u5019\u4F1A\u5728\u4E3B\u673A\u4E0A\u521B\u5EFA\u4E00\u5BF9\u865A\u62DF\u7F51\u5361veth pair\u8BBE\u5907\u63A5\u53E3\uFF0CDocker\u5C06veth pair\u8BBE\u5907\u7684\u4E00\u7AEF\u914D\u7F6E\u5728\u65B0\u542F\u52A8\u7684\u5BB9\u5668\u4E2D\uFF0C\u5E76\u547D\u540D\u4E3Aeth0@ifxxx\uFF08\u5BB9\u5668\u7684\u7F51\u5361\uFF09\uFF0C\u53E6\u4E00\u7AEF\u5728\u4E3B\u673A\u4E2D\u4EE5veth***@ifxxx\u8FD9\u6837\u7C7B\u4F3C\u7684\u540D\u5B57\u547D\u540D\uFF0C\u5E76\u5C06\u8FD9\u4E2A\u7F51\u7EDC\u8BBE\u5907\u52A0\u5165\u5230docker0\u7F51\u6865\u4E2D\u3002</p><p>\u5BB9\u5668\u6CA1\u6709\u542F\u52A8\u65F6\u4E3B\u673A\u7684\u7F51\u7EDC\u914D\u7F6E\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354340.webp" alt="\u56FE\u7247"></p><p>\u5F53\u542F\u52A8\u5BB9\u5668\u65F6\uFF0CDocker\u4E3B\u673A\u5C31\u4F1A\u521B\u5EFA\u4E00\u5BF9\u865A\u62DF\u7F51\u5361vethpair\u8BBE\u5907\u63A5\u53E3\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354690.webp" alt="\u56FE\u7247"></p><p>\u53EF\u4EE5\u8FDB\u5165\u5230\u5BB9\u5668\u770B\u770BIP\u5206\u914D\u60C5\u51B5\uFF0C\u5982\u679C<code>ip addr</code>\u547D\u4EE4\u5728\u5BB9\u5668\u5185\u627E\u4E0D\u5230\uFF0C\u90A3\u662F\u56E0\u4E3A\u57FA\u7840\u955C\u50CF\u53EA\u5305\u542B\u6838\u5FC3\u547D\u4EE4\uFF0C\u5982\u679C\u8981\u6267\u884C\u5176\u4ED6\u547D\u4EE4\uFF0C\u9700\u8981\u989D\u5916\u5B89\u88C5\u3002\u53EF\u4EE5\u5728\u5BB9\u5668\u5185\u6267\u884C\u5982\u4E0B\u547D\u4EE4\u8FDB\u884C\u5B89\u88C5\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>apt update &amp;&amp; apt install -y iproute2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5B89\u88C5\u597D\u4E4B\u540E\uFF0C\u5C31\u53EF\u4EE5\u67E5\u770B\u5BB9\u5668\u5185\u7684IP\u60C5\u51B5\u4E86\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354699.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u91CC\u6709\u6CA1\u6709\u53D1\u73B0\u5BB9\u5668\u5185\u7684IP\u662F\u548C\u4E3B\u673A\u591A\u51FA\u6765\u7684\u865A\u62DF\u7F51\u5361\u662F\u6210\u5BF9\u51FA\u73B0\uFF0C\u8FD9\u6837\u4E3B\u673A\u7F51\u7EDC\u548C\u5BB9\u5668\u4E4B\u95F4\u80AF\u5B9A\u80FD\u901A\uFF1B</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354463.webp" alt="\u56FE\u7247"></p><p>\u5F53\u7136\u5BB9\u5668\u5185\u90E8\u4E5F\u53EF\u4EE5ping\u901A\u4E3B\u673A\u3002</p><p><strong>\u90A3\u5BB9\u5668\u4E4B\u95F4\u80FD\u4E0D\u80FD\u8BBF\u95EE\u5462\uFF1F</strong></p><p>\u5BB9\u5668\u5185ping\u547D\u4EE4\u4E5F\u627E\u4E0D\u5230\uFF0C\u9700\u8981\u8FDB\u884C\u5B89\u88C5\uFF0C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>apt update &amp;&amp; install iputils-ping
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u65B0\u542F\u52A8\u4E00\u4E2A\u5BB9\u5668mynginx2\uFF0CIP\u5185\u90E8\u5206\u914D\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354669.webp" alt="\u56FE\u7247"></p><p><strong>mynginx\u5BB9\u5668\u5185\u80FDping\u901Amynginx2\uFF0C\u90A3\u662F\u56E0\u4E3A\u4E24\u4E2A\u5BB9\u5668\u4E4B\u95F4\u5171\u7528\u4E86docker0\uFF0C\u901A\u8FC7docker0\u8FDB\u884C\u8F6C\u53D1</strong>\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354413.webp" alt="\u56FE\u7247"></p><p>\u5927\u6982\u4E00\u4E2A\u7F51\u7EDC\u6D41\u7A0B\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354954.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u91CC\u7684Docker0\u5C31\u597D\u6BD4\u662F\u4EA4\u6362\u673A\uFF0C\u5F62\u6210\u4E86\u7F51\u7EDC\u6865\u6881\u3002</p><h2 id="_7-3-\u5982\u4F55\u80FD\u901A\u8FC7\u5BB9\u5668\u540D\u8FDB\u884C\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#_7-3-\u5982\u4F55\u80FD\u901A\u8FC7\u5BB9\u5668\u540D\u8FDB\u884C\u8BBF\u95EE" aria-hidden="true">#</a> 7.3 \u5982\u4F55\u80FD\u901A\u8FC7\u5BB9\u5668\u540D\u8FDB\u884C\u8BBF\u95EE</h2><p>\u9ED8\u8BA4\u60C5\u51B5\uFF0C\u5BB9\u5668\u95F4\u7684\u8BBF\u95EE\u53EA\u80FD\u901A\u8FC7IP\uFF0C\u4E0D\u80FD\u901A\u8FC7\u5BB9\u5668\u540D\u8BBF\u95EE\uFF1B</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354220.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u79CD\u60C5\u51B5\u5BF9\u4E8E\u7EBF\u4E0A\u9879\u76EE\u5F88\u4E0D\u7075\u6D3B\uFF0C\u6BD4\u5982\u6570\u636E\u5E93\u5907\u4EFD\u9700\u8981\u4E34\u65F6\u8FC1\u79FB\uFF0CIP\u53EF\u80FD\u4F1A\u4E0D\u4E00\u6837\uFF0C\u6240\u4EE5\u9879\u76EE\u4E2D\u7684\u5730\u5740\u8981\u91CD\u65B0\u914D\u7F6E\uFF0C\u5982\u679C\u80FD\u901A\u8FC7\u5BB9\u5668\u540D\u8BBF\u95EE\uFF0C\u90A3\u4E48\u5C31\u4E0D\u7528\u64CD\u5FC3\u66F4\u6362\u5566\uFF0C\u53EA\u8981\u5BB9\u5668\u540D\u4E00\u6837\u5373\u53EF\uFF0C\u5C31\u597D\u6BD4\u57DF\u540D\u548CIP\u7684\u5173\u7CFB\u4E00\u6837\uFF0CIP\u518D\u600E\u4E48\u53D8\uFF0C\u57DF\u540D\u4E0D\u53D8\u5C31\u884C\u3002</p><h3 id="_7-3-1-\u901A\u8FC7-link\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_7-3-1-\u901A\u8FC7-link\u65B9\u5F0F" aria-hidden="true">#</a> 7.3.1 \u901A\u8FC7--link\u65B9\u5F0F\uFF1B</h3><p>\u65B0\u542F\u52A8\u4E00\u4E2A\u5BB9\u5668mynginx3\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u901A\u8FC7--link\u5173\u8054 mynginx\u5BB9\u5668
docker run -d --name mynginx3 --link mynginx nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BB9\u5668\u542F\u52A8\u4E4B\u540E\uFF0C\u53EF\u4EE5\u8FDB\u5165\u5230\u5BB9\u5668\u6D4B\u8BD5\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u8FDB\u5165\u5BB9\u5668
docker exec -it mynginx3 /bin/bash 
# \u5B89\u88C5ping\u5DE5\u5177
apt update &amp;&amp; apt install iputils-ping
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354544.webp" alt="\u56FE\u7247"></p><p>\u5185\u90E8\u539F\u7406\u5176\u5B9E\u662F\u5728mynginx3\u5185\u90E8\u505A\u4E86\u4E2A\u6620\u5C04\u914D\u7F6E\uFF0C\u5BB9\u5668mynginx3\u7684hosts\u5185\u5BB9\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354791.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u6837\u53EA\u80FD\u5728\u5BB9\u5668mynginx3\u5185\u90E8\u901A\u8FC7mynginx\u5BB9\u5668\u540Dping\u901A\uFF0C\u4E0D\u80FD\u5728mynginx\u5185\u90E8\u901A\u8FC7\u5BB9\u5668\u540Dmynginx3\u8BBF\u95EE\uFF0C\u5982\u679C\u8981\u8FBE\u5230\u540C\u6837\u7684\u6548\u679C\uFF0C\u5C31\u5F97\u5728\u542F\u52A8mynginx\u65F6\u901A\u8FC7--link\u548Cmynginx3\u5173\u8054\u8D77\u6765\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354028.webp" alt="\u56FE\u7247"></p><p>\u5982\u679C\u6BCF\u4E2A\u5BB9\u5668\u90FD\u8FD9\u6837\u7684\u663E\u793A\u6307\u5B9A\u7684\u8BDD\uFF0C\u611F\u89C9\u5C31\u6709\u70B9\u9EBB\u70E6\u5566\uFF0C\u901A\u5E38\u7684\u505A\u6CD5\u90FD\u662F\u901A\u8FC7\u81EA\u5B9A\u4E49\u7F51\u7EDC\u65B9\u5F0F\u6765\u8FBE\u5230\u8FD9\u4E2A\u76EE\u7684\u3002</p><h3 id="_7-3-2-\u901A\u8FC7\u81EA\u5B9A\u4E49\u7F51\u7EDC\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_7-3-2-\u901A\u8FC7\u81EA\u5B9A\u4E49\u7F51\u7EDC\u65B9\u5F0F" aria-hidden="true">#</a> 7.3.2 \u901A\u8FC7\u81EA\u5B9A\u4E49\u7F51\u7EDC\u65B9\u5F0F\uFF1B</h3><p>\u9996\u5148\u65B0\u521B\u5EFA\u4E00\u4E2A\u7F51\u7EDC\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354711.webp" alt="\u56FE\u7247"></p><p>\u547D\u4EE4\u89E3\u6790\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># --driver \u6307\u5B9A\u7F51\u7EDC\u6A21\u5F0F\uFF0C\u8FD9\u91CC\u4E3Abridge\u6865\u63A5\u6A21\u5F0F
# --subnet \u6307\u5B9A\u5B50\u7F51IP  192.168.0.0/16
# --gateway \u6307\u5B9A\u7F51\u5173 192.168.0.1
# my-net \u521B\u5EFA\u7684\u7F51\u7EDC\u540D
docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 my-net
# \u663E\u793A\u7F51\u7EDC
docker network ls
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BA9\u542F\u52A8\u7684\u5BB9\u5668\u4F7F\u7528\u81EA\u5B9A\u4E49\u7684\u7F51\u7EDC\uFF0C\u5373\u5728\u542F\u52A8\u5BB9\u5668\u65F6\u4F7F\u7528**--net**\u6307\u5B9A\u5373\u53EF\uFF1A</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChSHlyAc04dcnxyu4CCzxHZddJdFOCfPlcYicJdgJ7ziacobIicqUjyW2TB9Jy7p68lbEnRn6NUMLL7pQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="\u56FE\u7247"></p><p><strong>\u542F\u52A8\u5BB9\u5668\u65F6\u4E0D\u9700\u8981--link\uFF0C\u53EA\u9700\u8981\u63A5\u5165\u5230\u81EA\u5B9A\u4E49\u7F51\u7EDC\u5C31\u53EF\u4EE5\u901A\u8FC7\u5BB9\u5668\u540Dping\u901A\u4E86</strong>\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354615.webp" alt="\u56FE\u7247"></p><p><strong>\u81EA\u5B9A\u4E49\u7F51\u7EDC\u4E4B\u6240\u4EE5\u80FD\u901A\u8FC7\u5BB9\u5668\u540Dping\u901A\uFF0C\u90A3\u662F\u5BB9\u5668\u5185\u8FD0\u884C\u4E86\u4E00\u4E2A\u672C\u5730DNS\u89E3\u6790\u5668\uFF0C\u8BE5\u89E3\u6790\u5668\u5C06\u8BF7\u6C42\u8F6C\u53D1\u5230Docker\u5185\u90E8DNS\u670D\u52A1\u5668\u5F53\u4E2D\uFF0CDNS\u670D\u52A1\u5668\u4E2D\u8BB0\u5F55\u4E86\u5BB9\u5668\u542F\u52A8\u65F6\u901A\u8FC7--name\u6216--net-alias\u53C2\u6570\u6307\u5B9A\u7684\u540D\u79F0\u4E0E\u5BB9\u5668\u4E4B\u95F4\u7684\u5173\u7CFB</strong>\u3002</p><p>\u53E6\u5916\u8FD8\u6709\u4E00\u4E2A\u70B9\uFF0C\u73B0\u5728\u5206\u914D\u7ED9\u5BB9\u5668\u7684IP\u662F\u6309\u7167\u9884\u5148\u8BBE\u7F6E\u7684\u5B50\u7F51\u8303\u56F4\u8FDB\u884C\u5206\u914D\u7684\uFF0C\u800C\u4E0D\u662F\u9ED8\u8BA4\u7684docker0\u5B50\u7F51\u8303\u56F4\uFF0C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\u770B\u8BE6\u7EC6\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u770B\u5BB9\u5668\u8BE6\u7EC6\u4FE1\u606F
docker inspect testmynetnginx1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354353.webp" alt="\u56FE\u7247"></p><h1 id="_8-docker-compose" tabindex="-1"><a class="header-anchor" href="#_8-docker-compose" aria-hidden="true">#</a> 8. Docker Compose</h1><p>Docker\u53EF\u4EE5\u5C06\u5E94\u7528\u7A0B\u5E8F\u53CA\u73AF\u5883\u5F88\u65B9\u4FBF\u7684\u4EE5\u5BB9\u5668\u7684\u5F62\u5F0F\u542F\u52A8\uFF0C\u4F46\u5F53\u5E94\u7528\u7A0B\u5E8F\u4F9D\u8D56\u7684\u670D\u52A1\u6BD4\u8F83\u591A\uFF0C\u6216\u662F\u9047\u5230\u4E00\u4E2A\u5927\u7CFB\u7EDF\u62C6\u5206\u7684\u670D\u52A1\u5F88\u591A\u65F6\uFF0C\u5982\u679C\u8FD8\u4E00\u4E2A\u4E00\u4E2A\u7684\u6839\u636E\u955C\u50CF\u542F\u52A8\u5BB9\u5668\uFF0C\u90A3\u5C31\u6709\u70B9\u7D2F\u4EBA\u4E86\uFF0C\u5230\u8FD9\u6709\u5F88\u591A\u5C0F\u4F19\u4F34\u4F1A\u8BF4\uFF1A\u5F04\u4E2A\u811A\u672C\u5C31\u641E\u5B9A\u5566\uFF1B\u8981\u7684\u5C31\u662F\u8FD9\u4E2A\u601D\u8DEF\uFF0CDocker\u63D0\u4F9B\u4E86\u4E00\u4E2A\u53EBDocker Compose\u7684\u5DE5\u5177\uFF0C\u4E00\u952E\u542F\u52A8\u76F8\u5173\u670D\u52A1\u3002</p><p>\u4E3E\u4E2A\u4F8B\uFF1A\u6BD4\u5982\u5F00\u53D1\u4E00\u4E2AWeb\u9879\u76EE\uFF0C\u9700\u8981\u6709\u6570\u636E\u5E93\u3001Redis\u3001MongoDB\u3001\u914D\u7F6E\u4E2D\u5FC3\u7B49\u7B49\uFF0C\u5982\u679C\u5C06\u5176\u8FDB\u884C\u5BB9\u5668\u5316\uFF0C\u53EF\u4EE5\u6709\u4E24\u79CD\u9009\u62E9\uFF0C\u7B2C\u4E00\u79CD\u5C31\u662F\u628A\u6240\u6709\u7684\u670D\u52A1\u4F9D\u8D56\u548C\u5E94\u7528\u7A0B\u5E8F\u5168\u90E8\u6784\u5EFA\u4E3A\u4E00\u4E2A\u955C\u50CF\uFF0C\u7136\u540E\u4EE5\u4E00\u4E2A\u5BB9\u5668\u8FD0\u884C\uFF0C\u5373\u8FD9\u4E2A\u5BB9\u5668\u91CC\u9762\u5305\u542B\u4E86Web\u5E94\u7528\u7A0B\u5E8F\u3001\u6570\u636E\u5E93\u3001Redis\u3001MongoDB\u3001\u914D\u7F6E\u4E2D\u5FC3\u7B49\uFF1B\u53E6\u4E00\u79CD\u65B9\u5F0F\u5C31\u5404\u81EA\u670D\u52A1\u5355\u72EC\u542F\u52A8\u4E3A\u4E00\u4E2A\u5BB9\u5668\u670D\u52A1\uFF0C\u6BD4\u8F83\u72EC\u7ACB\uFF0C\u4E00\u822C\u53EF\u4EE5\u4E00\u4E2A\u4E00\u4E2A\u7684\u542F\u52A8\u5BB9\u5668\uFF0C\u7136\u540E\u901A\u8FC7\u7F51\u7EDC\u8FDE\u63A5\u8D77\u6765\u5C31\u884C\uFF1B\u663E\u7136\u7B2C\u4E8C\u79CD\u65B9\u5F0F\u662F\u5C0F\u4F19\u4F34\u4EEC\u66F4\u591A\u7684\u9009\u62E9\uFF0C\u5982\u679C\u80FD\u914D\u4E0A\u4E00\u4E2A\u6279\u91CF\u64CD\u4F5C\u90A3\u5C31\u5B8C\u7F8E\u4E86\uFF0C\u800CDocker Compose\u5C31\u662F\u6765\u5E72\u8FD9\u4E2A\u4E8B\u7684\u3002</p><h2 id="_8-1-\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#_8-1-\u6982\u8FF0" aria-hidden="true">#</a> 8.1 \u6982\u8FF0</h2><p><strong>Docker Compose \u662F\u4E00\u4E2A\u7528\u4E8E\u5B9A\u4E49\u548C\u8FD0\u884C\u591A\u4E2A\u5BB9\u5668\u670D\u52A1\u7684 Docker \u5E94\u7528\u7A0B\u5E8F\u5DE5\u5177\uFF1B\u642D\u914D\u4F7F\u7528 YAML \u6587\u4EF6\u6765\u914D\u7F6E\u5E94\u7528\u7A0B\u5E8F\u670D\u52A1\uFF0C\u7136\u540E\u8FD0\u884CDocker Compose\u547D\u4EE4\uFF0C\u4E00\u952E\u542F\u52A8\u6240\u6709\u5BB9\u5668\u670D\u52A1</strong>\u3002</p><h2 id="_8-2-\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#_8-2-\u5B89\u88C5" aria-hidden="true">#</a> 8.2 \u5B89\u88C5</h2><p><strong>Docker\u9ED8\u8BA4\u5B89\u88C5\u73AF\u5883\u4E0B\u662F\u4E0D\u5305\u542BDocker Compose\u5DE5\u5177\u7684\uFF0C\u9700\u8981\u5355\u72EC\u5B89\u88C5</strong>\u3002Docker Compose\u5DE5\u5177\u642D\u914DDocker\u624D\u6709\u610F\u4E49\uFF0C\u6240\u4EE5\u5B89\u88C5Docker Compose\u4E4B\u524D\u9700\u8981\u5B89\u88C5Docker\u3002\u4EE5\u4E0B\u6F14\u793A\u5E73\u53F0\u4E3ALinux\uFF0C\u5176\u4ED6\u5E73\u53F0\u8BF7\u53C2\u7167\u6587\u6863\uFF1Ahttps://docs.docker.com/compose/install/</p><h3 id="_8-2-1-\u4E0B\u8F7D\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_8-2-1-\u4E0B\u8F7D\u6587\u4EF6" aria-hidden="true">#</a> 8.2.1 \u4E0B\u8F7D\u6587\u4EF6</h3><p><strong>\u5176\u5B9EDocker Compose\u662F\u4E00\u4E2A\u53EF\u6267\u884C\u6587\u4EF6</strong>\uFF0C\u76F4\u63A5\u4E0B\u8F7D\u5BF9\u5E94\u6587\u4EF6\u5373\u53EF\uFF0C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u4E0B\u8F7DDocker Compose\u6587\u4EF6\uFF0C \u8FD9\u4E2A\u5730\u5740\u4E0B\u8F7D\u6BD4\u8F83\u6162
sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
# \u8FD9\u4E2A\u5730\u5740\u5FEB\u70B9
sudo curl -L &quot;https://get.daocloud.io/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u4E0B\u56FE\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354976.webp" alt="\u56FE\u7247"></p><h3 id="_8-2-2-\u6388\u4E88\u6267\u884C\u6743\u9650" tabindex="-1"><a class="header-anchor" href="#_8-2-2-\u6388\u4E88\u6267\u884C\u6743\u9650" aria-hidden="true">#</a> 8.2.2 \u6388\u4E88\u6267\u884C\u6743\u9650</h3><p>\u4E0B\u8F7D\u4E0B\u6765\u7684\u6587\u4EF6\u9ED8\u8BA4\u662F\u6CA1\u6709\u6267\u884C\u6743\u9650\u7684\uFF0C\u540E\u7EED\u9700\u8981\u6267\u884C\uFF0C\u6240\u4EE5\u5F97\u6388\u4E88\u6267\u884C\u6743\u9650\uFF0C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\u5373\u53EF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo chmod +x /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u770B\u770B\u6743\u9650\u7ED3\u679C\u5206\u914D\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142354465.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u6837docker-compose\u5C31\u5B89\u88C5\u5B8C\u5566\u3002</p><h3 id="_8-2-3-\u5378\u8F7D" tabindex="-1"><a class="header-anchor" href="#_8-2-3-\u5378\u8F7D" aria-hidden="true">#</a> 8.2.3 \u5378\u8F7D</h3><p>\u5982\u679C\u9700\u8981\u5378\u8F7D\uFF0C\u76F4\u63A5\u5220\u9664\u5373\u53EF\uFF0C\u6267\u884C\u5982\u4E0B\u547D\u4EE4\u5373\u53EF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo rm /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_8-3-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_8-3-\u4F7F\u7528" aria-hidden="true">#</a> 8.3. \u4F7F\u7528</h2><p><strong>Docker Compose\u9700\u8981\u642D\u914DYAML\u6587\u4EF6\u4F7F\u7528\uFF0CYAML \u662F\u4E00\u79CD\u4EBA\u7C7B\u53CB\u597D\u7684\u6570\u636E\u5E8F\u5217\u5316\u8BED\u8A00\uFF0C\u9002\u7528\u4E8E\u6240\u6709\u7F16\u7A0B\u8BED\u8A00\uFF0C\u540E\u7F00\u540D\u4E3A.yml</strong>\u3002</p><p>\u6240\u4EE5\u5728\u8FDB\u884C\u5B9E\u64CD\u524D\uFF0C\u9700\u8981\u5927\u6982\u7684\u4E86\u89E3\u4E00\u4E0BYAML\u7684\u8BED\u6CD5\uFF0C\u4E0D\u8981\u614C\uFF0C\u8BED\u6CD5\u548CJson\u7684\u601D\u8DEF\u5F88\u50CF\uFF0C\u5927\u6982\u4E86\u89E3\u4E00\u4E0B\uFF0C\u540E\u7EED\u7528\u5230\u67E5\u6587\u6863\u5C31\u884C\u5566\u3002</p><h3 id="_8-3-1-\u7B80\u5355\u8BF4\u8BF4\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_8-3-1-\u7B80\u5355\u8BF4\u8BF4\u8BED\u6CD5" aria-hidden="true">#</a> 8.3.1 \u7B80\u5355\u8BF4\u8BF4\u8BED\u6CD5</h3><p><strong>YAML\u6587\u4EF6\u5185\u5BB9\u662F\u901A\u8FC7\u7A7A\u683C\u7684\u7F29\u8FDB\u6765\u4EE3\u8868\u5C42\u6B21</strong>\uFF0C\u5E38\u7528\u7684\u6570\u636E\u7C7B\u578B\u6709\u5982\u4E0B\uFF1A</p><ul><li><p><strong>\u5BF9\u8C61</strong>\uFF1A\u952E\u503C\u5BF9\u96C6\u5408\uFF1B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># yaml \u5BF9\u8C61\u8BED\u6CD5
testKey:testValue
# Json \u8BED\u6CD5
{&quot;testKey&quot;:&quot;testValue&quot;}
# yaml \u5D4C\u5957\u5BF9\u8C61
testKey:{testKey1:testValue1,testKey2:testValue2}
# Json \u8BED\u6CD5
{&quot;testKey&quot;:{&quot;testKey1&quot;:&quot;testValue1&quot;,&quot;testKey2&quot;:&quot;testValue2&quot;}}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>\u6570\u7EC4</strong>\uFF1A\u4E00\u7EC4\u6309\u6B21\u5E8F\u6392\u5217\u7684\u6570\u636E\uFF1B\u7528-\u524D\u7F00\u8868\u793A\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># yaml \u6570\u7EC4\u8BED\u6CD5
-value1
-value2
-value3
# Json \u6570\u7EC4\u8BED\u6CD5
[&quot;value1&quot;,&quot;value2&quot;,&quot;value3&quot;]
# yaml \u6570\u7EC4\u884C\u5185\u8BED\u6CD5
testKey:[value1,value2]
# Json \u8BED\u6CD5
{&quot;testKey&quot;:[&#39;value1&#39;,&#39;value2&#39;]}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>\u7EAF\u91CF</strong>\uFF1A\u4E0D\u53EF\u518D\u5206\u7684\u503C\uFF0C\u5305\u62EC\u5B57\u7B26\u4E32\u3001\u6574\u6570\u3001\u6D6E\u70B9\u6570\u3001\u65E5\u671F\u3001\u5E03\u5C14\u503C\u7B49\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># yaml
testKey:666
# Json
{testKey:666}
# yaml
isbool:true
# Json
{isbool:true}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>\u5E38\u89C4\u7684\u57FA\u672C\u8BED\u6CD5\u683C\u5F0F\u7EA6\u5B9A\u5982\u4E0B\uFF1A</p><ul><li>\u5927\u5C0F\u5199\u654F\u611F</li><li>\u4F7F\u7528\u7A7A\u683C\u7F29\u8FDB\u8868\u793A\u5C42\u7EA7\u5173\u7CFB</li><li>\u7F29\u8FDB\u4E0D\u5141\u8BB8\u4F7F\u7528tab\uFF0C\u53EA\u5141\u8BB8\u7A7A\u683C</li><li>\u7F29\u8FDB\u7684\u7A7A\u683C\u6570\u4E0D\u91CD\u8981\uFF0C\u53EA\u8981\u76F8\u540C\u5C42\u7EA7\u7684\u5143\u7D20\u5DE6\u5BF9\u9F50\u5373\u53EF</li><li>&#39;#&#39;\u8868\u793A\u6CE8\u91CA</li></ul><p>\u5927\u6982\u4E86\u89E3\u4E0A\u9762\u8FD9\u4E9B\uFF0C\u5173\u4E8E\u65E5\u5E38Docker Compose\u7528\u5230\u7684\u6587\u4EF6\u57FA\u672C\u4E0A\u591F\u7528\u4E86\uFF0C\u5982\u679C\u6709\u9700\u8981\u8FDB\u9636\u7684\uFF0C\u53EF\u4EE5\u53BB\u67E5\u67E5\u5BF9\u5E94\u7684\u8BED\u6CD5\u3002\u4F20\u9001\u95E8\uFF1A</p><p>https://yaml.org/spec/1.2.2/</p><p>https://www.runoob.com/w3cnote/yaml-intro.html</p><p>\u5173\u4E8EYAML\u6587\u4EF6\u5185\u5BB9\u4E2D\u914D\u7F6E\u7684\u547D\u4EE4\u548CDockerfile\u7684\u547D\u4EE4\u5DEE\u4E0D\u591A\u662F\u4E00\u4E00\u5BF9\u5E94\u7684\uFF0C\u7A0D\u540E\u4F1A\u7B80\u5355\u8BF4\u8BF4\u3002</p><h3 id="_8-3-2-\u5B9E\u64CD\u64B8\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_8-3-2-\u5B9E\u64CD\u64B8\u6587\u4EF6" aria-hidden="true">#</a> 8.3.2 \u5B9E\u64CD\u64B8\u6587\u4EF6</h3><p>\u8FD9\u91CC\u8FD8\u662F\u4EE5\u4E00\u4E2AWebApi\u4E3A\u4F8B\uFF0C\u4F8B\u4E2D\u9700\u8981\u4F9D\u8D56Redis\u670D\u52A1\u3002</p>`,148),G=r('<li><p><strong>\u521B\u5EFA\u9879\u76EE\uFF0C\u7F16\u5199\u4F8B\u5B50</strong></p><p>\u8FD9\u91CC\u53EA\u662F\u5F15\u5165\u4E86\u4E00\u4E2ARedis\u7684\u7F13\u5B58\u5305\uFF0C\u901A\u8FC7\u6784\u9020\u51FD\u6570\u6CE8\u5165\u4E4B\u540E\u5C31\u53EF\u4EE5\u76F4\u63A5\u7528\u5566\uFF1B\u7F16\u5199\u4E86\u4E00\u4E2AAPI\u63A5\u53E3TestCache\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355730.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u91CC\u8FD8\u9700\u8981\u5728Startup\u6587\u4EF6\u4E2D\u6CE8\u5165\u76F8\u5173\u670D\u52A1\uFF0C\u5E76\u6307\u5B9ARedis\u7684\u8FDE\u63A5\u5730\u5740\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355845.webp" alt="\u56FE\u7247"></p><p>\u8FD0\u884C\u8D77\u6765\u6D4B\u8BD5\u4E00\u4E0B\u6548\u679C\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355484.webp" alt="\u56FE\u7247"></p><p>Redis\u4E2D\u4E5F\u6709\u503C\u4E86\uFF0C\u8FD9\u91CC\u9700\u8981\u6CE8\u610F\uFF1A\u5B58\u5165Redis\u4E2D\u7684\u7C7B\u578B\u662FHash\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355634.webp" alt="\u56FE\u7247"></p></li>',1),Z=e("p",null,[e("strong",null,"\u7F16\u5199Dockerfile\u6587\u4EF6")],-1),y=e("p",null,"\u5728\u9879\u76EE\u6839\u76EE\u5F55\u521B\u5EFA\u4E00\u4E2ADockerfile\u6587\u4EF6\uFF0C\u5185\u5BB9\u5982\u4E0B\uFF1A",-1),C=e("p",null,[e("img",{src:"https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355057.webp",alt:"\u56FE\u7247"})],-1),I=t("\u5173\u4E8EDockerfile\u4E2D\u7684\u5185\u5BB9\u8FD9\u91CC\u5C31\u4E0D\u7EC6\u8BF4\u4E86\uFF0C\u4E4B\u524D\u6709\u4E00\u7BC7\u6587\u7AE0\u4E13\u95E8\u5206\u4EAB\u7684(\u70B9"),E={href:"https://mp.weixin.qq.com/s?__biz=MzU1MzYwMjQ5MQ==&mid=2247485700&idx=1&sn=5b5625bde7ba831bd99946906fbd3615&chksm=fbf115d0cc869cc612e567f604ac8d1c233f739f8439df72f8bc7a194e501861efe225d44260&token=403152068&lang=zh_CN&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},O=t("\u8FD9\u91CC"),T=t(")\u3002\u8FD9\u91CC\u7684Dockerfile\u76EE\u7684\u5C31\u662F\u5C06\u6211\u4EEC\u7684WebApi\u9879\u76EE\u6784\u5EFA\u4E3A\u955C\u50CF\uFF0C\u548CRedis\u6CA1\u6709\u5173\u7CFB\uFF0C\u4E0D\u8FC7\u8FD9\u91CC\u4E0D\u662F\u901A\u8FC7\u6267\u884C\u547D\u4EE4\u6784\u5EFA\uFF0C\u800C\u662F\u901A\u8FC7Compose\u6587\u4EF6\u4E00\u8D77\u6784\u5EFA\u3002"),P=e("p",null,"\u6CE8\uFF1A\u8FD9\u91CC\u8BB0\u5F97\u5C06Dockerfile\u6587\u4EF6\u901A\u8FC7\u53F3\u952E->\u5C5E\u6027->\u8BBE\u7F6E\u4E3A\u59CB\u7EC8\u590D\u5236\uFF0C\u4FDD\u8BC1\u7F16\u8BD1\u540E\u7684\u6587\u4EF6\u6709\u6700\u65B0\u6587\u4EF6",-1),M=e("li",null,[e("p",null,[e("strong",null,"\u7F16\u5199Compose\u6587\u4EF6")]),e("p",null,"\u5728\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u521B\u5EFAdocker-compose.yml\u6587\u4EF6\uFF0C\u5185\u5BB9\u5982\u4E0B\uFF1A"),e("p",null,[e("img",{src:"https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355217.webp",alt:"\u56FE\u7247"})]),e("p",null,"\u6709\u4E86\u8FD9\u4E2A\u9879\u76EE\u5C31\u53EF\u4EE5\u4E00\u952E\u542F\u52A8\u4E86\uFF0C\u8FD9\u91CC\u9700\u8981\u7A0D\u5FAE\u6539\u4E00\u4E0B\u6211\u4EEC\u539F\u6765\u7684\u4EE3\u7801\uFF0C\u5982\u4E0B\uFF1A"),e("p",null,[e("img",{src:"https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355078.webp",alt:"\u56FE\u7247"})]),e("p",null,"\u6CE8\uFF1A\u8FD9\u91CC\u8BB0\u5F97\u5C06docker-compose.yml\u6587\u4EF6\u901A\u8FC7\u53F3\u952E->\u5C5E\u6027->\u8BBE\u7F6E\u4E3A\u59CB\u7EC8\u590D\u5236\uFF0C\u4FDD\u8BC1\u7F16\u8BD1\u540E\u7684\u6587\u4EF6\u6709\u6700\u65B0\u6587\u4EF6\u3002")],-1),L=r(`<h3 id="_8-3-3-\u4F53\u9A8C\u4E00\u952E\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#_8-3-3-\u4F53\u9A8C\u4E00\u952E\u542F\u52A8" aria-hidden="true">#</a> 8.3.3 \u4F53\u9A8C\u4E00\u952E\u542F\u52A8</h3><ul><li><p><strong>\u5C06\u9879\u76EE\u5148\u53D1\u5E03</strong>\uFF0C\u5E76\u62F7\u8D1D\u5230\u5BF9\u5E94\u7684\u670D\u52A1\u5668\u4E0A\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355096.webp" alt="\u56FE\u7247"></p><p>\u8FD9\u91CC\u7528\u7684\u662F\u6211\u7684\u963F\u91CC\u4E91\u670D\u52A1\u5668\uFF0C\u62F7\u8D1D\u6587\u4EF6\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355902.webp" alt="\u56FE\u7247"></p></li><li><p><strong>\u4E00\u952E\u542F\u52A8</strong></p><p>\u5728docker-compose.yml\u6240\u5728\u7684\u76EE\u5F55\u4E0B\u6267\u884C\u5982\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker-compose up
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0B\u9762\u662F\u6267\u884Cdocker-compose up\u5185\u90E8\u6267\u884C\u7684\u6B65\u9AA4\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355595.webp" alt="\u56FE\u7247"></p><p>\u5148\u662F\u6784\u5EFA\u6211\u4EEC\u7684\u7A0B\u5E8F\uFF0C\u7136\u540E\u62C9\u53D6\u4F9D\u8D56\u7684Redis\u670D\u52A1\uFF0C\u5E76\u542F\u52A8\uFF0C\u6700\u540E\u542F\u52A8\u6211\u4EEC\u7684\u7A0B\u5E8F\u3002(\u6267\u884C\u987A\u5E8F\u548C\u4F9D\u8D56\u6709\u5173\u7CFB)\uFF1B\u542F\u52A8\u4E4B\u540E\u5C31\u53EF\u4EE5\u6839\u636Edocker-compose.yml\u6587\u4EF6\u4E2D\u6620\u5C04\u7684\u7AEF\u53E3\u8BBF\u95EE\u4E86\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355875.webp" alt="\u56FE\u7247"></p></li><li><p><strong>\u770B\u770B\u542F\u52A8\u7684\u5BB9\u5668\u540D</strong></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142355511.webp" alt="\u56FE\u7247">image-20211007165313310</p><p>\u901A\u8FC7<code>docker ps -n 2</code> \u67E5\u770B\u6700\u8FD1\u542F\u52A8\u7684\u5BB9\u5668\uFF0C\u5BB9\u5668\u7684\u540D\u5B57\u89C4\u5219\u662F\uFF1A<strong><code>\u76EE\u5F55\u540D_Compose\u6587\u4EF6\u4E2D\u5B9A\u4E49\u7684\u670D\u52A1\u540D_\u5E8F\u53F7</code></strong>\uFF0C\u90A3\u5C0F\u4F19\u4F34\u80AF\u5B9A\u4F1A\u597D\u5947\u4E3A\u4EC0\u4E48\u7A0B\u5E8F\u80FD\u901A\u8FC7myredis\u540D\u5B57\u8FDE\u63A5\u5230redis\uFF0C\u53EF\u4EE5\u901A\u8FC7<code>docker inspect composetest_myredis_1</code>\u67E5\u770B\u5BB9\u5668\u8BE6\u60C5\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142356579.webp" alt="\u56FE\u7247"></p><p>\u540C\u6837\u53EF\u4EE5\u67E5\u770B\u5230API\u670D\u52A1\u5BF9\u5E94\u7684\u5BB9\u5668\u4E5F\u662F\u7528\u7684composetest_default\u8FD9\u4E2A\u7F51\u7EDC\uFF0C\u8FD9\u4E2A\u7F51\u7EDC\u662F\u4E00\u4E2A\u6865\u63A5\u6A21\u5F0F\uFF0C\u53EF\u4EE5\u901A\u8FC7<code>docker network ls</code>\u770B\u5230\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142356141.webp" alt="\u56FE\u7247"></p></li><li><p><strong>docker compose\u5E38\u7528\u547D\u4EE4</strong></p><p><code>docker-compose build</code>:\u6784\u5EFA\u6216\u8005\u91CD\u65B0\u6784\u5EFA\u670D\u52A1</p><p><code>docker-compose up</code>:\u6784\u5EFA\u3001\u542F\u52A8\u5BB9\u5668\uFF0C\u52A0\u4E0A-d\u9009\u9879\u4EE3\u8868\u540E\u53F0\u8FD0\u884C\u3002</p><p><code>docker-compose ps</code>\uFF1A\u5217\u51FA\u6240\u6709\u901A\u8FC7Compose\u8FD0\u884C\u7684\u5BB9\u5668</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142356611.webp" alt="\u56FE\u7247"></p><p><code>docker-compose logs</code>\uFF1A\u6253\u5370\u76F8\u5173\u65E5\u5FD7\u4FE1\u606F</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142356935.webp" alt="\u56FE\u7247"></p><p><code>docker-compose stop/start/restart</code>d\uFF1A\u53EF\u4EE5\u6307\u5B9A\u670D\u52A1\u505C\u6B62\u3001\u5F00\u59CB\u548C\u91CD\u65B0\u542F\u52A8</p><p>docker-compose\u547D\u4EE4\u548Cdocker\u7684\u547D\u4EE4\u57FA\u672C\u662F\u4E00\u6837\u7684\u3002</p></li><li><p><strong>docker-compose.yml\u6587\u4EF6\u5185\u5BB9\u5E38\u7528\u5C5E\u6027</strong></p><p><strong>version</strong>\uFF1A\u6307\u5B9A docker-compose.yml \u6587\u4EF6\u7684\u7248\u672C\uFF0C\u4E00\u822C\u90FD\u662F\u7528version 3\uFF1B</p><p><strong>services</strong>\uFF1A\u5B9A\u4E49\u591A\u4E2A\u5BB9\u5668\u96C6\u5408\uFF0C\u6709\u591A\u5C11\u5199\u591A\u5C11\uFF1B</p><p><strong>build</strong>\uFF1A\u6784\u5EFA\u955C\u50CF\uFF0C\u548C<code>docker build</code>\u4E00\u6837\u529F\u6548\uFF1B</p><p><strong>environment</strong>\uFF1A\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u548CDockerfile\u4E2DENV \u5173\u952E\u5B57\u529F\u80FD\u4E00\u6837\uFF1B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF
environment:
  RACK_ENV: development
  SHOW: &#39;true&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>expose</strong>\uFF1A\u66B4\u9732\u7AEF\u53E3\uFF0C\u548CDockerfile\u4E2D\u7684EXPOSE \u5173\u952E\u5B57\u529F\u80FD\u4E00\u6837\uFF1B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>expose:
  - &quot;80&quot;
  - &quot;9999&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ports</strong>\uFF1A\u914D\u7F6E\u7AEF\u53E3\u6620\u5C04\uFF0C\u548C<code>docker run -p</code>\u4E00\u6837\u529F\u6548</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ports:
 - &quot;8080:80&quot;
 - &quot;6379:6379&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>volumes</strong>\uFF1A\u6307\u5B9A\u5377\u6302\u8F7D\u8DEF\u5F84\uFF0C\u4E0EDockerifle\u4E2D\u7684VOLUME \u5173\u952E\u5B57\u529F\u80FD\u4E00\u6837</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>volumes:
  - /var/lib/mysql
  - /opt/data:/var/lib/mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>command</strong>\uFF1A\u8986\u76D6\u5BB9\u5668\u542F\u52A8\u540E\u9ED8\u8BA4\u6267\u884C\u7684\u547D\u4EE4\uFF0C\u548CDockerfile\u6587\u4EF6\u4E2D\u7684CMD\u547D\u4EE4\u4E00\u6837\uFF1B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>command: bundle exec thin -p 3000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>image</strong>\uFF1A\u6307\u5B9A\u8981\u7528\u7684\u955C\u50CF\uFF0C\u6784\u5EFA\u7684\u65F6\u5019\u4F1A\u62C9\u53D6\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u6307\u5B9A\u8981\u4F7F\u7528redis\u955C\u50CF
image: redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>\u4E0A\u9762\u5217\u51FA\u4E86\u4E00\u4E9B\u6BD4\u8F83\u5E38\u7528\u7684\uFF0C\u5177\u4F53\u7684\u53EF\u4EE5\u53C2\u8003\u5B98\u7F51\uFF1Ahttps://docs.docker.com/compose/compose-file/compose-file-v3/</p><p>\u4EE3\u7801\u5730\u5740\u5982\u4E0B\uFF1Ahttps://gitee.com/CodeZoe/microservies-demo/tree/main/DockerComposeDemo</p><h1 id="\u8D44\u6599" tabindex="-1"><a class="header-anchor" href="#\u8D44\u6599" aria-hidden="true">#</a> \u8D44\u6599</h1><p>\u6765\u81EA\u5FAE\u4FE1\u516C\u4F17\u53F7\u3010Code\u7EFC\u827A\u5708\u3011</p>`,6);function V(S,Y){const s=d("ExternalLinkIcon");return n(),o("div",null,[c,e("ul",null,[e("li",null,[l,m,g,e("p",null,[u,b,h,e("a",v,[k,i(s)]),x]),w]),_]),D,e("p",null,[R,e("a",N,[f,i(s)]),A]),q,e("ul",null,[G,e("li",null,[Z,y,C,e("p",null,[I,e("a",E,[O,i(s)]),T]),P]),M]),L])}const H=a(p,[["render",V],["__file","base.html.vue"]]);export{H as default};
