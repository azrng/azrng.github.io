import{_ as e,o as t,c as i,a as d}from"./app.565765f9.js";const l={},n=d(`<h1 id="\u5236\u4F5C\u7CBE\u7B80\u7684\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u5236\u4F5C\u7CBE\u7B80\u7684\u955C\u50CF" aria-hidden="true">#</a> \u5236\u4F5C\u7CBE\u7B80\u7684\u955C\u50CF</h1><h1 id="\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u4ECB\u7ECD" aria-hidden="true">#</a> \u4ECB\u7ECD</h1><p>\u524D\u6BB5\u65F6\u95F4\u7F51\u6613\u8702\u5DE2\u66FE\u7ECF\u63A8\u51FA\u8702\u5DE2 <code>Logo</code> T\u6064\uFF0C\u7528\u7684\u6B63\u662F Docker \u955C\u50CF\u5236\u4F5C\uFF0C\u6700\u795E\u5947\u7684\u662F\uFF0C\u5B83\u6700\u7EC8\u7684\u955C\u50CF\u5927\u5C0F\u53EA\u6709 <code>585</code> \u5B57\u8282\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker images | grep hub.c.163.com/public/logo
REPOSITORY                      TAG           IMAGE ID         CREATED       SIZE
hub.c.163.com/public/logo       latest        6fbdd13cd204     11 days ago   585 B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6709\u4E9B\u955C\u50CF\u90FD\u4E0D\u662F\u6211\u4EEC\u81EA\u5DF1\u6765\u6253\u5305\u7684\uFF08\u6BD4\u5982\u4E0B\u8F7D\u516C\u5171\u955C\u50CF\uFF09\uFF0C\u90A3\u662F\u5426\u6709\u4E00\u4E9B\u901A\u7528\u7684\u7CBE\u7B80 Docker \u955C\u50CF\u7684\u624B\u6BB5\u5462\uFF1F\u7B54\u6848\u662F\u80AF\u5B9A\u7684\uFF0C\u751A\u81F3\u6709\u7684\u955C\u50CF\u53EF\u4EE5\u7CBE\u7B80 98%\u3002\u7CBE\u7B80\u955C\u50CF\u5927\u5C0F\u7684\u597D\u5904\u4E0D\u8A00\u800C\u55BB\uFF0C\u65E2\u8282\u7701\u4E86\u5B58\u50A8\u7A7A\u95F4\uFF0C\u53C8\u80FD\u8282\u7701\u5E26\u5BBD\uFF0C\u52A0\u5FEB\u4F20\u8F93\u7B49\u3002\u90A3\u597D\uFF0C\u63A5\u4E0B\u6765\u5C31\u8BF7\u8DDF\u968F\u6211\u6765\u5B66\u4E60\u600E\u4E48\u5236\u4F5C\u7CBE\u7B80 Docker \u955C\u50CF\u3002</p><h1 id="\u955C\u50CF\u5C42-layers" tabindex="-1"><a class="header-anchor" href="#\u955C\u50CF\u5C42-layers" aria-hidden="true">#</a> \u955C\u50CF\u5C42(Layers)</h1><p>\u5728\u5F00\u59CB\u5236\u4F5C\u955C\u50CF\u4E4B\u524D\uFF0C\u9996\u5148\u4E86\u89E3\u4E0B\u955C\u50CF\u7684\u539F\u7406\uFF0C\u800C\u8FD9\u5176\u4E2D\u6700\u91CD\u8981\u7684\u6982\u5FF5\u5C31\u662F<code>\u955C\u50CF\u5C42(Layers)</code>\u3002\u955C\u50CF\u5C42\u4F9D\u8D56\u4E8E\u4E00\u7CFB\u5217\u7684\u5E95\u5C42\u6280\u672F\uFF0C\u6BD4\u5982\u6587\u4EF6\u7CFB\u7EDF(filesystems)\u3001\u5199\u65F6\u590D\u5236(copy-on-write)\u3001\u8054\u5408\u6302\u8F7D(union mounts)\u7B49\uFF0C\u5E78\u8FD0\u7684\u662F\u4F60\u53EF\u4EE5\u5728\u5F88\u591A\u5730\u65B9\u5B66\u4E60\u5230<strong>\u8FD9\u4E9B\u6280\u672F</strong>[1]\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u518D\u8D58\u8FF0\u6280\u672F\u7EC6\u8282\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202111142357144.webp" alt="\u56FE\u7247"></p><p>\u603B\u7684\u6765\u8BF4\uFF0C\u4F60\u6700\u9700\u8981\u8BB0\u4F4F\u8FD9\u70B9\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u5728 Dockerfile \u4E2D\uFF0C \u6BCF\u4E00\u6761\u6307\u4EE4\u90FD\u4F1A\u521B\u5EFA\u4E00\u4E2A\u955C\u50CF\u5C42\uFF0C\u7EE7\u800C\u4F1A\u589E\u52A0\u6574\u4F53\u955C\u50CF\u7684\u5927\u5C0F\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E3E\u4F8B\u6765\u8BF4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>FROM busybox
RUN mkdir /tmp/foo
RUN dd if=/dev/zero of=/tmp/foo/bar bs=1048576 count=100
RUN rm /tmp/foo/bar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A Dockerfile \u5E72\u4E86\u51E0\u4EF6\u4E8B\uFF1A</p><ol><li>\u57FA\u4E8E\u4E00\u4E2A\u5B98\u65B9\u7684\u57FA\u7840\u955C\u50CF busybox(\u53EA\u67091M\u591A)</li><li>\u521B\u5EFA\u4E00\u4E2A\u6587\u4EF6\u5939(/tmp/foo)\u548C\u4E00\u4E2A\u6587\u4EF6(bar)\uFF0C\u8BE5\u6587\u4EF6\u5206\u914D\u4E86100M\u5927\u5C0F</li><li>\u518D\u628A\u8FD9\u4E2A\u5927\u6587\u4EF6\u5220\u9664</li></ol><p>\u5B9E\u9645\u4E0A\u5B83\u6700\u7EC8\u4EC0\u4E48\u4E5F\u6CA1\u505A\uFF0C\u6211\u4EEC\u628A\u5B83\u6784\u5EFA\u6210\u955C\u50CF\uFF08\u6784\u5EFA\u53EF\u4EE5\u53C2\u8003<strong>\u4E00\u671F</strong>[2]\uFF09\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker build -t busybox:test .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u518D\u8BA9\u6211\u4EEC\u6765\u5BF9\u6BD4\u4E0B\u539F\u751F\u7684 busybox \u955C\u50CF\u5927\u5C0F\u548C\u6211\u4EEC\u751F\u6210\u7684\u955C\u50CF\u5927\u5C0F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker images | grep busybox
busybox    test     896c63dbdb96    2 seconds ago    106 MB
busybox    latest   2b8fd9751c4c    9 weeks ago      1.093 MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u51FA\u4E4E\u610F\u6599\u7684\u662F\uFF0C\u5374\u751F\u6210\u4E86 106 MB \u7684\u955C\u50CF\u3002</p><p>\u591A\u51FA\u4E86 100 M\uFF0C\u8FD9\u662F\u4E3A\u4F55\uFF1F\u8FD9\u70B9\u548C Git \u7C7B\u4F3C\uFF08\u90FD\u7528\u5230\u4E86Copy-On-Write\u6280\u672F\uFF09\uFF0C\u6211\u7528 git \u505A\u4E86\u5982\u4E0B\u4E24\u6B21\u63D0\u4EA4\uFF08\u6DFB\u52A0\u4E86\u53C8\u5220\u9664\uFF09\uFF0C\u8BF7\u95EE <code>A_VERY_LARGE_FILE</code> \u8FD8\u5728 git \u4ED3\u5E93\u4E2D\u5417\uFF1F</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ git add  A_VERY_LARGE_FILE
$ git commit
$ git rm  A_VERY_LARGE_FILE
$ git commit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B54\u6848\u662F:\u5728\u7684\uFF0C\u5E76\u4E14\u4F1A\u5360\u7528\u4ED3\u5E93\u7684\u5927\u5C0F\u3002Git \u4F1A\u4FDD\u5B58\u6BCF\u4E00\u6B21\u63D0\u4EA4\u7684\u6587\u4EF6\u7248\u672C\uFF0C\u800C Dockerfile \u4E2D\u6BCF\u4E00\u6761\u6307\u4EE4\u90FD\u53EF\u80FD\u589E\u52A0\u6574\u4F53\u955C\u50CF\u7684\u5927\u5C0F\uFF0C\u5373\u4F7F\u5B83\u6700\u7EC8\u4EC0\u4E48\u4E8B\u60C5\u90FD\u6CA1\u505A\u3002</p><h1 id="\u5236\u4F5C\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u5236\u4F5C\u6B65\u9AA4" aria-hidden="true">#</a> \u5236\u4F5C\u6B65\u9AA4</h1><p>\u4E86\u89E3\u4E86\u955C\u50CF\u5C42\u77E5\u8BC6\uFF0C\u6709\u52A9\u4E8E\u6211\u4EEC\u63A5\u4E0B\u6765\u5236\u4F5C\u7CBE\u7B80\u955C\u50CF\u3002\u8FD9\u91CC\u5F00\u59CB\uFF0C\u4EE5\u6700\u5E38\u7528\u7684\u5F00\u6E90\u7F13\u5B58\u8F6F\u4EF6 <code>Redis</code> \u4E3A\u4F8B\uFF0C\u4ECE\u4E00\u6B65\u6B65\u8BD5\u9A8C\uFF0C\u6765\u4ECB\u7ECD\u5982\u4F55\u5236\u4F5C\u66F4\u7CBE\u7B80\u7684 Docker \u955C\u50CF\u3002</p><h2 id="lab-1-\u521D\u59CB\u5316\u6784\u5EFA-redis-\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#lab-1-\u521D\u59CB\u5316\u6784\u5EFA-redis-\u955C\u50CF" aria-hidden="true">#</a> lab-1\uFF1A\u521D\u59CB\u5316\u6784\u5EFA Redis \u955C\u50CF</h2><p><strong>\u76F4\u63A5\u4E0A <code>Dockerfile</code> \uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>FROM ubuntu:trusty
ENV VER     3.0.0
ENV TARBALL http://download.redis.io/releases/redis-$VER.tar.gz
# ==&gt; Install curl and helper tools...
RUN apt-get update
RUN apt-get install -y  curl make gcc
# ==&gt; Download, compile, and install...
RUN curl -L $TARBALL | tar zxv
WORKDIR  redis-$VER
RUN make
RUN make install
#...
# ==&gt; Clean up...
WORKDIR /
RUN apt-get remove -y --auto-remove curl make gcc
RUN apt-get clean
RUN rm -rf /var/lib/apt/lists/*  /redis-$VER
#...
CMD [&quot;redis-server&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u5408\u6CE8\u91CA\uFF0C\u8BFB\u8D77\u6765\u5E76\u4E0D\u56F0\u96BE\uFF0C\u7528\u5230\u7684\u90FD\u662F\u5E38\u89C4\u7684\u51E0\u4E2A\u547D\u4EE4\uFF0C\u7B80\u8981\u4ECB\u7ECD\u5982\u4E0B\uFF1A</p><ul><li>FROM\uFF1A\u9876\u5934\u5199\uFF0C\u6307\u5B9A\u4E00\u4E2A\u57FA\u7840\u955C\u50CF\uFF0C\u6B64\u5904\u57FA\u4E8E <code>ubuntu:trusty</code></li><li>ENV\uFF1A\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u8FD9\u91CC\u8BBE\u7F6E\u4E86 <code>VER</code> \u548C <code>TARBALL</code> \u4E24\u4E2A\u73AF\u5883\u53D8\u91CF</li><li>RUN\uFF1A\u6700\u5E38\u7528\u7684 Dockerfile \u6307\u4EE4\uFF0C\u7528\u4E8E\u8FD0\u884C\u5404\u79CD\u547D\u4EE4\uFF0C\u8FD9\u91CC\u8C03\u7528\u4E86 8 \u6B21 RUN \u6307\u4EE4</li><li>WORKDIR\uFF1A\u6307\u5B9A\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u76F8\u5F53\u4E8E\u6307\u4EE4 <code>cd</code></li><li>CMD\uFF1A\u6307\u5B9A\u955C\u50CF\u9ED8\u8BA4\u6267\u884C\u7684\u547D\u4EE4\uFF0C\u6B64\u5904\u9ED8\u8BA4\u6267\u884C redis-server \u547D\u4EE4\u6765\u542F\u52A8 redis</li></ul><p><strong>\u6267\u884C\u6784\u5EFA\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker build  -t redis:lab-1  .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><em>\u6CE8\uFF1A\u56FD\u5185\u7F51\u7EDC\uFF0C\u66F4\u65B0\u4E0B\u8F7D\u53EF\u80FD\u4F1A\u8F83\u6162</em></p><p><strong>\u67E5\u770B\u5927\u5C0F\uFF1A</strong></p><table><thead><tr><th style="text-align:center;">Lab</th><th style="text-align:left;">iamge</th><th style="text-align:left;">Base</th><th style="text-align:center;">Lang</th><th style="text-align:center;">.red[*]</th><th style="text-align:right;">Size (MB)</th><th style="text-align:left;">Memo</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>ubuntu</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">347.3</td><td style="text-align:left;">base ubuntu</td></tr></tbody></table><p>\u52A8\u8F84\u5C31\u6709 300\u591A M \u7684\u5927\u5C0F\uFF0C\u4E0D\u80FD\u5FCD\uFF0C\u4E0B\u9762\u6211\u4EEC\u5F00\u59CB\u4E00\u6B65\u6B65\u4F18\u5316\u3002</p><h3 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h3><h2 id="lab-2-\u4F18\u5316\u57FA\u7840\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#lab-2-\u4F18\u5316\u57FA\u7840\u955C\u50CF" aria-hidden="true">#</a> lab-2\uFF1A\u4F18\u5316\u57FA\u7840\u955C\u50CF</h2><p><strong>\u7CBE\u7B801\uFF1A\u9009\u7528\u66F4\u5C0F\u7684\u57FA\u7840\u955C\u50CF\u3002</strong></p><p>\u5E38\u7528\u7684 Linux \u7CFB\u7EDF\u955C\u50CF\u4E00\u822C\u6709 <code>ubuntu</code>\u3001<code>centos</code>\u3001<code>debian</code>\uFF0C\u5176\u4E2D<code>debian</code> \u66F4\u8F7B\u91CF\uFF0C\u800C\u4E14\u591F\u7528\uFF0C\u5BF9\u6BD4\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>REPOSITORY          TAG        IMAGE ID         VIRTUAL SIZE
---------------     ------     ------------     ------------
centos              7          214a4932132a     215.7 MB
centos              6          f6808a3e4d9e     202.6 MB
ubuntu              trusty     d0955f21bf24     188.3 MB
ubuntu              precise    9c5e4be642b7     131.9 MB
debian              jessie     65688f7c61c4     122.8 MB
debian              wheezy     1265e16d0c28     84.96 MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u66FF\u6362 <code>debian:jessie</code> \u4F5C\u4E3A\u6211\u4EEC\u7684\u57FA\u7840\u955C\u50CF\u3002</p><p><strong>\u4F18\u5316 Dockerfile\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>FROM debian:jessie

#...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6267\u884C\u6784\u5EFA\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker build  -t redis:lab-2  .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>\u67E5\u770B\u5927\u5C0F\uFF1A</strong></p><table><thead><tr><th style="text-align:center;">Lab</th><th style="text-align:left;">image</th><th style="text-align:left;">Base</th><th style="text-align:center;">Lang</th><th style="text-align:center;">.red[*]</th><th style="text-align:right;">Size (MB)</th><th style="text-align:left;">Memo</th></tr></thead><tbody><tr><td style="text-align:center;">01</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>ubuntu</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">347.3</td><td style="text-align:left;">base ubuntu</td></tr><tr><td style="text-align:center;">02</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">305.7</td><td style="text-align:left;">base debian</td></tr></tbody></table><p>\u51CF\u5C11\u4E8642M\uFF0C\u7A0D\u6709\u6210\u6548\uFF0C\u4F46\u5E76\u4E0D\u660E\u663E\u3002\u7EC6\u5FC3\u7684\u540C\u5B66\u5E94\u8BE5\u53D1\u73B0\uFF0C\u53EA\u6709 122 MB \u7684 <code>debian</code> \u57FA\u7840\u955C\u50CF\uFF0C\u6784\u5EFA\u540E\u589E\u52A0\u5230\u4E86 305 MB\uFF0C\u770B\u6765\u8FD9\u91CC\u9762\u80AF\u5B9A\u6709\u4F18\u5316\u7684\u7A7A\u95F4\uFF0C\u5982\u4F55\u4F18\u5316\u5C31\u8981\u7528\u5230\u6211\u4EEC\u5F00\u5934\u8BF4\u5230\u7684 <code>Image Layer</code> \u77E5\u8BC6\u4E86\u3002</p><h2 id="lab-3-\u4E32\u8054-dockerfile-\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#lab-3-\u4E32\u8054-dockerfile-\u6307\u4EE4" aria-hidden="true">#</a> lab-3\uFF1A\u4E32\u8054 Dockerfile \u6307\u4EE4</h2><p><strong>\u7CBE\u7B802\uFF1A\u4E32\u8054\u4F60\u7684 Dockerfile \u6307\u4EE4\uFF08\u4E00\u822C\u662F <code>RUN</code> \u6307\u4EE4\uFF09\u3002</strong></p><p>Dockerfile \u4E2D\u7684 RUN \u6307\u4EE4\u901A\u8FC7 <code>&amp;&amp;</code> \u548C <code>/</code> \u652F\u6301\u5C06\u547D\u4EE4\u4E32\u8054\u5728\u4E00\u8D77\uFF0C\u6709\u65F6\u80FD\u8FBE\u5230\u610F\u60F3\u4E0D\u5230\u7684\u7CBE\u7B80\u6548\u679C\u3002</p><p><strong>\u4F18\u5316 Dockerfile\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>FROM debian:jessie

ENV VER     3.0.0
ENV TARBALL http://download.redis.io/releases/redis-$VER.tar.gz


RUN echo &quot;==&gt; Install curl and helper tools...&quot;  &amp;&amp; \\
    apt-get update                      &amp;&amp; \\
    apt-get install -y  curl make gcc   &amp;&amp; \\
    \\
    echo &quot;==&gt; Download, compile, and install...&quot;  &amp;&amp; \\
    curl -L $TARBALL | tar zxv  &amp;&amp; \\
    cd redis-$VER               &amp;&amp; \\
    make                        &amp;&amp; \\
    make install                &amp;&amp; \\
    ...
    echo &quot;==&gt; Clean up...&quot;  &amp;&amp; \\
    apt-get remove -y --auto-remove curl make gcc  &amp;&amp; \\
    apt-get clean                                  &amp;&amp; \\
    rm -rf /var/lib/apt/lists/*  /redis-$VER

#...
CMD [&quot;redis-server&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6784\u5EFA\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker build  -t redis:lab-3  .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u770B\u5927\u5C0F\uFF1A</p><table><thead><tr><th style="text-align:center;">Lab</th><th style="text-align:left;">Image</th><th style="text-align:left;">Base</th><th style="text-align:center;">Lang</th><th style="text-align:center;">.red[*]</th><th style="text-align:right;">Size (MB)</th><th style="text-align:left;">Memo</th></tr></thead><tbody><tr><td style="text-align:center;">01</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>ubuntu</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">347.3</td><td style="text-align:left;">base ubuntu</td></tr><tr><td style="text-align:center;">02</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">305.7</td><td style="text-align:left;">base debian</td></tr><tr><td style="text-align:center;">03</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">151.4</td><td style="text-align:left;">cmd chaining</td></tr></tbody></table><p>\u54C7\uFF01\u4E00\u4E0B\u5B50\u51CF\u5C11\u4E86 50%\uFF0C\u6548\u679C\u660E\u663E\u554A\uFF01\u8FD9\u662F\u6700\u5E38\u7528\u7684\u4E00\u4E2A\u7CBE\u7B80\u624B\u6BB5\u4E86\u3002</p><h2 id="lab-4-\u538B\u7F29\u4F60\u7684\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#lab-4-\u538B\u7F29\u4F60\u7684\u955C\u50CF" aria-hidden="true">#</a> lab-4\uFF1A\u538B\u7F29\u4F60\u7684\u955C\u50CF</h2><p><strong>\u4F18\u53163\uFF1A\u8BD5\u7740\u7528\u547D\u4EE4\u6216\u5DE5\u5177\u538B\u7F29\u4F60\u7684\u955C\u50CF\u3002</strong></p><p>docker \u81EA\u5E26\u7684\u4E00\u4E9B\u547D\u4EE4\u8FD8\u80FD\u534F\u52A9\u538B\u7F29\u955C\u50CF\uFF0C\u6BD4\u5982 <code>export</code> \u548C <code>import</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker run -d redis:lab-3
$ docker export 71b1c0ad0a2b | docker import - redis:lab-4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F46\u9EBB\u70E6\u7684\u662F\u9700\u8981\u5148\u5C06\u5BB9\u5668\u8FD0\u884C\u8D77\u6765\uFF0C\u800C\u4E14\u8FD9\u4E2A\u8FC7\u7A0B\u4E2D\u4F60\u4F1A\u4E22\u5931\u955C\u50CF\u539F\u6709\u7684\u4E00\u4E9B\u4FE1\u606F\uFF0C\u6BD4\u5982\uFF1A\u5BFC\u51FA\u7AEF\u53E3\uFF0C\u73AF\u5883\u53D8\u91CF\uFF0C\u9ED8\u8BA4\u6307\u4EE4\u3002</p><p>\u6240\u4EE5\u4E00\u822C\u901A\u8FC7\u547D\u4EE4\u884C\u6765\u7CBE\u7B80\u955C\u50CF\u90FD\u662F\u5B9E\u9A8C\u6027\u7684\uFF0C\u90A3\u4E48\u8FD9\u91CC\u518D\u63A8\u8350\u4E00\u4E2A\u5C0F\u5DE5\u5177\uFF1A<strong>docker-squash</strong>[3]\u3002\u7528\u8D77\u6765\u66F4\u7B80\u5355\u65B9\u4FBF\uFF0C\u5E76\u4E14\u4E0D\u4F1A\u4E22\u5931\u539F\u6709\u955C\u50CF\u7684\u81EA\u5E26\u4FE1\u606F\u3002</p><p><strong>\u4E0B\u8F7D\u5B89\u88C5\uFF1A</strong></p><p>https://github.com/jwilder/docker-squash#installation</p><p><strong>\u538B\u7F29\u64CD\u4F5C\uFF1A</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker save redis:lab-3 \\
  | sudo docker-squash -verbose -t redis:lab-4  \\
  | docker load
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>\u6CE8\uFF1A\u8BE5\u5DE5\u5177\u5728 Mac \u4E0B\u5E76\u4E0D\u597D\u4F7F\uFF0C\u8BF7\u5728 Linux \u4E0B\u4F7F\u7528</em></p><p><strong>\u5BF9\u6BD4\u5927\u5C0F\uFF1A</strong></p><table><thead><tr><th style="text-align:center;">Lab</th><th style="text-align:left;">Image</th><th style="text-align:left;">Base</th><th style="text-align:center;">PL</th><th style="text-align:center;">.red[*]</th><th style="text-align:right;">Size (MB)</th><th style="text-align:left;">Memo</th></tr></thead><tbody><tr><td style="text-align:center;">01</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>ubuntu</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">347.3</td><td style="text-align:left;">base ubuntu</td></tr><tr><td style="text-align:center;">02</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">305.7</td><td style="text-align:left;">base debian</td></tr><tr><td style="text-align:center;">03</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">151.4</td><td style="text-align:left;">cmd chaining</td></tr><tr><td style="text-align:center;">04</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">151.4</td><td style="text-align:left;">docker-squash</td></tr></tbody></table><p>\u597D\u5427\uFF0C\u4ECE\u8FD9\u91CC\u770B\u8D77\u6765\u5E76\u6CA1\u6709\u592A\u5927\u4F5C\u7528\uFF0C\u6240\u4EE5\u6211\u53EA\u80FD\u8BF4<code>\u8BD5\u7740</code>\uFF0C\u800C\u4E0D\u8981\u62A5\u592A\u5927\u671F\u671B\u3002</p><h2 id="lab-5-\u4F7F\u7528\u6700\u7CBE\u7B80\u7684-base-image" tabindex="-1"><a class="header-anchor" href="#lab-5-\u4F7F\u7528\u6700\u7CBE\u7B80\u7684-base-image" aria-hidden="true">#</a> lab-5\uFF1A\u4F7F\u7528\u6700\u7CBE\u7B80\u7684 base image</h2><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="\u56FE\u7247"></p><p>\u4F7F\u7528 <code>scratch</code> \u6216\u8005 <code>busybox</code> \u4F5C\u4E3A\u57FA\u7840\u955C\u50CF\u3002</p><p>\u5173\u4E8E scratch\uFF1A</p><ul><li>\u4E00\u4E2A\u7A7A\u955C\u50CF\uFF0C\u53EA\u80FD\u7528\u4E8E\u6784\u5EFA\u955C\u50CF\uFF0C\u901A\u8FC7 <code>FROM scratch</code></li><li>\u5728\u6784\u5EFA\u4E00\u4E9B\u57FA\u7840\u955C\u50CF\uFF0C\u6BD4\u5982 <code>debian</code> \u3001 <code>busybox</code>\uFF0C\u975E\u5E38\u6709\u7528</li><li>\u7528\u4E8E\u6784\u5EFA\u8D85\u5C11\u955C\u50CF\uFF0C\u6BD4\u5982\u6784\u5EFA\u4E00\u4E2A\u5305\u542B\u6240\u6709\u5E93\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6</li></ul><p>\u5173\u4E8E <code>busybox</code></p><ul><li>\u53EA\u6709 1~5M \u7684\u5927\u5C0F</li><li>\u5305\u542B\u4E86\u5E38\u7528\u7684 UNIX \u5DE5\u5177</li><li>\u975E\u5E38\u65B9\u4FBF\u6784\u5EFA\u5C0F\u955C\u50CF</li></ul><p>\u8FD9\u4E9B\u8D85\u5C0F\u7684\u57FA\u7840\u955C\u50CF\uFF0C\u7ED3\u5408\u80FD\u751F\u6210\u9759\u6001\u539F\u751F ELF \u6587\u4EF6\u7684\u7F16\u8BD1\u8BED\u8A00\uFF0C\u6BD4\u5982C/C++\uFF0C\u6BD4\u5982 Go\uFF0C\u7279\u522B\u65B9\u4FBF\u6784\u5EFA\u8D85\u5C0F\u7684\u955C\u50CF\u3002</p><p>cloudcomb-logo\uFF08C\u8BED\u8A00\u5F00\u53D1\uFF09 \u5C31\u662F\u7528\u5230\u4E86\u8BE5\u539F\u7406\uFF0C\u624D\u80FD\u6784\u5EFA\u51FA 585 \u5B57\u8282\u7684\u955C\u50CF\u3002</p><p><code>redis</code> \u540C\u6837\u4F7F\u7528 C\u8BED\u8A00 \u5F00\u53D1\uFF0C\u770B\u6765\u4E5F\u6709\u5F88\u5927\u7684\u4F18\u5316\u7A7A\u95F4\uFF0C\u4E0B\u9762\u8FD9\u4E2A\u5B9E\u9A8C\uFF0C\u8BA9\u6211\u4EEC\u4ECB\u7ECD\u5177\u4F53\u7684\u64CD\u4F5C\u65B9\u6CD5\u3002</p><h2 id="lab-6-\u63D0\u53D6\u52A8\u6001\u94FE\u63A5\u7684-so-\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#lab-6-\u63D0\u53D6\u52A8\u6001\u94FE\u63A5\u7684-so-\u6587\u4EF6" aria-hidden="true">#</a> lab-6\uFF1A\u63D0\u53D6\u52A8\u6001\u94FE\u63A5\u7684 .so \u6587\u4EF6</h2><p>\u5B9E\u9A8C\u4E0A\u4E0B\u6587\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ cat /etc/os-release

NAME=&quot;Ubuntu&quot;
VERSION=&quot;14.04.2 LTS, Trusty Tahr&quot;
$ uname -a
Linux localhost 3.13.0-46-generic #77-Ubuntu SMP
Mon Mar 2 18:23:39 UTC 2015
x86_64 x86_64 x86_64 GNU/Linux
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9686\u91CD\u63A8\u51FA ldd\uFF1A\u6253\u5370\u5171\u4EAB\u7684\u4F9D\u8D56\u5E93</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ ldd  redis-3.0.0/src/redis-server
    linux-vdso.so.1 =&gt;  (0x00007fffde365000)
    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007f307d5aa000)
    libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f307d38c000)
    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f307cfc6000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f307d8b9000)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C06\u6240\u6709\u9700\u8981\u7684 .so \u6587\u4EF6\u6253\u5305\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ tar ztvf rootfs.tar.gz
4485167  2015-04-21 22:54  usr/local/bin/redis-server
1071552  2015-02-25 16:56  lib/x86_64-linux-gnu/libm.so.6
 141574  2015-02-25 16:56  lib/x86_64-linux-gnu/libpthread.so.0
1840928  2015-02-25 16:56  lib/x86_64-linux-gnu/libc.so.6
 149120  2015-02-25 16:56  lib64/ld-linux-x86-64.so.2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u518D\u5236\u4F5C\u6210 Dockerfile\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>FROM scratch
ADD  rootfs.tar.gz  /
COPY redis.conf     /etc/redis/redis.conf
EXPOSE 6379
CMD [&quot;redis-server&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u6784\u5EFA\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker build  -t redis-05  .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u770B\u5927\u5C0F\uFF1A</p><table><thead><tr><th style="text-align:center;">Lab</th><th style="text-align:left;"></th><th style="text-align:left;">Base</th><th style="text-align:center;">PL</th><th style="text-align:center;">.red[*]</th><th style="text-align:right;">Size (MB)</th><th style="text-align:left;">Memo</th></tr></thead><tbody><tr><td style="text-align:center;">01</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>ubuntu</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">347.3</td><td style="text-align:left;">base ubuntu</td></tr><tr><td style="text-align:center;">02</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">305.7</td><td style="text-align:left;">base debian</td></tr><tr><td style="text-align:center;">03</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">151.4</td><td style="text-align:left;">cmd chaining</td></tr><tr><td style="text-align:center;">04</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>debian</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">151.4</td><td style="text-align:left;">docker-squash</td></tr><tr><td style="text-align:center;">05</td><td style="text-align:left;">redis</td><td style="text-align:left;"><code>scratch</code></td><td style="text-align:center;">C</td><td style="text-align:center;">dyn</td><td style="text-align:right;">7.73</td><td style="text-align:left;">rootfs: .so</td></tr></tbody></table><p>\u54C7\uFF01\u663E\u8457\u63D0\u9AD8\u5566\uFF01</p><p>\u6D4B\u8BD5\u4E00\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker run -d --name redis-05 redis-05

$ redis-cli  -h  \\
  $(docker inspect -f &#39;{{.NetworkSettings.IPAddress}}&#39; redis-05)

$ redis-benchmark  -h  \\
  $(docker inspect -f &#39;{{.NetworkSettings.IPAddress}}&#39; redis-05)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u603B\u7ED3\u4E00\u4E0B\uFF1A</p><ol><li>\u7528 <code>ldd</code> \u67E5\u51FA\u6240\u9700\u7684 .so \u6587\u4EF6</li><li>\u5C06\u6240\u6709\u4F9D\u8D56\u538B\u7F29\u6210 <code>rootfs.tar</code> \u6216 <code>rootfs.tar.gz</code>\uFF0C\u4E4B\u540E\u6253\u8FDB <code>scratch</code> \u57FA\u7840\u955C\u50CF</li></ol><h2 id="lab-7-\u4E3A-go-\u5E94\u7528\u6784\u5EFA\u7CBE\u7B80\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#lab-7-\u4E3A-go-\u5E94\u7528\u6784\u5EFA\u7CBE\u7B80\u955C\u50CF" aria-hidden="true">#</a> lab-7\uFF1A\u4E3A Go \u5E94\u7528\u6784\u5EFA\u7CBE\u7B80\u955C\u50CF</h2><p>Go \u8BED\u8A00\u5929\u751F\u5C31\u65B9\u4FBF\u7528\u6765\u6784\u5EFA\u7CBE\u7B80\u955C\u50CF\uFF0C\u5F97\u76CA\u4E8E\u5B83\u80FD\u65B9\u4FBF\u7684\u6253\u5305\u6210\u5305\u542B\u9759\u6001\u94FE\u63A5\u7684\u4E8C\u8FDB\u5236\u6587\u4EF6\u3002</p><p>\u6253\u4E2A\u6BD4\u65B9\uFF0C\u4F60\u6709\u4E00\u4E2A 4 MB \u5927\u5C0F\u7684\u5305\u542B\u9759\u6001\u94FE\u63A5\u7684 Go \u4E8C\u8FDB\u5236\uFF0C\u5E76\u4E14\u5C06\u5176\u6253\u8FDB scratch \u8FD9\u6837\u7684\u57FA\u7840\u955C\u50CF\uFF0C\u4F60\u5F97\u5230\u7684\u955C\u50CF\u5927\u5C0F\u4E5F\u53EA\u6709\u533A\u533A\u7684 4 MB\u3002\u8FD9\u53EF\u662F\u5305\u542B\u540C\u6837\u529F\u80FD\u7684 Ruby \u7A0B\u5E8F\u7684\u767E\u5206\u4E4B\u4E00\u554A\u3002</p><p>\u8FD9\u91CC\u518D\u7ED9\u5927\u5BB6\u4ECB\u7ECD\u4E00\u4E2A\u975E\u5E38\u597D\u7528\u5F00\u6E90\u7684 Go \u7F16\u8BD1\u5DE5\u5177\uFF1Agolang-builder\uFF0C\u5E76\u7ED9\u5927\u5BB6\u5B9E\u9645\u6F14\u793A\u4E00\u4E2A\u4F8B\u5B50</p><p>\u7A0B\u5E8F\u4EE3\u7801\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>package main // import &quot;github.com/CenturyLinkLabs/hello&quot;

import &quot;fmt&quot;

func main() {
    fmt.Println(&quot;Hello World&quot;)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Dockerfile\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>FROM scratch
COPY hello /
ENTRYPOINT [&quot;/hello&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7 golang-builder \u6253\u5305\u6210\u955C\u50CF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker run --rm \\
    -v $(pwd):/src \\
    -v /var/run/docker.sock:/var/run/docker.sock \\
    centurylink/golang-builder
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B\u955C\u50CF\u5927\u5C0F(Mac\u4E0B\u6D4B\u8BD5)\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ docker images
REPOSITORY   TAG      IMAGE ID       CREATED          VIRTUAL SIZE
hello        latest   1a42948d3224   24 seconds ago   1.59 MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u54C7\uFF01\u8FD9\u4E48\u7701\u529B\uFF0C\u5C31\u80FD\u521B\u5EFA\u51E0 M \u5927\u5C0F\u7684\u955C\u50CF\uFF0CGo \u7B80\u4ECB\u5C31\u662F\u4E3A Docker \u955C\u50CF\u91CF\u8EAB\u5B9A\u505A\u7684\uFF01</p><h2 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h2><p>\u6211\u4EEC\u4ECB\u7ECD\u4E86\u955C\u50CF\u5C42\u7684\u77E5\u8BC6\uFF0C\u5E76\u4E14\u901A\u8FC7\u5B9E\u9A8C\uFF0C\u4ECB\u7ECD\u4E09\u79CD\u5982\u4F55\u7CBE\u7B80\u955C\u50CF\u7684\u6280\u5DE7\u3002\u8FD9\u91CC\u4E3B\u8981\u4ECB\u7ECD\u4E86\u4E09\u79CD\u7CBE\u7B80\u65B9\u6CD5\uFF1A\u9009\u7528\u66F4\u7CBE\u5C0F\u7684\u955C\u50CF\uFF0C\u4E32\u8054 Dockerfile \u8FD0\u884C\u6307\u4EE4\uFF0C\u4EE5\u53CA\u8BD5\u7740\u538B\u7F29\u4F60\u7684\u955C\u50CF\u3002\u901A\u8FC7\u8FD9\u51E0\u4E2A\u6280\u5DE7\uFF0C\u5DF2\u7ECF\u53EF\u4EE5\u5C06 300M \u5927\u5C0F\u7684\u955C\u50CF\u538B\u7F29\u5230 150M\uFF0C\u538B\u7F29\u738750%\u523098%\uFF0C\u6548\u679C\u8FD8\u662F\u4E0D\u9519\u3002</p><ol><li>\u4F18\u5316\u57FA\u7840\u955C\u50CF</li><li>\u4E32\u63A5 Dockerfile \u547D\u4EE4\uFF1A</li><li>\u538B\u7F29 Docker images</li><li>\u4F18\u5316\u7A0B\u5E8F\u4F9D\u8D56</li><li>\u9009\u7528\u66F4\u5408\u9002\u7684\u5F00\u53D1\u8BED\u8A00</li></ol><h1 id="\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a> \u53C2\u8003</h1><ul><li><strong>scratch in Docker Hub</strong>[4]</li><li><strong>Make FROM scratch a special cased &#39;no-base&#39; spec</strong>[5]</li><li><strong>vDSO (virtual dynamic shared object)</strong>[6]</li><li><strong>Small Docker Images For Go Apps</strong>[7] (with <strong>golang-builder</strong>[8])</li><li><strong>Building Docker Images for Static Go Binaries</strong>[9]</li><li><strong>Dockerfile Best Practices - take 2</strong>[10] - by Michael Crosby, 2014-03-09.</li><li><strong>Optimizing Docker Images</strong>[11] - by Brian DeHamer, 2014-07-28.</li><li><strong>Squashing Docker Images</strong>[12] - by Jason Wilder, 2014-08-19.</li></ul><h2 id="\u53C2\u8003\u8D44\u6599" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u8D44\u6599" aria-hidden="true">#</a> \u53C2\u8003\u8D44\u6599</h2><p>[1]\u8FD9\u4E9B\u6280\u672F: <em>https://docs.docker.com/engine/userguide/storagedriver/imagesandcontainers/</em> [2]\u4E00\u671F: <em>https://github.com/bingohuang/play-docker-images/tree/master/stage-01</em> [3]docker-squash: <em>https://github.com/jwilder/docker-squash</em> [4]scratch in Docker Hub: <em>https://registry.hub.docker.com/_/scratch/</em> [5]Make FROM scratch a special cased &#39;no-base&#39; spec: <em>https://github.com/docker/docker/pull/8827</em> [6]vDSO (virtual dynamic shared object): <em>http://en.wikipedia.org/wiki/VDSO</em> [7]Small Docker Images For Go Apps: <em>http://www.centurylinklabs.com/small-docker-images-for-go-apps/</em> [8]golang-builder: <em>https://github.com/CenturyLinkLabs/golang-builder</em> [9]Building Docker Images for Static Go Binaries: <em>https://medium.com/@kelseyhightower/optimizing-docker-images-for-static-binaries-b5696e26eb07</em> [10]Dockerfile Best Practices - take 2: <em>http://crosbymichael.com/dockerfile-best-practices-take-2.html</em> [11]Optimizing Docker Images: <em>http://www.centurylinklabs.com/optimizing-docker-images/</em> [12]Squashing Docker Images: <em>http://jasonwilder.com/blog/2014/08/19/squashing-docker-images/</em></p><h1 id="\u8F6C\u8F7D\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#\u8F6C\u8F7D\u4FE1\u606F" aria-hidden="true">#</a> \u8F6C\u8F7D\u4FE1\u606F</h1><p>\u6587\u7AE0\u6765\u81EA\u9EC4\u5E86\u5175\u8001\u5E08\u7684\u7F51\u6613\u8702\u5DE2\u300A\u73A9\u8F6C Docker \u955C\u50CF\u300B\u7CFB\u5217https://github.com/bingohuang/play-docker-images\uFF0C\u539F\u672C\u5206\u4E3A\u4E0A\u4E0B\u4E24\u7BC7\uFF0C\u7531\u751F\u6001\u541B\u6574\u5408\u6210\u4E00\u7BC7\u4FBF\u4E8E\u9605\u8BFB\u3002</p>`,122),a=[n];function s(r,c){return t(),i("div",null,a)}const u=e(l,[["render",s],["__file","mark-small-image.html.vue"]]);export{u as default};
