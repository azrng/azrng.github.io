import{_ as e,o as i,c as a,a as s}from"./app.565765f9.js";const t={},l=s(`<h1 id="\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a> \u5B89\u88C5</h1><h2 id="\u751F\u6210\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#\u751F\u6210\u5BB9\u5668" aria-hidden="true">#</a> \u751F\u6210\u5BB9\u5668</h2><p>\u4E0B\u9762\u7684\u811A\u672C\u53EA\u662F\u6D4B\u8BD5\u4F7F\u7528\uFF0C\u4E0D\u5EFA\u8BAE\u751F\u4EA7\u4F7F\u7528(\u50CF\u4E00\u4E9B\u6302\u8F7D\u7684\u9700\u8981\u81EA\u884C\u5904\u7406)</p><h3 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a> docker-compose</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>version: &#39;3&#39;

services:
  gitlab: #gitlab\u5BB9\u5668
    image: gitlab/gitlab-ce
    container_name: &#39;gitlab&#39;
    restart: always
    environment:
      GITLAB_OMNIBUS_CONFIG: |
        external_url &quot;http://172.30.112.1:9006&quot;
        gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = 9022
        gitlab_rails[&#39;time_zone&#39;] = &#39;Asia/Shanghai&#39;
        # gitlab_rails[&#39;smtp_enable&#39;] = true
        # gitlab_rails[&#39;smtp_address&#39;] = &quot;smtp.exmail.qq.com&quot;
        # gitlab_rails[&#39;smtp_port&#39;] = 465
        # gitlab_rails[&#39;smtp_user_name&#39;] = &quot;&lt;your qq email&gt;&quot;
        # gitlab_rails[&#39;smtp_password&#39;] = &quot;xCcqh*L4jkqFCS&quot;
        # gitlab_rails[&#39;smtp_authentication&#39;] = &quot;login&quot;
        # gitlab_rails[&#39;smtp_enable_starttls_auto&#39;] = true
        # gitlab_rails[&#39;smtp_tls&#39;] = true
        # gitlab_rails[&#39;gitlab_email_from&#39;] = &#39;&lt;your qq email&gt;&#39;
        # gitlab_rails[&#39;smtp_domain&#39;] = &quot;exmail.qq.com&quot;
    ports:
      - &#39;9006:9006&#39;
      - &#39;443:443&#39;
      - &#39;9022:22&#39;
    volumes:
      - &#39;D:/Soft/gitlab/etcconfig:/etc/gitlab&#39; # &#39;/gitlab/config:/etc/gitlab&#39;
      # - &#39;/gitlab/logs:/var/log/gitlab&#39;
      # - &#39;/gitlab/data:/var/opt/gitlab&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> docker</h3><p>\u8FD9\u91CC\u662F9006:9006\u662F\u56E0\u4E3Aexternal_url \u914D\u7F6E\u4E869006\uFF0C\u8BF7\u5F80\u4E0B\u770B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u6302\u8F7D
docker run -d  -p 9443:443 -p 9006:9006 -p 9022:22 --name gitlab --restart always -v /home/gitlab/config:/etc/gitlab -v /home/gitlab/logs:/var/log/gitlab -v /home/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce

# \u4E0D\u6302\u8F7D
docker run -d -p 9443:443 -p 443:443 -p 9006:9006 -p 9022:22 --name gitlab gitlab/gitlab-ce

# windows\u6302\u8F7D
docker run -d -p 9443:443 -p 9006:9006 -p 9022:22 --name gitlab  -v  D:/Soft/gitlab/etcconfig:/etc/gitlab  gitlab/gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-d\uFF1A\u540E\u53F0\u8FD0\u884C</p><p>-p\uFF1A\u5C06\u5BB9\u5668\u5185\u90E8\u7AEF\u53E3\u5411\u5916\u6620\u5C04</p><p>--name\uFF1A\u547D\u540D\u5BB9\u5668\u540D\u79F0</p><p>-v\uFF1A\u5C06\u5BB9\u5668\u5185\u6570\u636E\u6587\u4EF6\u5939\u6216\u8005\u65E5\u5FD7\u3001\u914D\u7F6E\u7B49\u6587\u4EF6\u5939\u6302\u8F7D\u5230\u5BBF\u4E3B\u673A\u6307\u5B9A\u76EE\u5F55</p><h2 id="\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E</h2><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1630392393921-c9133767-a427-43ac-b77a-96685c75485b.png" alt="img"></p><p>\u8FDB\u5165\u5BB9\u5668\u5185\u53BB\u7F16\u8F91\u914D\u7F6E\u6216\u8005\u7F16\u8F91\u6302\u8F7D\u76EE\u5F55\u7684\u6587\u4EF6</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1630392436742-b7a1a83e-d915-430d-a960-f1612a97a4e4.png" alt="img"></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker exec -it gitlab bash
vi /etc/gitlab/gitlab.rb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5\u6587\u4EF6\u8981\u4FEE\u6539\u7684\u914D\u7F6E\u662F\u6CE8\u91CA\u72B6\u6001\uFF0C\u6240\u4EE5\u76F4\u63A5\u53EF\u4EE5\u5728\u6587\u4EF6\u5934\u90E8\u589E\u52A0\u914D\u7F6E</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>external_url &#39;http://172.30.112.1:9006&#39;
#ssh\u4E3B\u673Aip
gitlab_rails[&#39;gitlab_ssh_host&#39;] = &#39;172.30.112.1&#39;
# ssh\u8FDE\u63A5\u7AEF\u53E3
gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = 9022
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4FDD\u5B58\u5E76\u9000\u51FA\uFF0C\u7136\u540Egitlab.yml\u8BE5\u6587\u4EF6\u53EF\u4EE5\u7F16\u8F91\u4E5F\u53EF\u4EE5\u4E0D\u7F16\u8F91(\u56E0\u4E3Agitlab.rb\u5185\u914D\u7F6E\u4F1A\u8986\u76D6\u8FD9\u4E2A\uFF0C\u4E3A\u4E86\u9632\u6B62\u6CA1\u6709\u6210\u529F\u8986\u76D6\u6240\u4EE5\u6211\u5728\u8FD9\u91CC\u8FDB\u884C\u914D\u7F6E)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>vi opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml
\u4FEE\u6539\uFF1Agitlab setting=\u300Bhost\uFF08172.30.112.1\uFF09 \u3001port\uFF089006\uFF09\u3001ssh_host\uFF08172.30.112.1\uFF09
		 gitlab shell setting =\u300Bssh_port\uFF089022\uFF09
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4FDD\u5B58\u9000\u51FA\uFF0C\u5728\u5BB9\u5668\u5185\u6267\u884C\u66F4\u65B0\u914D\u7F6E</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>gitlab-ctl reconfigure
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u91CD\u542F\u670D\u52A1</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>gitlab-ctl restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u67E5\u627E\u5BC6\u7801" tabindex="-1"><a class="header-anchor" href="#\u67E5\u627E\u5BC6\u7801" aria-hidden="true">#</a> \u67E5\u627E\u5BC6\u7801</h3><p>gitlab\u9ED8\u8BA4\u7528\u6237\u662Froot\uFF0C\u5728\u5BB9\u5668\u5185\u67E5\u627E\u521D\u59CB\u5BC6\u7801</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cat /etc/gitlab/initial_root_password
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1630392346545-d3be811e-20e6-4b75-85a2-1981b345a0af.png" alt="img"></p><h3 id="\u5BB9\u5668\u5185\u4FEE\u6539\u5BC6\u7801" tabindex="-1"><a class="header-anchor" href="#\u5BB9\u5668\u5185\u4FEE\u6539\u5BC6\u7801" aria-hidden="true">#</a> \u5BB9\u5668\u5185\u4FEE\u6539\u5BC6\u7801</h3><p>\u5728\u5BB9\u5668\u5185\u8FDB\u5165gitlab\u7684bin\u76EE\u5F55</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd /opt/gitlab/bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6267\u884Cgitlab-rails console\u547D\u4EE4</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1630393079166-dcd56a70-64f3-41dd-8e48-4d97d69cbdf5.png" alt="img"></p><p>\u627E\u5230root\u7684\u7528\u6237\uFF0C\u8F93\u5165u=User.where(id:1).first\uFF0C\u7136\u540E\u56DE\u8F66</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1630393092662-6540ad2c-d30e-4bee-8dac-48b234344ede.png" alt="img"></p><p>\u4FEE\u6539password\uFF0C\u8F93\u5165u.password=&#39;123456789&#39;\u7136\u540E\u56DE\u8F66</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>u.password=&#39;123456789&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1630393112625-6ee295f7-70e6-4a1c-a3f0-194d972f223c.png" alt="img"></p><p>\u4FEE\u6539\u786E\u8BA4\u5BC6\u7801</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>u.password_confirmation=&#39;123456789&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1630393132266-4b5613af-43c7-41cf-88ec-da38a3db7e70.png" alt="img"></p><p>\u4FDD\u5B58\u4FEE\u6539\uFF0C\u8F93\u5165u.save\uFF0C\u7136\u540E\u56DE\u8F66\uFF0C\u7B49\u5230\u8F93\u51FAtrue\uFF0C\u8FD9\u65F6\uFF0C\u5BC6\u7801\u4FEE\u6539\u6210\u529F\u3002</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1630393150839-203c3d29-88c8-4c59-9af1-273e8bce2933.png" alt="img"></p><p>\u8FD9\u91CC\u5BC6\u7801\u5DF2\u7ECF\u4FEE\u6539\u6210\u529F\uFF0C\u53EF\u4EE5\u7528123456789\u5BC6\u7801\u767B\u5F55\u8FDB\u53BB\u4E86</p><h1 id="\u6CE8\u610F\u70B9" tabindex="-1"><a class="header-anchor" href="#\u6CE8\u610F\u70B9" aria-hidden="true">#</a> \u6CE8\u610F\u70B9</h1><p>\u56E0\u4E3A\u6211\u4EEC\u60F3\u662F\u5B9E\u73B0\u5C06\u5BB9\u5668\u5185\u768480\u7AEF\u53E3\u5F80\u5916\u6620\u5C04\uFF0C\u6240\u4EE5\u6211\u4EEC\u5728docker run\u7684\u65F6\u5019\u8BBE\u7F6E\u4E86-p 9006:80\uFF0C\u4F46\u662F\u56E0\u4E3A\u6211\u4EEC\u5728\u4EE3\u7801\u91CC\u9762\u914D\u7F6E\u4E86external_url http://172.30.112.1:9006\u540E\u5C31\u5E94\u8BE5\u4F7F\u7528-p 9006:9006\u5426\u5219\u4E00\u76F4\u8BBF\u95EE\u4E0D\u5230\u3002</p><h1 id="\u53C2\u8003\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003\u6587\u6863" aria-hidden="true">#</a> \u53C2\u8003\u6587\u6863</h1><p>docker\u5B89\u88C5gitlab\uFF1A https://blog.csdn.net/weixin_45649746/article/details/119816809</p><p>netcore\u914D\u7F6Egitlab ci/cd\uFF1Ahttps://www.cnblogs.com/hellotim/p/13382565.html</p>`,50),n=[l];function d(r,c){return i(),a("div",null,n)}const m=e(t,[["render",d],["__file","gitlabinstall.html.vue"]]);export{m as default};
