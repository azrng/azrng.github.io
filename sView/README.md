# AI 流式响应查看器

## 项目概述
这是一个用于测试和查看大模型流式接口响应的 Web 页面。用户可以通过该页面配置 API 请求参数，实时查看流式响应结果。页面采用左右布局设计，提供直观的配置和响应展示界面。

## 功能特性

### 1. 页面布局
- **左右分栏设计**
  - 左侧：流式响应内容展示区
  - 右侧：请求配置区域
  - 响应式设计，支持移动端访问

### 2. 请求配置区域
- **API 接口地址输入框**
  - 支持输入完整的 API URL
  - 支持 HTTP/HTTPS 协议
  - 提供输入验证和格式检查
  - 仅支持 POST 请求

- **请求头配置**
  - 动态添加/删除请求头
  - 支持自定义请求头
  - 预设常用请求头（如 Content-Type, Authorization 等）
  - 自动保存配置到 localStorage

- **请求体配置**
  - JSON 格式输入
  - 实时 JSON 格式验证
  - 自动保存配置到 localStorage

### 3. 响应展示区域
- **实时流式响应显示**
  - 支持实时滚动显示响应内容
  - 自动滚动到最新内容
  - 深色主题显示
  - 平滑的淡入动画效果
  - 优化的滚动条样式
  - 固定高度，防止页面无限增长

- **响应内容处理**
  - 自动将 Unicode 编码转换为 UTF-8
  - 保持原始数据格式（如 data: 前缀）
  - 支持复制响应内容

### 4. 交互功能
- **请求控制**
  - 发送请求按钮
  - 取消请求按钮
  - 清空响应内容按钮
  - 新请求自动清空历史响应

- **Loading 效果**
  - 全屏半透明遮罩
  - 旋转动画
  - 在开始接收流式响应时自动关闭

### 5. 错误处理
- JSON 格式验证
- 网络错误处理
- 请求取消处理
- 友好的错误提示

## 技术实现要点

### 前端实现
- 纯 HTML + CSS + JavaScript 实现
- 使用 Fetch API 处理流式响应
- 使用 AbortController 支持请求取消
- 使用 localStorage 保存配置
- 使用 CSS Flexbox 实现响应式布局

### 数据处理
- 使用 TextDecoder 处理 UTF-8 编码
- 实现 Unicode 到 UTF-8 的转换
- 使用 buffer 处理流式数据
- 保持原始数据格式

### 用户体验优化
- 响应式设计适配不同屏幕
- 优雅的动画效果
- 直观的配置界面
- 实时的状态反馈
- 自动保存用户配置

## 界面布局

```
+------------------------------------------+------------------------------------------+
|                                          |                                          |
|            响应内容展示区                 |              请求配置区域                |
|                                          |                                          |
|  +------------------------------------+  |  +------------------------------------+  |
|  |                                    |  |  | API URL: [___________________]    |  |
|  |                                    |  |  +------------------------------------+  |
|  |                                    |  |                                          |
|  |                                    |  |  +------------------------------------+  |
|  |                                    |  |  | 请求头配置                          |  |
|  |                                    |  |  | Key: [_____] Value: [___________]  |  |
|  |                                    |  |  +------------------------------------+  |
|  |                                    |  |                                          |
|  |                                    |  |  +------------------------------------+  |
|  |                                    |  |  | 请求体 (JSON)                      |  |
|  |                                    |  |  | {                                 |  |
|  |                                    |  |  |   "prompt": "Hello, AI!"          |  |
|  |                                    |  |  | }                                 |  |
|  |                                    |  |  +------------------------------------+  |
|  |                                    |  |                                          |
|  |                                    |  |  [发送请求] [取消] [清空]              |  |
|  |                                    |  |                                          |
|  +------------------------------------+  |  +------------------------------------+  |
|                                          |                                          |
+------------------------------------------+------------------------------------------+
```

## 使用说明
1. 在 API URL 输入框中输入接口地址
2. 配置请求头（可选）
3. 在请求体中输入 JSON 格式的参数
4. 点击"发送请求"按钮
5. 实时查看流式响应结果
6. 可以随时取消请求或清空响应内容

## 注意事项
1. 仅支持 POST 请求
2. 请求体必须是有效的 JSON 格式
3. 响应内容会自动进行 Unicode 到 UTF-8 的转换
4. 配置会自动保存到浏览器的 localStorage 中
5. 新请求会自动清空之前的响应内容