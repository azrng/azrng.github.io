<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>WebApi调用示例 | 知识库</title><meta name="description" content="一个知识库网站">
    <link rel="modulepreload" href="/assets/app.565765f9.js"><link rel="modulepreload" href="/assets/webapi-base.html.312a734f.js"><link rel="modulepreload" href="/assets/webapi-base.html.e2eef8b0.js"><link rel="prefetch" href="/assets/index.html.c9e392dc.js"><link rel="prefetch" href="/assets/base.html.07f383f8.js"><link rel="prefetch" href="/assets/cache-db-consistency.html.04576e8e.js"><link rel="prefetch" href="/assets/aboutme.html.6bb47ff8.js"><link rel="prefetch" href="/assets/attribute.html.c664a011.js"><link rel="prefetch" href="/assets/class.html.aba60eb7.js"><link rel="prefetch" href="/assets/predefined-type.html.688911ae.js"><link rel="prefetch" href="/assets/reflect.html.2010b6d1.js"><link rel="prefetch" href="/assets/type-convert.html.36fe72f4.js"><link rel="prefetch" href="/assets/base.html.0e4bcb6e.js"><link rel="prefetch" href="/assets/healthcheck.html.9e2087e3.js"><link rel="prefetch" href="/assets/kuayu.html.8281e724.js"><link rel="prefetch" href="/assets/reflect.html.42d66291.js"><link rel="prefetch" href="/assets/routing.html.7d232251.js"><link rel="prefetch" href="/assets/anti-fraud.html.9bea71a3.js"><link rel="prefetch" href="/assets/open_source_protocol.html.103287b4.js"><link rel="prefetch" href="/assets/postman.html.6df5f1bd.js"><link rel="prefetch" href="/assets/soft-collection.html.59b94fb9.js"><link rel="prefetch" href="/assets/uos.html.0cd13d33.js"><link rel="prefetch" href="/assets/http-agency.html.700b7525.js"><link rel="prefetch" href="/assets/introduce.html.a7e10533.js"><link rel="prefetch" href="/assets/baget.html.c0577d3f.js"><link rel="prefetch" href="/assets/toolgood-words.html.ef3db4cb.js"><link rel="prefetch" href="/assets/yapi.html.d7b4bd16.js"><link rel="prefetch" href="/assets/jsonb_path_query.html.ac7be76e.js"><link rel="prefetch" href="/assets/cookie.html.2d2ba37e.js"><link rel="prefetch" href="/assets/jwt_baseuse.html.a34abee3.js"><link rel="prefetch" href="/assets/session.html.51ca4e17.js"><link rel="prefetch" href="/assets/memorycache.html.e339a66b.js"><link rel="prefetch" href="/assets/redis.html.f76ecd58.js"><link rel="prefetch" href="/assets/base.html.bb45438c.js"><link rel="prefetch" href="/assets/realize.html.8f99d6c6.js"><link rel="prefetch" href="/assets/default.html.061226e7.js"><link rel="prefetch" href="/assets/configread.html.484c0113.js"><link rel="prefetch" href="/assets/base.html.d78d2208.js"><link rel="prefetch" href="/assets/base.html.ed04ab9f.js"><link rel="prefetch" href="/assets/ilogger.html.68a40a4d.js"><link rel="prefetch" href="/assets/log4net.html.d04538bf.js"><link rel="prefetch" href="/assets/logdashboard.html.9d2d9b2f.js"><link rel="prefetch" href="/assets/nlog.html.e870fcdd.js"><link rel="prefetch" href="/assets/serilog.html.7fe8bd19.js"><link rel="prefetch" href="/assets/base.html.c4527071.js"><link rel="prefetch" href="/assets/swagger-long.html.50e69bc0.js"><link rel="prefetch" href="/assets/swaggerbase.html.f971e002.js"><link rel="prefetch" href="/assets/version.html.71967fb8.js"><link rel="prefetch" href="/assets/createdb.html.b44a1837.js"><link rel="prefetch" href="/assets/efcoreoperation.html.64ab049a.js"><link rel="prefetch" href="/assets/base.html.1f552307.js"><link rel="prefetch" href="/assets/centos_net6.html.f4c3d097.js"><link rel="prefetch" href="/assets/docker.html.2b91f4af.js"><link rel="prefetch" href="/assets/iis.html.8b925361.js"><link rel="prefetch" href="/assets/supervisor.html.69a9b968.js"><link rel="prefetch" href="/assets/base.html.0b4da2a9.js"><link rel="prefetch" href="/assets/customerconfig.html.a845d8e6.js"><link rel="prefetch" href="/assets/base-use-dissent.html.445c2fce.js"><link rel="prefetch" href="/assets/base-use.html.91aaf579.js"><link rel="prefetch" href="/assets/base.html.1b7b52cb.js"><link rel="prefetch" href="/assets/webapiversion.html.f588f73f.js"><link rel="prefetch" href="/assets/use_di.html.57a182b8.js"><link rel="prefetch" href="/assets/base_theory.html.6b57d7a7.js"><link rel="prefetch" href="/assets/github-base.html.bcbf9aac.js"><link rel="prefetch" href="/assets/gitlabinstall.html.e37273af.js"><link rel="prefetch" href="/assets/wazgit.html.fb3c768b.js"><link rel="prefetch" href="/assets/base.html.d2233d4b.js"><link rel="prefetch" href="/assets/install-services.html.6982eca7.js"><link rel="prefetch" href="/assets/linux-install.html.95020275.js"><link rel="prefetch" href="/assets/mark-small-image.html.c354a922.js"><link rel="prefetch" href="/assets/windows-install.html.819536bd.js"><link rel="prefetch" href="/assets/base.html.b18c77b6.js"><link rel="prefetch" href="/assets/docker-install.html.0d08e583.js"><link rel="prefetch" href="/assets/free-style.html.fc0650a5.js"><link rel="prefetch" href="/assets/linux-install.html.6997c7d3.js"><link rel="prefetch" href="/assets/base.html.9a5dda82.js"><link rel="prefetch" href="/assets/base_concept.html.c568edad.js"><link rel="prefetch" href="/assets/network.html.05be191e.js"><link rel="prefetch" href="/assets/service_discovery.html.e5fcc50a.js"><link rel="prefetch" href="/assets/catalog.html.1d2a9dee.js"><link rel="prefetch" href="/assets/hyper-v_install.html.809d4ac5.js"><link rel="prefetch" href="/assets/vm_install.html.e6d5f079.js"><link rel="prefetch" href="/assets/picgo.html.8b35d72f.js"><link rel="prefetch" href="/assets/install.html.b2271221.js"><link rel="prefetch" href="/assets/use-skill.html.92447777.js"><link rel="prefetch" href="/assets/agileconfig.html.1e4cc294.js"><link rel="prefetch" href="/assets/introduce.html.e9d7ad17.js"><link rel="prefetch" href="/assets/model.html.7a82e8c1.js"><link rel="prefetch" href="/assets/aspose-pdf.html.9929aa7b.js"><link rel="prefetch" href="/assets/spire-pdf.html.16960b07.js"><link rel="prefetch" href="/assets/senparcweixin.html.65ae0c1f.js"><link rel="prefetch" href="/assets/jieyi.html.f220aa24.js"><link rel="prefetch" href="/assets/other.html.9202f5a5.js"><link rel="prefetch" href="/assets/fastreport.html.380ebcf8.js"><link rel="prefetch" href="/assets/404.html.98e87f94.js"><link rel="prefetch" href="/assets/index.html.72ac4063.js"><link rel="prefetch" href="/assets/index.html.a3150f69.js"><link rel="prefetch" href="/assets/base.html.ca22f11e.js"><link rel="prefetch" href="/assets/cache-db-consistency.html.07cf5f03.js"><link rel="prefetch" href="/assets/aboutme.html.1db5d827.js"><link rel="prefetch" href="/assets/attribute.html.d399246c.js"><link rel="prefetch" href="/assets/class.html.8057a9e8.js"><link rel="prefetch" href="/assets/predefined-type.html.14908366.js"><link rel="prefetch" href="/assets/reflect.html.c5e0da96.js"><link rel="prefetch" href="/assets/type-convert.html.f5e34dbb.js"><link rel="prefetch" href="/assets/base.html.2a614a56.js"><link rel="prefetch" href="/assets/healthcheck.html.a4472a4a.js"><link rel="prefetch" href="/assets/kuayu.html.3f9db1c8.js"><link rel="prefetch" href="/assets/reflect.html.5859a53d.js"><link rel="prefetch" href="/assets/routing.html.031f867e.js"><link rel="prefetch" href="/assets/anti-fraud.html.2739fc0d.js"><link rel="prefetch" href="/assets/open_source_protocol.html.393e9ff4.js"><link rel="prefetch" href="/assets/postman.html.df67c7ca.js"><link rel="prefetch" href="/assets/soft-collection.html.df969508.js"><link rel="prefetch" href="/assets/uos.html.f5f146ac.js"><link rel="prefetch" href="/assets/http-agency.html.a6da9111.js"><link rel="prefetch" href="/assets/introduce.html.86f40878.js"><link rel="prefetch" href="/assets/baget.html.7100a830.js"><link rel="prefetch" href="/assets/toolgood-words.html.5779aa22.js"><link rel="prefetch" href="/assets/yapi.html.0cb77f49.js"><link rel="prefetch" href="/assets/jsonb_path_query.html.0eed8bea.js"><link rel="prefetch" href="/assets/cookie.html.09e0897a.js"><link rel="prefetch" href="/assets/jwt_baseuse.html.3a3e79e3.js"><link rel="prefetch" href="/assets/session.html.68a8bd6e.js"><link rel="prefetch" href="/assets/memorycache.html.04bbed25.js"><link rel="prefetch" href="/assets/redis.html.3dc67272.js"><link rel="prefetch" href="/assets/base.html.b274b48a.js"><link rel="prefetch" href="/assets/realize.html.6d5b40da.js"><link rel="prefetch" href="/assets/default.html.de609c4c.js"><link rel="prefetch" href="/assets/configread.html.29fcfcde.js"><link rel="prefetch" href="/assets/base.html.2d51ba7a.js"><link rel="prefetch" href="/assets/base.html.b7c756fd.js"><link rel="prefetch" href="/assets/ilogger.html.7893cbc6.js"><link rel="prefetch" href="/assets/log4net.html.512c853d.js"><link rel="prefetch" href="/assets/logdashboard.html.ab252538.js"><link rel="prefetch" href="/assets/nlog.html.0c3d9a17.js"><link rel="prefetch" href="/assets/serilog.html.fd7b7f6f.js"><link rel="prefetch" href="/assets/base.html.3c3bda64.js"><link rel="prefetch" href="/assets/swagger-long.html.12a1a8ca.js"><link rel="prefetch" href="/assets/swaggerbase.html.7764241e.js"><link rel="prefetch" href="/assets/version.html.c22b0fe0.js"><link rel="prefetch" href="/assets/createdb.html.6be27212.js"><link rel="prefetch" href="/assets/efcoreoperation.html.04cc2172.js"><link rel="prefetch" href="/assets/base.html.32b2c15f.js"><link rel="prefetch" href="/assets/centos_net6.html.52aeebe1.js"><link rel="prefetch" href="/assets/docker.html.e39501c9.js"><link rel="prefetch" href="/assets/iis.html.c44fa115.js"><link rel="prefetch" href="/assets/supervisor.html.9b3e513c.js"><link rel="prefetch" href="/assets/base.html.b7f6ff68.js"><link rel="prefetch" href="/assets/customerconfig.html.d6f285dc.js"><link rel="prefetch" href="/assets/base-use-dissent.html.0e0fdf1a.js"><link rel="prefetch" href="/assets/base-use.html.d6ac57b4.js"><link rel="prefetch" href="/assets/base.html.6fb4c37a.js"><link rel="prefetch" href="/assets/webapiversion.html.8ac86bbf.js"><link rel="prefetch" href="/assets/use_di.html.513683dd.js"><link rel="prefetch" href="/assets/base_theory.html.aefe7e80.js"><link rel="prefetch" href="/assets/github-base.html.ffc1d207.js"><link rel="prefetch" href="/assets/gitlabinstall.html.a2e3e152.js"><link rel="prefetch" href="/assets/wazgit.html.285e72c6.js"><link rel="prefetch" href="/assets/base.html.72cd58d1.js"><link rel="prefetch" href="/assets/install-services.html.e7a90f3c.js"><link rel="prefetch" href="/assets/linux-install.html.a9605ea6.js"><link rel="prefetch" href="/assets/mark-small-image.html.5a00a496.js"><link rel="prefetch" href="/assets/windows-install.html.4fb6ed47.js"><link rel="prefetch" href="/assets/base.html.6f3c89be.js"><link rel="prefetch" href="/assets/docker-install.html.e81a4299.js"><link rel="prefetch" href="/assets/free-style.html.4f1926d4.js"><link rel="prefetch" href="/assets/linux-install.html.bbf4e2e8.js"><link rel="prefetch" href="/assets/base.html.8656ef15.js"><link rel="prefetch" href="/assets/base_concept.html.06c4c67e.js"><link rel="prefetch" href="/assets/network.html.caeb2cb7.js"><link rel="prefetch" href="/assets/service_discovery.html.5835914d.js"><link rel="prefetch" href="/assets/catalog.html.73161645.js"><link rel="prefetch" href="/assets/hyper-v_install.html.27881c03.js"><link rel="prefetch" href="/assets/vm_install.html.689e530f.js"><link rel="prefetch" href="/assets/picgo.html.9c9e894e.js"><link rel="prefetch" href="/assets/install.html.c1164e62.js"><link rel="prefetch" href="/assets/use-skill.html.d2bdab98.js"><link rel="prefetch" href="/assets/agileconfig.html.c801b0d5.js"><link rel="prefetch" href="/assets/introduce.html.985e5cd1.js"><link rel="prefetch" href="/assets/model.html.00490fbe.js"><link rel="prefetch" href="/assets/aspose-pdf.html.2c1f8f57.js"><link rel="prefetch" href="/assets/spire-pdf.html.c8d35953.js"><link rel="prefetch" href="/assets/senparcweixin.html.55e694dc.js"><link rel="prefetch" href="/assets/jieyi.html.fad36a84.js"><link rel="prefetch" href="/assets/other.html.fc825881.js"><link rel="prefetch" href="/assets/fastreport.html.919a8c39.js"><link rel="prefetch" href="/assets/404.html.43231495.js"><link rel="prefetch" href="/assets/index.html.851dd6fb.js"><link rel="prefetch" href="/assets/reco-valine.ed4545b0.js">
    <link rel="stylesheet" href="/assets/style.180fd05c.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper"><div><header class="navbar-container"><span class="nav-item site-brand"><a href="/" class=""><img class="logo" src="/logo.png" alt="知识库"><span class="site-name can-hide">知识库</span></a></span><div class="nav-item navbar-links-wrapper" style=""><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="目录">目录 <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="目录"><span class="title"><span>目录</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/web/introduce" class="nav-link" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/csharp/predefined-type" class="nav-link" aria-label="CSharp"><!--[--><!--]--> CSharp <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/dotnetcore/base" class="nav-link" aria-label="dotnetcore"><!--[--><!--]--> dotnetcore <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/middleware/yapi" class="nav-link" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/db/base" class="nav-link" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/soft/soft-collection" class="nav-link" aria-label="软件"><!--[--><!--]--> 软件 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/interview/anti-fraud" class="nav-link" aria-label="面试"><!--[--><!--]--> 面试 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/aboutme/aboutme" class="nav-link" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><!--]--></nav><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:19px;height:19px;font-size:19px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a><a class="icon-container left btn-toggle-menus" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="19" r="1"></circle><circle cx="12" cy="5" r="1"></circle></g></svg><!----></a></div></header><div class="mobile-menus-container"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="目录">目录 <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="目录"><span class="title"><span>目录</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/web/introduce" class="nav-link" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/csharp/predefined-type" class="nav-link" aria-label="CSharp"><!--[--><!--]--> CSharp <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/dotnetcore/base" class="nav-link" aria-label="dotnetcore"><!--[--><!--]--> dotnetcore <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/middleware/yapi" class="nav-link" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/db/base" class="nav-link" aria-label="数据库"><!--[--><!--]--> 数据库 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/soft/soft-collection" class="nav-link" aria-label="软件"><!--[--><!--]--> 软件 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/interview/anti-fraud" class="nav-link" aria-label="面试"><!--[--><!--]--> 面试 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/aboutme/aboutme" class="nav-link" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance </span><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:19px;height:19px;font-size:19px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a></div></div><div class="sidebar-mask"></div><aside class="series-container"><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading">基础知识</h5><ul><li><!--[--><a href="/dotnetcore/base.html" class="nav-link series-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/globalization/base.html" class="nav-link series-item" aria-label="多语言配置"><!--[--><!--]--> 多语言配置 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/routing.html" class="nav-link series-item" aria-label="路由"><!--[--><!--]--> 路由 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/healthcheck.html" class="nav-link series-item" aria-label="健康检查"><!--[--><!--]--> 健康检查 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">配置框架</h5><ul><li><!--[--><a href="/dotnetcore/config/configread.html" class="nav-link series-item" aria-label="配置读取"><!--[--><!--]--> 配置读取 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">跨域</h5><ul><li><!--[--><a href="/dotnetcore/kuayu.html" class="nav-link series-item" aria-label="跨域"><!--[--><!--]--> 跨域 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">静态资源</h5><ul><li><!--[--><a href="/dotnetcore/staticfile/base.html" class="nav-link series-item" aria-label="静态资源-基本设置"><!--[--><!--]--> 静态资源-基本设置 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/staticfile/customerconfig.html" class="nav-link series-item" aria-label="静态资源-自定义设置"><!--[--><!--]--> 静态资源-自定义设置 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">日志</h5><ul><li><!--[--><a href="/dotnetcore/loggers/ilogger.html" class="nav-link series-item" aria-label="Logger"><!--[--><!--]--> Logger <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/loggers/serilog.html" class="nav-link series-item" aria-label="Serilog"><!--[--><!--]--> Serilog <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/loggers/nlog.html" class="nav-link series-item" aria-label="NLog"><!--[--><!--]--> NLog <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/loggers/log4net.html" class="nav-link series-item" aria-label="Log4net"><!--[--><!--]--> Log4net <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/loggers/logdashboard.html" class="nav-link series-item" aria-label="LogDashboard"><!--[--><!--]--> LogDashboard <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">过滤器</h5><ul><li><!--[--><a href="/dotnetcore/filter/base.html" class="nav-link series-item" aria-label="过滤器基本使用"><!--[--><!--]--> 过滤器基本使用 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/filter/realize.html" class="nav-link series-item" aria-label="过滤器常见操作"><!--[--><!--]--> 过滤器常见操作 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">OpenApi</h5><ul><li><!--[--><a href="/dotnetcore/openapi/swaggerbase.html" class="nav-link series-item" aria-label="swagger-基础使用"><!--[--><!--]--> swagger-基础使用 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/openapi/version.html" class="nav-link series-item" aria-label="swagger-版本控制"><!--[--><!--]--> swagger-版本控制 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">身份认证和授权</h5><ul><li><!--[--><a href="/dotnetcore/auth/session.html" class="nav-link series-item" aria-label="Session"><!--[--><!--]--> Session <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/auth/cookie.html" class="nav-link series-item" aria-label="Cookie"><!--[--><!--]--> Cookie <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/auth/jwt_baseuse.html" class="nav-link series-item" aria-label="Jwt使用"><!--[--><!--]--> Jwt使用 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">健康检查</h5><ul><li><!--[--><a href="/dotnetcore/healthcheck.html" class="nav-link series-item" aria-label="健康检查"><!--[--><!--]--> 健康检查 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">实时通信</h5><ul><li><!--[--><a href="/dotnetcore/real-time/base.html" class="nav-link series-item" aria-label="实时通信-技术大乱斗"><!--[--><!--]--> 实时通信-技术大乱斗 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">缓存</h5><ul><li><!--[--><a href="/dotnetcore/cache/memorycache.html" class="nav-link series-item" aria-label="MemoryCache"><!--[--><!--]--> MemoryCache <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/cache/redis.html" class="nav-link series-item" aria-label="分布式缓存"><!--[--><!--]--> 分布式缓存 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">身份认证和授权</h5><ul><li><!--[--><a href="/dotnetcore/auth/session.html" class="nav-link series-item" aria-label="Session"><!--[--><!--]--> Session <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">IOC</h5><ul><li><!--[--><a href="/dotnetcore/ioc/base.html" class="nav-link series-item" aria-label="控制反转"><!--[--><!--]--> 控制反转 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/DI/default.html" class="nav-link series-item" aria-label="默认依赖注入"><!--[--><!--]--> 默认依赖注入 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading active">WebAPI</h5><ul><li><!--[--><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html" class="router-link-active router-link-exact-active nav-link router-link-active series-item active" aria-label="WebApi调用示例"><!--[--><!--]--> WebApi调用示例 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/webapi/webapiversion.html" class="nav-link series-item" aria-label="API版本控制"><!--[--><!--]--> API版本控制 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">操作数据库</h5><ul><li><!--[--><a href="/dotnetcore/orm/createdb.html" class="nav-link series-item" aria-label="EFCore-生成数据库"><!--[--><!--]--> EFCore-生成数据库 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/orm/efcoreoperation.html" class="nav-link series-item" aria-label="EFCore-增删改查"><!--[--><!--]--> EFCore-增删改查 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">单元测试</h5><ul><li><!--[--><a href="/dotnetcore/unit-test/base.html" class="nav-link series-item" aria-label="基础介绍"><!--[--><!--]--> 基础介绍 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/unit-test/base-use-dissent.html" class="nav-link series-item" aria-label="简单使用-争议篇"><!--[--><!--]--> 简单使用-争议篇 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/unit-test/base-use.html" class="nav-link series-item" aria-label="单元测试简单使用"><!--[--><!--]--> 单元测试简单使用 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">WinForm</h5><ul><li><!--[--><a href="/dotnetcore/winform/use_di.html" class="nav-link series-item" aria-label="WinForm使用依赖注入"><!--[--><!--]--> WinForm使用依赖注入 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">部署</h5><ul><li><!--[--><a href="/dotnetcore/release/iis.html" class="nav-link series-item" aria-label="IIS部署DotNet5"><!--[--><!--]--> IIS部署DotNet5 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/release/centos_net6.html" class="nav-link series-item" aria-label="Centos7部署和守护进程"><!--[--><!--]--> Centos7部署和守护进程 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/release/supervisor.html" class="nav-link series-item" aria-label="部署之Supervisor基础"><!--[--><!--]--> 部署之Supervisor基础 <!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/dotnetcore/release/docker.html" class="nav-link series-item" aria-label="Docker部署详细流程"><!--[--><!--]--> Docker部署详细流程 <!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container show-series show-catalog"><h1 class="page-title">WebApi调用示例</h1><div class="page-info"><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"></circle><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->azrng<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 7v5l3 3"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->2022-09-12<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->dotNet<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8.5" cy="8.5" r="1" fill="currentColor"></circle><path d="M4 7v3.859c0 .537.213 1.052.593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834-4.834a2.025 2.025 0 0 0 0-2.864L12.29 4.593A2.025 2.025 0 0 0 10.859 4H7a3 3 0 0 0-3 3z"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->webapi<!--]--></span></a><!----></div><div class="theme-reco-default-content"><div><h1 id="目的" tabindex="-1"><a class="header-anchor" href="#目的" aria-hidden="true">#</a> 目的</h1><p>通过一个简单的项目，在原来的文章基础上完善一下常用的几种WebApi编写方式以及请求方式，一方面是用于给我一个前端朋友用来学习调用接口，另一方面让我测试HttpClient的一些效果。</p><p>本文示例代码环境：vs2022、net6</p><h1 id="准备" tabindex="-1"><a class="header-anchor" href="#准备" aria-hidden="true">#</a> 准备</h1><p>新创建了一个.Net WebAPI程序，安装组件</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token operator">&lt;</span>ItemGroup<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">PackageReference</span> Include<span class="token operator">=</span><span class="token string">&quot;AutoMapper.Extensions.Microsoft.DependencyInjection&quot;</span> Version<span class="token operator">=</span><span class="token string">&quot;11.0.0&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">PackageReference</span> Include<span class="token operator">=</span><span class="token string">&quot;Microsoft.AspNetCore.Mvc.NewtonsoftJson&quot;</span> Version<span class="token operator">=</span><span class="token string">&quot;6.0.1&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">PackageReference</span> Include<span class="token operator">=</span><span class="token string">&quot;Swashbuckle.AspNetCore&quot;</span> Version<span class="token operator">=</span><span class="token string">&quot;6.3.1&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">PackageReference</span> Include<span class="token operator">=</span><span class="token string">&quot;Swashbuckle.AspNetCore.Newtonsoft&quot;</span> Version<span class="token operator">=</span><span class="token string">&quot;6.3.1&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ItemGroup<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ConfigureServices配置NewtonsoftJson以及Automapper和操作数据库代码(为了省事，删除了一些不影响当前效果的代码)</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	services<span class="token punctuation">.</span><span class="token function">AddControllers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddNewtonsoftJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    services<span class="token punctuation">.</span><span class="token function">AddEndpointsApiExplorer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
	<span class="token punctuation">{</span>
		c<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span><span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span> <span class="token punctuation">{</span> Title <span class="token operator">=</span> <span class="token string">&quot;MyWebApi&quot;</span><span class="token punctuation">,</span> Version <span class="token operator">=</span> <span class="token string">&quot;v1&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//注入AutoMapper</span>
	services<span class="token punctuation">.</span><span class="token function">AddAutoMapper</span><span class="token punctuation">(</span>Assembly<span class="token punctuation">.</span><span class="token function">GetExecutingAssembly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>DefinedTypes<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Profile</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetTypeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">IsAssignableFrom</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">AsType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span><span class="token function">AsType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：在Net core3.0以后，微软移除了Newtonsoft.Json，而使用了System.Text.Json，所以依赖于Newtonsoft.Json的组件将不可用，需要安装 Microsoft.AspNetCore.Mvc.NewtonsoftJson 包</p><p>因为仅仅作为演示，所以我只是新增一个控制器，里面包含了get、post、put、patch、delete几种类型的接口。这里先不贴代码，一点一点看。通过一个用户的添加、修改、删除作为一个演示的流程。</p><p>记得配置允许跨域请求，要不js请求会因为跨域问题而报错。详情看<a href="https://mp.weixin.qq.com/s/5MEVtDhHmdmjXe2x-yr6dg" target="_blank" rel="noopener noreferrer">此处<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>数据来源就是控制器里面的一个静态变量，格式如下</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDto</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> UserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Sex <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>静态变量如下</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> _userDtoList <span class="token operator">=</span> Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserDto</span>
        <span class="token punctuation">{</span>
            Name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span> <span class="token operator">+</span> t<span class="token punctuation">,</span>
            Sex <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span>
            UserId <span class="token operator">=</span> <span class="token number">6974150586715897857</span> <span class="token operator">+</span> t
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>后端请求的方法我使用的是HttpClient，并且做成了一个公共类，部分需要用到的如下</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpClientHelper</span><span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IHttpHelper</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Http<span class="token punctuation">.</span>HttpClient</span> _client<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
    <span class="token doc-comment comment">/// 构造函数</span>
    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>httpClientFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span>
    <span class="token keyword">public</span> <span class="token function">HttpClientHelper</span><span class="token punctuation">(</span><span class="token class-name">IHttpClientFactory</span> httpClientFactory<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _client <span class="token operator">=</span> httpClientFactory<span class="token punctuation">.</span><span class="token function">CreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">VerifyParam</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> jwtToken<span class="token punctuation">,</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> headers<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _client<span class="token punctuation">.</span>DefaultRequestHeaders<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token string">&quot;url不能为null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>jwtToken<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _client<span class="token punctuation">.</span>DefaultRequestHeaders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">$&quot;Bearer </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">jwtToken</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>headers<span class="token punctuation">?.</span>Count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token keyword">var</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token keyword">in</span> headers<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                _client<span class="token punctuation">.</span>DefaultRequestHeaders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">ConvertResponseResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">HttpResponseMessage</span> httpResponse<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//确保成功完成，不是成功就返回具体错误信息</span>
        httpResponse<span class="token punctuation">.</span><span class="token function">EnsureSuccessStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> resStr <span class="token operator">=</span> <span class="token keyword">await</span> httpResponse<span class="token punctuation">.</span>Content<span class="token punctuation">.</span><span class="token function">ReadAsStringAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">T</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">string</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span>Convert<span class="token punctuation">.</span><span class="token function">ChangeType</span><span class="token punctuation">(</span>resStr<span class="token punctuation">,</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">string</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> JsonConvert<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeserializeObject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>resStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="操作" tabindex="-1"><a class="header-anchor" href="#操作" aria-hidden="true">#</a> 操作</h1><p>请求头传递token只是为了演示请求头传递参数的写法，token为伪值</p><h2 id="get" tabindex="-1"><a class="header-anchor" href="#get" aria-hidden="true">#</a> GET</h2><p>从web服务检索数据。传递参数的本质是url字符串拼接，Request-Head头部传递，Request-Body中不能传递(严格点说不建议，因为我使用Apifox等工具可以在body中传值，swagger会提示 Request with GET/HEAD method cannot have body)</p><h3 id="query格式" tabindex="-1"><a class="header-anchor" href="#query格式" aria-hidden="true">#</a> Query格式</h3><p>编写用户id查询用户信息接口</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user/details&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">UserDto</span> <span class="token function">GetUserDetails</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">long</span></span> userId<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_userDtoList<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;未找到用户标识&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> _userDtoList<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="前端请求" tabindex="-1"><a class="header-anchor" href="#前端请求" aria-hidden="true">#</a> 前端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>$<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/details?userId=6974150586715897857&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Bearer 123456&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">contentType</span><span class="token punctuation">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> postdata <span class="token operator">=</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token string">&quot;6974150586715897857&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">headers</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;Bearer 123456&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/details&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">data</span><span class="token punctuation">:</span> postdata<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="后端请求" tabindex="-1"><a class="header-anchor" href="#后端请求" aria-hidden="true">#</a> 后端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> token <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span><span class="token comment">//此处token是伪值</span>
<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _httpHelper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ResultModel<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5000/api/HttpSample/user/details?userId=6974150586715897857&quot;</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这里的_httpHelper是注入的IHttpHelper(下面其他的方法一样)，对应的GetAsync为</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">GetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> jwtToken <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">VerifyParam</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> jwtToken<span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token generic-method"><span class="token function">ConvertResponseResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="接口工具请求" tabindex="-1"><a class="header-anchor" href="#接口工具请求" aria-hidden="true">#</a> 接口工具请求</h4><p>url：http://localhost:5000/api/HttpSample/user/details?userId=6974150586715897857</p><p>并且再请求头增加：Authorization，值为Bearer xxxx</p><p>返回结果如下</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/272869/1662823186138-84cf332f-1397-4d06-b863-0d52b240266b.png" alt="img"></p><h2 id="post" tabindex="-1"><a class="header-anchor" href="#post" aria-hidden="true">#</a> POST</h2><p>在web服务上创建新的数据项。约定用于向服务端提交数据操作，请求时候参数放在参数FromBody传递</p><h3 id="json格式" tabindex="-1"><a class="header-anchor" href="#json格式" aria-hidden="true">#</a> Json格式</h3><p>演示添加用户操作</p><p>请求类</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDto</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> UserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Sex <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接口代码示例</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user/add&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span> <span class="token class-name">UserDto</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_userDtoList<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> request<span class="token punctuation">.</span>UserId<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;用户标识已经存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Now <span class="token operator">+</span> <span class="token string">&quot;   &quot;</span> <span class="token operator">+</span> HttpContext<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _userDtoList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="前端请求-1" tabindex="-1"><a class="header-anchor" href="#前端请求-1" aria-hidden="true">#</a> 前端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>$<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> param <span class="token operator">=</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token string">&quot;8974150586715897867&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">name</span><span class="token punctuation">:</span> <span class="token string">&quot;老八&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">sex</span><span class="token punctuation">:</span> <span class="token string">&quot;女&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">dataType</span><span class="token punctuation">:</span> &#39;json&#39;<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">contentType</span><span class="token punctuation">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Bearer 123456&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/add&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">data</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="后端请求-1" tabindex="-1"><a class="header-anchor" href="#后端请求-1" aria-hidden="true">#</a> 后端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> token <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span><span class="token comment">//此处token是伪值</span>
<span class="token class-name"><span class="token keyword">var</span></span> url <span class="token operator">=</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/add&quot;</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> usedto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserDto</span>
<span class="token punctuation">{</span>
    UserId <span class="token operator">=</span> <span class="token number">123456</span><span class="token punctuation">,</span>
    Name <span class="token operator">=</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span>
    Sex <span class="token operator">=</span> <span class="token string">&quot;女&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _httpHelper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">PostAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ResultModel<span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> usedto<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">PostAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> data<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> jwtToken <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">VerifyParam</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> jwtToken<span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> jsonData <span class="token operator">=</span> data <span class="token keyword">is</span> <span class="token return-type class-name"><span class="token keyword">string</span> <span class="token punctuation">?</span></span> data<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> JsonConvert<span class="token punctuation">.</span><span class="token function">SerializeObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StringContent</span><span class="token punctuation">(</span>jsonData <span class="token operator">??</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">,</span> Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">PostAsync</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token generic-method"><span class="token function">ConvertResponseResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="接口工具请求-1" tabindex="-1"><a class="header-anchor" href="#接口工具请求-1" aria-hidden="true">#</a> 接口工具请求</h4><p>传递参数格式为json格式，请求头部默认添加：&quot;Content-Type&quot;, &quot;application/json&quot;</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/272869/1662866734791-b11bbdd0-b027-4909-a853-e49e8f3a1ea8.png" alt="img"></p><h3 id="x-www-form-unlencoded格式" tabindex="-1"><a class="header-anchor" href="#x-www-form-unlencoded格式" aria-hidden="true">#</a> x-www-form-unlencoded格式</h3><p>更新用户姓名</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user/updatename&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">UpdateName</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromForm</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">long</span></span> userId<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromForm</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token operator">=</span> _userDtoList<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entity <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;用户标识不存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    entity<span class="token punctuation">.</span>Name <span class="token operator">=</span> name<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="前端请求-2" tabindex="-1"><a class="header-anchor" href="#前端请求-2" aria-hidden="true">#</a> 前端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>$<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> postdata <span class="token operator">=</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token string">&quot;6974150586715897857&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">name</span><span class="token punctuation">:</span> <span class="token string">&quot;赵六&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Bearer 123456&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/updatename&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">data</span><span class="token punctuation">:</span> postdata<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="后端请求-2" tabindex="-1"><a class="header-anchor" href="#后端请求-2" aria-hidden="true">#</a> 后端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> token <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span><span class="token comment">//此处token是伪值</span>
<span class="token class-name"><span class="token keyword">var</span></span> url <span class="token operator">=</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/updatename&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> dic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">{</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;6974150586715897857&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _httpHelper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">PostFormDataAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ResultModel<span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> dic<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">PostFormDataAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> jwtToken <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">VerifyParam</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> jwtToken<span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> httpContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FormUrlEncodedContent</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">PostAsync</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> httpContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token generic-method"><span class="token function">ConvertResponseResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="接口工具请求-2" tabindex="-1"><a class="header-anchor" href="#接口工具请求-2" aria-hidden="true">#</a> 接口工具请求</h4><p>选择post请求，参数在Body，然后选择x-www-form-unlencoded格式。</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/272869/1662825041106-57360561-34bd-4633-877f-7304a4b5fe5d.png" alt="img"></p><h3 id="form-data格式" tabindex="-1"><a class="header-anchor" href="#form-data格式" aria-hidden="true">#</a> Form-data格式</h3><p>模拟上传用户头像操作</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user/uploadImg&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Upload</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromForm</span></span><span class="token punctuation">]</span> <span class="token class-name">IFormFile</span> img<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromForm</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">long</span></span> userId<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>img <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;用户头像不能为null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>HttpContext<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token operator">=</span> _userDtoList<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entity <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;用户标识不存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> img<span class="token punctuation">.</span>FileName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：当你上传大于30000000字节长度的文件时候，需要修改上传文件的默认限制</p><h4 id="前端请求-3" tabindex="-1"><a class="header-anchor" href="#前端请求-3" aria-hidden="true">#</a> 前端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>$<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">(</span><span class="token string">&quot;#tijiao&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//logoimg是&lt;input type=&quot;file&quot; id=&quot;logoimg&quot;&quot; /&gt;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> files <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">&quot;#logoimg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span>&#39;files&#39;<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取到文件列表</span>

        <span class="token class-name"><span class="token keyword">var</span></span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6974150586715897857&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">,</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;1122.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//图片文件流</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> &#39;post&#39;<span class="token punctuation">,</span>
            <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/uploadImg&quot;</span><span class="token punctuation">,</span>
            <span class="token named-parameter punctuation">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Bearer 123456&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token named-parameter punctuation">mimeType</span><span class="token punctuation">:</span> <span class="token string">&quot;multipart/form-data&quot;</span><span class="token punctuation">,</span>
            <span class="token named-parameter punctuation">processData</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token named-parameter punctuation">contentType</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token named-parameter punctuation">data</span><span class="token punctuation">:</span> formData<span class="token punctuation">,</span>
            <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//后端Httpclient请求成功后返回过来的结果</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="后端请求-3" tabindex="-1"><a class="header-anchor" href="#后端请求-3" aria-hidden="true">#</a> 后端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> url <span class="token operator">=</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/uploadImg&quot;</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MultipartFormDataContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> bytes <span class="token operator">=</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">.</span>File<span class="token punctuation">.</span><span class="token function">ReadAllBytes</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\Downloads\\11111.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> byteContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ByteArrayContent</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
byteContent<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span>ContentDisposition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Http<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span>ContentDispositionHeaderValue</span><span class="token punctuation">(</span><span class="token string">&quot;form-data&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Name <span class="token operator">=</span> <span class="token string">&quot;img&quot;</span><span class="token punctuation">,</span>
    FileName <span class="token operator">=</span> <span class="token string">&quot;111.jpg&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>byteContent<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写法一</span>
formData<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">StringContent</span><span class="token punctuation">(</span><span class="token string">&quot;6974150586715897857&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写法二</span>
<span class="token class-name"><span class="token keyword">var</span></span> byteContent2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ByteArrayContent</span><span class="token punctuation">(</span>Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">.</span><span class="token function">GetBytes</span><span class="token punctuation">(</span><span class="token string">&quot;天气&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byteContent2<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span>ContentDisposition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Http<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span>ContentDispositionHeaderValue</span><span class="token punctuation">(</span><span class="token string">&quot;form-data&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Name <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>byteContent2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> headerDic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
	<span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Bearer 123456&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _httpHelper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">PostFormDataAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ResultModel<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> formData<span class="token punctuation">,</span> headerDic<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">PostFormDataAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">,</span> <span class="token class-name">MultipartFormDataContent</span> data<span class="token punctuation">,</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">VerifyParam</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">PostAsync</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token generic-method"><span class="token function">ConvertResponseResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="接口工具请求-3" tabindex="-1"><a class="header-anchor" href="#接口工具请求-3" aria-hidden="true">#</a> 接口工具请求</h4><p>选择Body=&gt;form-data</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/272869/1662867846712-07cdbdf4-52c9-42e5-97dc-4353ceb05eaa.png" alt="img"></p><h2 id="put" tabindex="-1"><a class="header-anchor" href="#put" aria-hidden="true">#</a> PUT</h2><p>更新web服务上的数据项。</p><h3 id="json格式-1" tabindex="-1"><a class="header-anchor" href="#json格式-1" aria-hidden="true">#</a> Json格式</h3><p>更新用户信息</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPut</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user/update&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token class-name">UserDto</span> userDto<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>userDto <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;参数不能为空&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Now <span class="token operator">+</span> <span class="token string">&quot;    &quot;</span> <span class="token operator">+</span> HttpContext<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> currUser <span class="token operator">=</span> _userDtoList<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userDto<span class="token punctuation">.</span>UserId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currUser <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;用户标识不存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    currUser<span class="token punctuation">.</span>Name <span class="token operator">=</span> userDto<span class="token punctuation">.</span>Name<span class="token punctuation">;</span>
    currUser<span class="token punctuation">.</span>Sex <span class="token operator">=</span> userDto<span class="token punctuation">.</span>Sex<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="前端请求-4" tabindex="-1"><a class="header-anchor" href="#前端请求-4" aria-hidden="true">#</a> 前端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>$<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> param <span class="token operator">=</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token string">&quot;6974150586715897859&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">name</span><span class="token punctuation">:</span> <span class="token string">&quot;老八&quot;</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">sex</span><span class="token punctuation">:</span> <span class="token string">&quot;女&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;put&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">dataType</span><span class="token punctuation">:</span> &#39;json&#39;<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">contentType</span><span class="token punctuation">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Bearer 123456&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/update&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">data</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="后端请求-4" tabindex="-1"><a class="header-anchor" href="#后端请求-4" aria-hidden="true">#</a> 后端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> token <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span><span class="token comment">//此处token是伪值</span>

<span class="token class-name"><span class="token keyword">var</span></span> usedto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserDto</span>
<span class="token punctuation">{</span>
    UserId <span class="token operator">=</span> <span class="token number">6974150586715897859</span><span class="token punctuation">,</span>
    Name <span class="token operator">=</span> <span class="token string">&quot;老八&quot;</span><span class="token punctuation">,</span>
    Sex <span class="token operator">=</span> <span class="token string">&quot;女&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> url <span class="token operator">=</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/update&quot;</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _httpHelper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">PutAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ResultModel<span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> usedto<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> JsonConvert<span class="token punctuation">.</span><span class="token function">SerializeObject</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">PutAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> data<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> jwtToken <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">VerifyParam</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> jwtToken<span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> jsonData <span class="token operator">=</span> data <span class="token keyword">is</span> <span class="token return-type class-name"><span class="token keyword">string</span> <span class="token punctuation">?</span></span> data<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> JsonConvert<span class="token punctuation">.</span><span class="token function">SerializeObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StringContent</span><span class="token punctuation">(</span>jsonData <span class="token operator">??</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">,</span> Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">PutAsync</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token generic-method"><span class="token function">ConvertResponseResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="接口工具请求-4" tabindex="-1"><a class="header-anchor" href="#接口工具请求-4" aria-hidden="true">#</a> 接口工具请求</h4><p>URL：http://localhost:5000/api/HttpSample/user/update</p><p>参数传递：Body=&gt;json</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/272869/1662887452094-03bbd8da-a4f8-49fe-97ba-66ab4e3729a7.png" alt="img"></p><h2 id="delete" tabindex="-1"><a class="header-anchor" href="#delete" aria-hidden="true">#</a> DELETE</h2><p>删除web服务上的数据项。</p><h3 id="query格式-1" tabindex="-1"><a class="header-anchor" href="#query格式-1" aria-hidden="true">#</a> Query格式</h3><p>删除用户信息</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpDelete</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">long</span></span> userId<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token operator">=</span> _userDtoList<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entity <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;用户标识不存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Now <span class="token operator">+</span> <span class="token string">&quot;    &quot;</span> <span class="token operator">+</span> HttpContext<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _userDtoList<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="前端请求-5" tabindex="-1"><a class="header-anchor" href="#前端请求-5" aria-hidden="true">#</a> 前端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>$<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;DELETE&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user?userId=6974150586715897861&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Bearer 123456&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="后端请求-5" tabindex="-1"><a class="header-anchor" href="#后端请求-5" aria-hidden="true">#</a> 后端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> token <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span><span class="token comment">//此处token是伪值</span>
<span class="token class-name"><span class="token keyword">var</span></span> url <span class="token operator">=</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user?userId=6974150586715897862&quot;</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _httpHelper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeleteAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ResultModel<span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">DeleteAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> jwtToken <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">VerifyParam</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> jwtToken<span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">DeleteAsync</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token generic-method"><span class="token function">ConvertResponseResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="接口工具请求-5" tabindex="-1"><a class="header-anchor" href="#接口工具请求-5" aria-hidden="true">#</a> 接口工具请求</h4><p>URL：http://localhost:5000/api/HttpSample/user?userId=6974150586715897859</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/272869/1662887879216-7df10bec-f42e-40fa-9e8d-c6802bca5405.png" alt="img"></p><h2 id="patch" tabindex="-1"><a class="header-anchor" href="#patch" aria-hidden="true">#</a> Patch</h2><p>通过描述有关如何修改项的一组说明，更新web服务上的数据项。</p><p>请求格式如下：</p><p>[{&quot;op&quot; : &quot;replace&quot;, &quot;path&quot; : &quot;/PassWord&quot;, &quot;value&quot; : &quot;222222&quot;}]</p><p>op属性指示操作的类型，path属性指示要更新的元素，value属性提供新值。</p><p>add：添加属性或数组元素。 对于现有属性：设置值。</p><p>remove：删除属性或数组元素。</p><p>replace：替换操作</p><p>为了支持该请求方式，需要安装nuget包Microsoft.AspNetCore.Mvc.NewtonsoftJson。</p><p>参考文档：https://docs.microsoft.com/zh-cn/aspnet/core/web-api/jsonpatch?view=aspnetcore-6.0</p><h3 id="json格式-2" tabindex="-1"><a class="header-anchor" href="#json格式-2" aria-hidden="true">#</a> Json格式</h3><p>在此用于更新数据</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPatch</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user/update2/{userId}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">UserDto</span> <span class="token function">Update2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromRoute</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">long</span></span> userId<span class="token punctuation">,</span> <span class="token class-name">JsonPatchDocument<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span> jsonPatch<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromServices</span></span><span class="token punctuation">]</span> <span class="token class-name">IMapper</span> mapper<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token operator">=</span> _userDtoList<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entity <span class="token keyword">is</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ParameterException</span><span class="token punctuation">(</span><span class="token string">&quot;用户标识无效&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> dto <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Map</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    jsonPatch<span class="token punctuation">.</span><span class="token function">ApplyTo</span><span class="token punctuation">(</span>dto<span class="token punctuation">,</span> ModelState<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> user <span class="token operator">=</span> _userDtoList<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapper<span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>dto<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="前端请求-6" tabindex="-1"><a class="header-anchor" href="#前端请求-6" aria-hidden="true">#</a> 前端请求</h4><p>演示根据用户id去更新用户的姓名</p><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code>$<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> par <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">&quot;op&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;replace&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;老六&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> <span class="token string">&quot;Patch&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/update2/6974150586715897857&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Bearer 123456&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">contentType</span><span class="token punctuation">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">data</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>par<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="后端请求-6" tabindex="-1"><a class="header-anchor" href="#后端请求-6" aria-hidden="true">#</a> 后端请求</h4><div class="language-csharp ext-cs line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> token <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span><span class="token comment">//此处token是伪值</span>
<span class="token class-name"><span class="token keyword">var</span></span> url <span class="token operator">=</span> <span class="token string">&quot;http://localhost:5000/api/HttpSample/user/update2/6974150586715897859&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> <span class="token string">&quot;[{\&quot;op\&quot;:\&quot;replace\&quot;,\&quot;path\&quot;:\&quot;/name\&quot;,\&quot;value\&quot;:\&quot;小七七\&quot;}]&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _httpHelper<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">PatchAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ResultModel<span class="token punctuation">&lt;</span>UserDto<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> content<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">PatchAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">object</span></span> data<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> jwtToken <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token class-name">IDictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">VerifyParam</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> jwtToken<span class="token punctuation">,</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> jsonData <span class="token operator">=</span> data <span class="token keyword">is</span> <span class="token return-type class-name"><span class="token keyword">string</span> <span class="token punctuation">?</span></span> data<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> JsonConvert<span class="token punctuation">.</span><span class="token function">SerializeObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StringContent</span><span class="token punctuation">(</span>jsonData <span class="token operator">??</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">,</span> Encoding<span class="token punctuation">.</span>UTF8<span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">PatchAsync</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token generic-method"><span class="token function">ConvertResponseResult</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ConfigureAwait</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="接口工具请求-6" tabindex="-1"><a class="header-anchor" href="#接口工具请求-6" aria-hidden="true">#</a> 接口工具请求</h4><p>参数传递：Body=&gt;json</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/272869/1662889332097-f3e058bb-b5f6-40e6-8426-e05734331bc0.png" alt="img"></p></div></div><footer class="page-meta"><div class="meta-item edit-link"><a class="icon-container left meta-item-label" href="https://github.com/vuepress-reco/vuepress-theme-reco-next/edit/main/kbms/dotnetcore/webapi/webapi-base.md" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-3"></path><path d="M9 15h3l8.5-8.5a1.5 1.5 0 0 0-3-3L9 12v3"></path><path d="M16 5l3 3"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->Edit this page<!--]--></span></a></div><div class="meta-item last-updated"><a class="icon-container left meta-item-label" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11.795 21H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4"></path><circle cx="18" cy="18" r="4"></circle><path d="M15 3v4"></path><path d="M7 3v4"></path><path d="M3 11h16"></path><path d="M18 16.496V18l1 1"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->Last Updated 2022-09-12 20:29:12<!--]--></span></a></div></footer><nav class="page-nav"><p class="hasNext inner"><!----><span class="page-nav-item next">API版本控制 → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#get" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="GET"><!--[--><!--]--> GET <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#query格式" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="Query格式"><!--[--><!--]--> Query格式 <!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#post" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="POST"><!--[--><!--]--> POST <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#json格式" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="Json格式"><!--[--><!--]--> Json格式 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#x-www-form-unlencoded格式" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="x-www-form-unlencoded格式"><!--[--><!--]--> x-www-form-unlencoded格式 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#form-data格式" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="Form-data格式"><!--[--><!--]--> Form-data格式 <!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#put" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="PUT"><!--[--><!--]--> PUT <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#json格式-1" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="Json格式"><!--[--><!--]--> Json格式 <!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#delete" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="DELETE"><!--[--><!--]--> DELETE <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#query格式-1" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="Query格式"><!--[--><!--]--> Query格式 <!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#patch" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="Patch"><!--[--><!--]--> Patch <!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/dotnetcore/webapi/webapi-base.html#json格式-2" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="Json格式"><!--[--><!--]--> Json格式 <!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.565765f9.js" defer></script>
  </body>
</html>
